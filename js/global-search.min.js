var checkCoordinateSanity,createTemplateByProject,doDeepSearch,doSearch,generateColorByRecency,generateColorByRecency2,getProjectResultDialog,getSampleSummaryDialog,getSearchContainsObject,getSearchObject,namedMapAdvSource,namedMapSource,resetMap,setViewerBounds,showAllTables,indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};namedMapSource="adp_generic_heatmap-v16",namedMapAdvSource="adp_specific_heatmap-v11",checkCoordinateSanity=function(){var a,b;return b=!0,a={n:toFloat($("#north-coordinate").val()),w:toFloat($("#west-coordinate").val()),s:toFloat($("#south-coordinate").val()),e:toFloat($("#east-coordinate").val())},console.log("User Bounds",a),a.n>a.s||(b=!1,$(".lat-input").parent().addClass("has-error")),a.e>a.w||(b=!1,$(".lng-input").parent().addClass("has-error")),b?($(".coord-input").parent().removeClass("has-error"),$(".do-search").removeAttr("disabled"),!0):($(".do-search").attr("disabled","disabled"),!1)},createTemplateByProject=function(a){var b,c,d,e;return null==a&&(a="t2627cbcbb4d7597f444903b2e7a5ce5c_6d6d454828c05e8ceea03c99cc5f5"),d=Date.now(),e="infowindow_template_"+a,$("#"+e).exists()?!1:(c="SELECT cartodb_id FROM "+a,b="action=fetch&sql_query="+post64(c),$.post(uri.urlString+"api.php",b,"json").done(function(b){var c,f;return isNull(b.project_id)?console.warn("Couldn't find project ID for table "+a,b):(f='<script type="infowindow/html" id="'+e+'">\n  <div class="cartodb-popup v2">\n    <a href="#close" class="cartodb-popup-close-button close">x</a>\n    <div class="cartodb-popup-content-wrapper">\n      <div class="cartodb-popup-header">\n        <img style="width: 100%" src="https://cartodb.com/assets/logos/logos_full_cartodb_light.png"/>\n      </div>\n      <div class="cartodb-popup-content">\n        <!-- content.data contains the field info -->\n        <h4>Species: </h4>\n        <p>{{content.data.genus}} {{content.data.specificepithet}}</p>\n        <p>Tested {{content.data.diseasetested}} as {{content.data.diseasedetected}} (Fatal: {{content.data.fatal}})</p>\n        <p><a href="https://amphibiandisease.org/project.php?id='+b.project_id+'">View Project</a></p>\n      </div>\n    </div>\n    <div class="cartodb-popup-tip-container"></div>\n  </div>\n</script>',$("body").append(f),c=Date.now()-d,console.info("Template set for #"+e+" (took "+c+"ms)"))}),!1)},setViewerBounds=function(a){var b,c,d;return null==a&&(a=geo.lMap),b=a.getBounds(),d=b._southWest,c=b._northEast,c.lng-d.lng>360&&(d.lng=-180,c.lng=180),$("#north-coordinate").val(c.lat),$("#west-coordinate").val(d.lng),$("#south-coordinate").val(d.lat),$("#east-coordinate").val(c.lng),!1},getSearchObject=function(){var a,b,c,d,e;try{p$("#use-viewport-bounds").checked&&setViewerBounds()}catch(f){}return a={n:$("#north-coordinate").val(),w:$("#west-coordinate").val(),s:$("#south-coordinate").val(),e:$("#east-coordinate").val()},e={sampled_species:{data:$("#taxa-input").val().toLowerCase()},bounding_box_n:{data:a.n,search_type:"<="},bounding_box_e:{data:a.e,search_type:"<="},bounding_box_w:{data:a.w,search_type:">="},bounding_box_s:{data:a.s,search_type:">="}},b=$(p$("#disease-status").selectedItem).attr("data-search"),"*"!==b&&(e.disease_positive={data:0,search_type:b.toBool()?">":"="}),c=$(p$("#morbidity-status").selectedItem).attr("data-search"),"*"!==c&&(e.disease_morbidity={data:0,search_type:c.toBool()?">":"="}),d=$(p$("#pathogen-choice").selectedItem).attr("data-search"),"*"!==d&&(e.disease={data:d}),e},getSearchContainsObject=function(){var a,b,c,d,e,f,g,h,i,j;try{p$("#use-viewport-bounds").checked&&setViewerBounds()}catch(k){}return a={n:$("#north-coordinate").val(),w:$("#west-coordinate").val(),s:$("#south-coordinate").val(),e:$("#east-coordinate").val()},i=$("#taxa-input").val().toLowerCase(),j=i.split(" "),h=3===j.length?j.pop():"",g=2===j.length?j.pop():"",c=1===j.length?j.pop():"",f={sampled_species:{data:i,genus:c,species:g,subspecies:h},bounding_box_n:{data:a.s,search_type:">"},bounding_box_e:{data:a.w,search_type:">"},bounding_box_w:{data:a.e,search_type:"<"},bounding_box_s:{data:a.n,search_type:"<"}},b=$(p$("#disease-status").selectedItem).attr("data-search"),"*"!==b&&(f.disease_positive={data:0,search_type:b.toBool()?">":"="}),d=$(p$("#morbidity-status").selectedItem).attr("data-search"),"*"!==d&&(f.disease_morbidity={data:0,search_type:d.toBool()?">":"="}),e=$(p$("#pathogen-choice").selectedItem).attr("data-search"),"*"!==e&&(f.disease={data:e}),f},doSearch=function(a,b){var c,d,e,f;return null==a&&(a=getSearchObject()),null==b&&(b=!1),startLoad(),e=jsonTo64(a),c="advanced_project_search",f=b?namedMapAdvSource:namedMapSource,d="perform="+c+"&q="+e,$.post(uri.urlString+"admin-api.php",d,"json").done(function(a){var c,d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;if(console.info("Adv. search result",a),a.status!==!0)return console.error(a.error),stopLoadError("There was a problem fetching the results"),!1;if(C=Object.toArray(a.result),0===C.length)return console.warn("No results"),stopLoadError("No results"),!1;if(b)return doDeepSearch(C,f),!1;for(I=0,z=0,J=[],u=[],c={n:-90,s:90,e:-180,w:180},n=0,console.info("Using standard named map "+f),o=0,v=C.length;v>o;o++){for(A=C[o],A.bounding_box_n>c.n&&(c.n=A.bounding_box_n),A.bounding_box_e>c.e&&(c.e=A.bounding_box_e),A.bounding_box_s<c.s&&(c.s=A.bounding_box_s),A.bounding_box_w<c.w&&(c.w=A.bounding_box_w),I+=A.disease_samples,z+=A.disease_positive,E=A.sampled_species.split(","),p=0,w=E.length;w>p;p++)F=E[p],F=F.trim(),indexOf.call(J,F)<0&&J.push(F);if(null==(null!=(B=A.carto_id)?B.table:void 0))try{g=JSON.parse(A.carto_id),e={};for(q in g){K=g[q],h=q.replace("&#95;","_");try{i=K.replace("&#95;","_")}catch(M){i=K}e[h]=i}A.carto_id=e}catch(N){}try{H=A.carto_id.table,H=H.unescape()}catch(N){}if(isNull(H))console.warn("Unable to get a table id from this carto data:",A.carto_id);else{try{createTemplateByProject(H)}catch(N){}s={name:f,type:"namedmap",layers:[{layer_name:"layer-"+u.length}],params:{table_name:H,color:"#FF6600"}},u.push(s)}C[n]=A,++n}try{d=[[c.n,c.w],[c.n,c.e],[c.s,c.e],[c.s,c.w]],y=getMapCenter(d),L=getMapZoom(d,".map-container"),console.info("Found @ zoom = "+L+" center",y,"for bounding box",d),null!=geo.lMap&&(geo.lMap.once("zoomend",function(a){return function(){return console.info("ZoomEnd is ensuring centering"),k(0)}}(this)),geo.lMap.setZoom(L));try{p$("#global-data-map").latitude=y.lat,p$("#global-data-map").longitude=y.lng,p$("#global-data-map").zoom=L}catch(N){}try{geo.lMap.setView(y.getObj())}catch(N){}}catch(l){j=l,console.warn("Failed to rezoom/recenter map - "+j.message,d),console.warn(j.stack)}G=J.length,console.info("Projects containing your search returned "+I+" ("+z+" positive) among "+G+" species",c);try{for(resetMap(geo.lMap,!1,!1),r=0,x=u.length;x>r;r++)s=u[r],t={user_name:cartoAccount,type:"namedmap",named_map:s},createRawCartoMap(t);$("#post-map-subtitle").text("Viewing projects containing "+I+" samples ("+z+" positive) among "+G+" species"),$(".show-result-list").remove(),D='<paper-icon-button class="show-result-list" icon="icons:subject" data-toggle="tooltip" title="Show Project list" raised></paper-icon-button>',$("#post-map-subtitle").append(D),getProjectResultDialog(C),(k=function(a,b,c){var d,e,f,g,h,i,l,m;i=roundNumber(y.lat,3),l=roundNumber(y.lng,3);try{e=roundNumber(p$("#global-data-map").latitude,3),f=roundNumber(p$("#global-data-map").longitude,3),d={type:"google-map-element",lat:e,lng:f}}catch(n){}try{d=geo.lMap.getCenter(),e=roundNumber(d.lat,3),f=roundNumber(d.lng,3)}catch(n){}return g=100*Math.abs((e-i)/i),h=100*Math.abs((f-l)/l),2>g&&2>h&&a>5?(console.info("Correctly centered",y,d,[g,h]),geo.lMap.getZoom()!==L&&console.warn("The map was centered before the zoom finished -- this may need to fire again"),clearTimeout(_adp.centerTimeout),!1):(15>=a||console.warn("Centering too deviant",2>g,2>h,2>g&&2>h,e,f,i,l),isNumber(b)||(b=100),a>b?(m=c*b,console.info("Map could not be correctly centered in "+m+"ms"),clearTimeout(_adp.centerTimeout),!1):(++a,_adp.centerTimeout=delay(c,function(){var c;isNumber(b)||(b=100);try{p$("#global-data-map").latitude=y.lat,p$("#global-data-map").longitude=y.lng}catch(d){}try{console.log("#"+a+"/"+b+" General setting view to",y.getObj(),[g,h]),geo.lMap.setView(y.getObj())}catch(c){j=c,console.warn("Error setting view - "+j.message)}return b>a?k(a):d})))})(0,100,100)}catch(m){j=m,console.error("Couldn't create map! "+j.message),console.warn(j.stack)}return stopLoad(),!1}).fail(function(a,b){return console.error(a,b),console.warn("Attempted to do",uri.urlString+"admin-api.php?"+d),stopLoadError("Server error, couldn't perform search")}),!1},doDeepSearch=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z;null==b&&(b=namedMapAdvSource);try{for(O=getSearchContainsObject(),W=0,F=0,X=[],z=[],d={n:-90,s:90,e:-180,w:180},s=0,console.info("Using deep named map "+b),j="",null!=(null!=(I=O.disease_positive)?I.data:void 0)&&(j=">"===O.disease_positive.search_type?"true":"false"),q="",null!=(null!=(J=O.disease_morbidity)?J.data:void 0)&&(">"===O.disease_morbidity.search_type?(q="and fatal = true",r=!0):(q="and fatal = false",r=!1)),E="",null!=(null!=(K=O.disease)?K.data:void 0)&&(E=function(){switch(O.disease.data){case"Batrachochytrium dendrobatidis":return"bd";case"Batrachochytrium salamandrivorans":return"bsal";default:return""}}()),H={},t=0,A=a.length;A>t;t++){for(G=a[t],G.bounding_box_n>d.n&&(d.n=G.bounding_box_n),G.bounding_box_e>d.e&&(d.e=G.bounding_box_e),G.bounding_box_s<d.s&&(d.s=G.bounding_box_s),G.bounding_box_w<d.w&&(d.w=G.bounding_box_w),W+=G.disease_samples,F+=G.disease_positive,P=G.sampled_species.split(","),u=0,B=P.length;B>u;u++)R=P[u],R=R.trim(),indexOf.call(X,R)<0&&X.push(R);if(null==(null!=(L=G.carto_id)?L.table:void 0))try{g=JSON.parse(G.carto_id),f={};for(v in g){Y=g[v],h=v.replace("&#95;","_");try{i=Y.replace("&#95;","_")}catch(_){i=Y}f[h]=i}G.carto_id=f}catch(aa){}try{U=G.carto_id.table,U=U.unescape()}catch(aa){}isNull(U)?console.warn("Unable to get a table id from this carto data:",G.carto_id):(x={name:b,type:"namedmap",layers:[{layer_name:"layer-"+z.length}],params:{table_name:U,color:"#FF6600",genus:O.sampled_species.genus,specific_epithet:O.sampled_species.species,disease_detected:j,morbidity:q,pathogen:E}},z.push(x),H[U]={id:G.project_id,name:G.project_title}),a[s]=G,++s}try{e=[[d.n,d.w],[d.n,d.e],[d.s,d.e],[d.s,d.w]],D=getMapCenter(e),Z=getMapZoom(e,".map-container"),console.info("Found @ zoom = "+Z+" center",D,"for bounding box",e),null!=geo.lMap&&(geo.lMap.once("zoomend",function(a){return function(){return console.info("ZoomEnd is ensuring centering"),m(0)}}(this)),geo.lMap.setZoom(Z));try{p$("#global-data-map").latitude=D.lat,p$("#global-data-map").longitude=D.lng,p$("#global-data-map").zoom=Z}catch(aa){}try{geo.lMap.setView(D.getObj())}catch(aa){}}catch(n){l=n,console.warn("Failed to rezoom/recenter map - "+l.message,e),console.warn(l.stack)}S=X.length,console.info("Projects containing your search returned "+W+" ("+F+" positive) among "+S+" species",d),T="Viewing data points",isNull(null!=(M=O.sampled_species)?M.genus:void 0)||(Q=" of '"+O.sampled_species.genus+" "+O.sampled_species.species+" "+O.sampled_species.subspecies+"'",T+=Q.replace(/( \*)/gim,"")),k=null!=O.pathogen?O.pathogen.data:"disease",null!=O.disease&&(T+=" for "+O.disease.data),null!=O.disease_positive&&(T+=" with disease status '"+j+"'"),null!=O.disease_morbidity&&(T+=" with morbidity status '"+r+"'"),T+=" in bounds defined by [{lat: "+O.bounding_box_n.data+",lng: "+O.bounding_box_w.data+"},{lat: "+O.bounding_box_s.data+",lng: "+O.bounding_box_e.data+"}]";try{for(resetMap(geo.lMap,!1,!1),N="",w=0,C=z.length;C>w;w++)x=z[w],y={user_name:cartoAccount,type:"namedmap",named_map:x},createRawCartoMap(y),V="select * from "+x.params.table_name+" where (genus ilike '%"+x.params.genus+"%' and specificepithet ilike '%"+x.params.specific_epithet+"%' and diseasedetected ilike '%"+x.params.disease_detected+"%' "+x.params.morbidity+" and diseasetested ilike '%"+x.params.pathogen+"%');",N+=V;c="action=fetch&sql_query="+post64(N),$.post(uri.urlString+"api.php",c,"json").done(function(b){console.info("Detailed results: ",b);try{a=Object.toArray(b.parsed_responses),getSampleSummaryDialog(a,H)}catch(c){console.warn("Couldn't parse responses from server")}return!1}).fail(function(a,b){return console.error("Couldn't fetch detailed results")}),$("#post-map-subtitle").text(T),(m=function(a,b,c){var d,e,f,g,h,i,j,k;i=roundNumber(D.lat,3),j=roundNumber(D.lng,3);try{e=roundNumber(p$("#global-data-map").latitude,3),f=roundNumber(p$("#global-data-map").longitude,3),d={type:"google-map-element",lat:e,lng:f}}catch(n){}try{d=geo.lMap.getCenter(),e=roundNumber(d.lat,3),f=roundNumber(d.lng,3)}catch(n){}return g=100*Math.abs((e-i)/i),h=100*Math.abs((f-j)/j),2>g&&2>h&&a>5?(console.info("Correctly centered",D,d,[g,h]),geo.lMap.getZoom()!==Z&&console.warn("The map was centered before the zoom finished -- this may need to fire again"),clearTimeout(_adp.centerTimeout),!1):(15>=a||console.warn("Centering too deviant",2>g,2>h,2>g&&2>h,e,f,i,j),isNumber(b)||(b=100),a>b?(k=c*b,console.info("Map could not be correctly centered in "+k+"ms"),clearTimeout(_adp.centerTimeout),!1):(++a,_adp.centerTimeout=delay(c,function(){var c;isNumber(b)||(b=100);try{p$("#global-data-map").latitude=D.lat,p$("#global-data-map").longitude=D.lng}catch(d){}try{console.log("#"+a+"/"+b+" Deep setting view to",D.getObj(),[g,h]),geo.lMap.setView(D.getObj())}catch(c){l=c,console.warn("Error setting view - "+l.message)}return b>a?m(a):d})))})(0,100,100)}catch(o){l=o,console.error("Couldn't create map! "+l.message),console.warn(l.stack)}stopLoad()}catch(p){l=p,stopLoadError("There was a problem performing a sample search"),console.error("Problem performing sample search! "+l.message),console.warn(l.stack)}return!1},showAllTables=function(){var a,b;return console.log("Starting table list"),b=uri.urlString+"admin-api.php",a="perform=list",$.post(b,a,"json").done(function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(a.status===!1)return console.error("Got bad result",a),!1;console.info("Good result",a),b=a.carto_table_map,j=[],n=[],f=0;for(l in b)c=b[l],m=c.table,console.log("Colors",c.creation,generateColorByRecency2(c.creation)),isNull(m)?console.warn("Bad table #"+f,m):(m=m.unescape(),n.push(m),h={name:namedMapSource,type:"namedmap",layers:[{layer_name:"layer-"+j.length,interactivity:"cartodb_id, id, diseasedetected, genus, specificepithet"}],params:{table_name:m,color:generateColorByRecency2(c.creation)}},j.push(h)),++f;console.info("Got tables",n),console.info("Got layers",j);try{for(g=0,k=j.length;k>g;g++)h=j[g],i={user_name:cartoAccount,type:"namedmap",named_map:h},console.log("Creating raw map from",i),createRawCartoMap(i)}catch(e){d=e,console.error("Couldn't create map! "+d.message),console.warn(d.stack)}return!1}).error(function(a,b){return console.error("AJAX failure showing tables",a,b)}),!1},resetMap=function(a,b,c){var d,e,f,g,h,i,j,k;if(null==a&&(a=geo.lMap),null==b&&(b=!0),null==c&&(c=!0),null==geo.mapSublayers)return console.error("geo.mapSublayers is not defined."),!1;try{for(i=geo.mapSublayers,e=0,g=i.length;g>e;e++)k=i[e],k.remove()}catch(l){j=a._layers;for(d in j){f=j[d];try{if(h=f._url.search("arcgisonline"),-1===h)try{f.removeLayer()}catch(m){f.remove()}}catch(n){}}}return $("#post-map-subtitle").text(""),c&&(geo.lMap.setZoom(geo.defaultLeafletOptions.zoom),geo.lMap.panTo(geo.defaultLeafletOptions.center)),b&&(showAllTables(),$("#post-map-subtitle").text("All Projects")),!1},generateColorByRecency=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(null==b&&(b=1420070400),isNumber(a)||(p=new Date(a),a=p.getTime()/1e3),a>Date.now()/1e3&&(a/=1e3),c=Date.now()/1e3-a,l=a-b,c>l)e="#000000";else{for(o=l/765,n=c/o,d=255,g=255,m=255-n,m=0>m?0:toInt(m),n>255&&(g=510-n,g=0>g?0:toInt(g),n>510&&(d=765-n,d=0>d?0:toInt(d))),console.log("Base channels",m,g,d),h=[m.toString(16),g.toString(16),d.toString(16)],i=0,j=0,k=h.length;k>j;j++)f=h[j],1===f.length&&(h[i]="0"+f),++i;e="#"+h.join("")}return e="#ff0000"},generateColorByRecency2=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;if(null==b&&(b=1420070400),isNumber(a)||(p=new Date(a),a=p.getTime()/1e3),a>Date.now()/1e3&&(a/=1e3),c=Date.now()/1e3-a,l=a-b,c>l)e="#000000";else{for(o=l/765,n=c/o,m=255-n,g=0>m?0-m:255-m,m=0>m?0:toInt(m),d=g>255?toInt(g-255):0,g=g>255?255-(g-255):toInt(g),d=0>d?0:toInt(d),console.log("Base channels 2",m,g,d),h=[m.toString(16),g.toString(16),d.toString(16)],i=0,j=0,k=h.length;k>j;j++)f=h[j],1===f.length&&(h[i]="0"+f),++i;e="#"+h.join("")}return console.log("Recency2 generated",h,e),e="#ff0000"},getProjectResultDialog=function(a){var b,c,d,e,f,g,h,i,j;if(isArray(a)||(a=Object.toArray(a)),0===a.length)return console.warn("There were no projects in the result list"),!1;for(i=[],f=0,g=a.length;g>f;f++)h=a[f],b=h.includes_anura?"<iron-icon icon='icons:check-circle'></iron-icon>":"<iron-icon icon='icons:clear'></iron-icon>",c=h.includes_caudata?"<iron-icon icon='icons:check-circle'></iron-icon>":"<iron-icon icon='icons:clear'></iron-icon>",d=h.includes_gymnophiona?"<iron-icon icon='icons:check-circle'></iron-icon>":"<iron-icon icon='icons:clear'></iron-icon>",j="<tr>\n  <td>"+h.project_title+'</td>\n  <td class="text-center">'+b+'</td>\n  <td class="text-center">'+c+'</td>\n  <td class="text-center">'+d+'</td>\n  <td class="text-center"><paper-icon-button data-toggle="tooltip" title="Visit Project" raised class="click" data-href="https://amphibiandisease.org/project.php?id='+h.project_id+'" icon="icons:arrow-forward"></paper-icon-button></td>\n</tr>',i.push(j);return e='<paper-dialog id="modal-project-list" modal always-on-top auto-fit-on-attach>\n  <h2>Project Result List</h2>\n  <paper-dialog-scrollable>\n    <div>\n      <table class="table table-striped">\n        <tr>\n          <th>Project Name</th>\n          <th>Caudata</th>\n          <th>Anura</th>\n          <th>Gymnophiona</th>\n          <th>Visit</th>\n        </tr>\n        '+i.join("\n")+'\n      </table>\n    </div>\n  </paper-dialog-scrollable>\n  <div class="buttons">\n    <paper-button dialog-dismiss>Close</paper-button>\n  </div>\n</paper-dialog>',$("#modal-project-list").remove(),$("body").append(e),$("#modal-project-list").on("iron-overlay-closed",function(){return $(".leaflet-control-attribution").removeAttr("hidden"),$(".leaflet-control").removeAttr("hidden")}),$(".show-result-list").unbind().click(function(){return console.log("Calling dialog helper"),safariDialogHelper("#modal-project-list",0,function(){return console.info("Successfully opened dialog"),$(".leaflet-control-attribution").attr("hidden","hidden"),$(".leaflet-control").attr("hidden","hidden")})}),bindClicks(),console.info("Generated project result list"),!1},getSampleSummaryDialog=function(a,b){var c,d,e,f,g,h,i,j,k;if(isArray(a)||(a=Object.toArray(a)),0===a.length)return console.warn("There were no results in the result list"),!1;for(console.log("Generating dialog from",a),i=[],e=0,f=a.length;f>e;e++){h=a[e];try{c=JSON.stringify(h.rows)}catch(l){c="Invalid data from server"}k=g=b[h.table],j='<tr>\n  <td><pre class="code-box"></pre></td>\n  <td class="text-center"><paper-icon-button data-toggle="tooltip" title="Visit Project" raised class="click" data-href="https://amphibiandisease.org/project.php?id='+g.project_id+'" icon="icons:arrow-forward" data-toggle="tooltip" title="'+g.name+'"></paper-icon-button></td>\n</tr>',i.push(j)}return d='<paper-dialog id="modal-sql-details-list" modal always-on-top auto-fit-on-attach>\n  <h2>Project Result List</h2>\n  <paper-dialog-scrollable>\n    <div class="row">\n      <div class="col-xs-12 table-responsive">\n        <table class="table table-striped">\n          <tr>\n            <th colspan="4">Query Data</th>\n            <th>Visit Project</th>\n          </tr>\n          '+i.join("\n")+'\n        </table>\n      </div>\n    </div>\n  </paper-dialog-scrollable>\n  <div class="buttons">\n    <paper-button dialog-dismiss>Close</paper-button>\n  </div>\n</paper-dialog>',$("#modal-sql-details-list").remove(),$("body").append(d),$("#modal-sql-details-list").on("iron-overlay-closed",function(){return $(".leaflet-control-attribution").removeAttr("hidden"),$(".leaflet-control").removeAttr("hidden")}),$(".show-result-list").unbind().click(function(){return console.log("Calling dialog helper"),safariDialogHelper("#modal-sql-details-list",0,function(){return console.info("Successfully opened dialog"),$(".leaflet-control-attribution").attr("hidden","hidden"),$(".leaflet-control").attr("hidden","hidden")})}),bindClicks(),console.info("Generated project result list"),!1},$(function(){var a,b,c,d,e;return geo.initLocation(),d={center:[17.811456088564483,-37.265625],zoom:2},geo.defaultLeafletOptions=d,b=new L.Map("global-map-container",d),c={attribution:"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"},L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",c).addTo(b),geo.lMap=b,$(".coord-input").keyup(function(){return checkCoordinateSanity()}),a=function(a){var b,c,d;if(c=checkCoordinateSanity(),!c)return toastStatusMessage("Please check your coordinates"),!1;d=getSearchObject();try{b=$(a).attr("data-deep").toBool(),b&&(d=getSearchContainsObject())}catch(e){b=!1}return doSearch(d,b),!1},$("input.submit-project-search").keyup(function(b){var c;return c=b.keyCode?b.keyCode:b.which,13===c?a():!1}),$(".do-search").click(function(){return a(this)}),$("#reset-global-map").click(function(){return resetMap(),!1}),$("#toggle-global-search-filters").click(function(){var a,b;return b=p$("#global-search-filters").opened,p$("#global-search-filters").toggle(),a=b?"Show":"Hide",$(this).find(".action-word").text(a),!1}),e=function(){return p$("#use-viewport-bounds").checked?(console.info("Setting viewer bounds, checkbox is checked"),setViewerBounds()):console.info("Not using viewport bounds")},geo.lMap.on("moveend",function(){return e()}).on("zoomend",function(){return e()}),showAllTables(),checkFileVersion(!1,"js/global-search.min.js"),!1});
//# sourceMappingURL=maps/c.map