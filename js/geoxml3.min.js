function MultiGeometry(a){function b(a,b){var c=new google.maps.Polyline(a);return google.maps.event.addListener(c,"click",function(a){google.maps.event.trigger(b,"click",a)}),google.maps.event.addListener(c,"dblclick",function(a){google.maps.event.trigger(b,"dblclick",a)}),google.maps.event.addListener(c,"mousedown",function(a){google.maps.event.trigger(b,"mousedown",a)}),google.maps.event.addListener(c,"mousemove",function(a){google.maps.event.trigger(b,"mousemove",a)}),google.maps.event.addListener(c,"mouseout",function(a){google.maps.event.trigger(b,"mouseout",a)}),google.maps.event.addListener(c,"mouseover",function(a){google.maps.event.trigger(b,"mouseover",a)}),google.maps.event.addListener(c,"mouseup",function(a){google.maps.event.trigger(b,"mouseup",a)}),google.maps.event.addListener(c,"rightclick",function(a){google.maps.event.trigger(b,"rightclick",a)}),c}for(this.setValues(a),this.polylines=[],i=0;i<this.paths.length;i++){var c=a;c.path=this.paths[i];var d=b(c,this);this.polylines.push(d)}}window.google&&google.maps&&(MultiGeometry.prototype=new google.maps.MVCObject,MultiGeometry.prototype.changed=function(a){if(this.polylines)for(var b=0;b<this.polylines.length;b++)this.polylines[b].set(a,this.get(a))},MultiGeometry.prototype.setMap=function(a){this.set("map",a)},MultiGeometry.prototype.getMap=function(){return this.get("map")}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),geoXML3=window.geoXML3||{instances:[]},geoXML3.parser=function(a){function b(a,b,c,d){return c=c||function(a){x(a,b,d)},"function"==typeof ZipFile&&"object"==typeof JSIO&&"function"==typeof JSIO.guessFileType&&(/^data:[^,]*(kmz)/.test(b.baseUrl)?contentType=JSIO.FileType.Binary:/^data:[^,]*(kml|xml)/.test(b.baseUrl)?contentType=JSIO.FileType.XML:/^data:/.test(b.baseUrl)?contentType=JSIO.FileType.Unknown:i.forceZip?contentType=JSIO.FileType.Binary:contentType=JSIO.guessFileType(b.baseUrl),contentType==JSIO.FileType.Binary||contentType==JSIO.FileType.Unknown)?(b.isCompressed=!0,b.baseDir=b.baseUrl+"/",void geoXML3.fetchZIP(a,c,b.internals.parser)):(b.isCompressed=!1,b.baseDir=defileURL(b.baseUrl),void geoXML3.fetchXML(a,c))}function c(a){var b=t(w(a,"styleUrl")[0]);if(b&&b.indexOf("#")!=-1)var c=b.split("#");else var c=["",""];return c}function d(a,b,c,d){var f="{inline}"===b?e(r):m[b][c]=m[b][c]||e(r),g=w(a,"BalloonStyle");g&&g.length>0&&(f.balloon.bgColor=t(w(g[0],"bgColor")[0],f.balloon.bgColor),f.balloon.textColor=t(w(g[0],"textColor")[0],f.balloon.textColor),f.balloon.text=t(w(g[0],"text")[0],f.balloon.text),f.balloon.displayMode=t(w(g[0],"displayMode")[0],f.balloon.displayMode));var g=w(a,"IconStyle");if(g&&g.length>0){var h=f.icon;h.scale=parseFloat(t(w(g[0],"scale")[0],h.scale)),g=w(g[0],"hotSpot"),g&&g.length>0&&(h.hotSpot={x:g[0].getAttribute("x"),y:g[0].getAttribute("y"),xunits:g[0].getAttribute("xunits"),yunits:g[0].getAttribute("yunits")}),g=w(a,"Icon"),g&&g.length>0&&(h.href=t(w(g[0],"href")[0]),h.url=cleanURL(d,h.href),l[h.url]&&(h.url=l[h.url].dataUrl),h.dim={x:parseInt(t(v(g[0],s,"x")[0],h.dim.x)),y:parseInt(t(v(g[0],s,"y")[0],h.dim.y)),w:parseInt(t(v(g[0],s,"w")[0],h.dim.w)),h:parseInt(t(v(g[0],s,"h")[0],h.dim.h))},h.img=new Image,h.img.onload=function(){h.dim.w<0||h.dim.h<0?(h.dim.w=this.width,h.dim.h=this.height):h.dim.th=this.height},h.img.src=h.url,h.img.width>0&&(h.dim.w<0||h.dim.h<0?(h.dim.w=h.img.width,h.dim.h=h.img.height):h.dim.th=h.img.height))}return g=w(a,"LineStyle"),g&&g.length>0&&(f.line.color=t(w(g[0],"color")[0],f.line.color),f.line.colorMode=t(w(g[0],"colorMode")[0],f.line.colorMode),f.line.width=t(w(g[0],"width")[0],f.line.width)),g=w(a,"PolyStyle"),g&&g.length>0&&(f.poly.color=t(w(g[0],"color")[0],f.poly.color),f.poly.colorMode=t(w(g[0],"colorMode")[0],f.poly.colorMode),f.poly.outline=u(w(g[0],"outline")[0],f.poly.outline),f.poly.fill=u(w(g[0],"fill")[0],f.poly.fill)),f}function e(a){if(null==a||"object"!=typeof a)return a;if(a.cloneNode)return a.cloneNode(!0);var b=new a.constructor;for(var c in a)b[c]=e(a[c]);return b}function f(a,b,f,g){for(var h=w(a,"Pair"),j=new Object,k=0;k<h.length;k++){var l=t(w(h[k],"key")[0]),n=t(w(h[k],"Style")[0]),o=c(h[k]),p=o[0]?cleanURL(g,o[0]):b,q=o[1];n?j[l]=d(n,p,q):q&&m[p][q]&&(j[l]=e(m[p][q]))}j.normal?m[b][f]=e(j.normal):m[b][f]=e(r),j.highlight&&i.processStyles&&A(j.highlight),m[b][f].map=e(j)}function g(a,b){for(var c=w(a,b),d=[],e=0;e<c.length;e++){var f=w(c[e],"coordinates");if(!f){if(d.length>0)break;return[{coordinates:[]}]}for(var g=0;g<f.length;g++){var h=t(f[g]).trim();h=h.replace(/,\s+/g,",");for(var i=h.split(/\s+/g),j=i.length,k=[],l=0;l<j;l++)h=i[l].split(","),isNaN(h[0])||isNaN(h[1])||k.push({lat:parseFloat(h[1]),lng:parseFloat(h[0]),alt:parseFloat(h[2])});d.push({coordinates:k})}}return d}google.maps.MVCObject.call(this);var h,i=new geoXML3.parserOptions(a),j=[],k={},l={},m={};!i.infoWindow&&i.singleInfoWindow&&(i.infoWindow=new google.maps.InfoWindow);var n=function(a,b){var c={parser:this,docSet:b||[],remaining:1,parseOnly:!(i.afterParse||i.processStyles)};thisDoc=new Object,thisDoc.internals=c,c.docSet.push(thisDoc),x(geoXML3.xmlParse(a),thisDoc)},o=function(a,c,d){h||(h="geoXML3.instances["+(geoXML3.instances.push(this)-1)+"]"),"string"==typeof a&&(a=[a]);for(var e,f={parser:this,docSet:c||[],remaining:a.length,parseOnly:!(i.afterParse||i.processStyles)},g=0;g<a.length;g++){var j=cleanURL(defileURL(location.pathname),a[g]);k[j]?(e=k[j],e.reload=!0):(e=new Object,e.baseUrl=j,f.docSet.push(e)),e.url=a[g],e.internals=f,b(e.url,e,null,d)}},p=function(a){a||(a=j[0]);var b;if(a.markers)for(b=0;b<a.markers.length;b++)a.markers[b].infoWindow&&a.markers[b].infoWindow.close(),a.markers[b].setVisible(!1);if(a.ggroundoverlays)for(b=0;b<a.ggroundoverlays.length;b++)a.ggroundoverlays[b].setOpacity(0);if(a.gpolylines)for(b=0;b<a.gpolylines.length;b++)a.gpolylines[b].infoWindow&&a.gpolylines[b].infoWindow.close(),a.gpolylines[b].setMap(null);if(a.gpolygons)for(b=0;b<a.gpolygons.length;b++)a.gpolygons[b].infoWindow&&a.gpolygons[b].infoWindow.close(),a.gpolygons[b].setMap(null)},q=function(a){a||(a=j[0]);var b;if(a.markers)for(b=0;b<a.markers.length;b++)a.markers[b].setVisible(!0);if(a.ggroundoverlays)for(b=0;b<a.ggroundoverlays.length;b++)a.ggroundoverlays[b].setOpacity(a.ggroundoverlays[b].percentOpacity_);if(a.gpolylines)for(b=0;b<a.gpolylines.length;b++)a.gpolylines[b].setMap(i.map);if(a.gpolygons)for(b=0;b<a.gpolygons.length;b++)a.gpolygons[b].setMap(i.map)},r={balloon:{bgColor:"ffffffff",textColor:"ff000000",text:"<h3>$[name]</h3>\n<div>$[description]</div>\n<div>$[geDirections]</div>",displayMode:"default"},icon:{scale:1,dim:{x:0,y:0,w:-1,h:-1},hotSpot:{x:.5,y:.5,xunits:"fraction",yunits:"fraction"}},line:{color:"ffffffff",colorMode:"normal",width:1},poly:{color:"ffffffff",colorMode:"normal",fill:!0,outline:!0}},s="http://www.google.com/kml/ext/2.2",t=geoXML3.nodeValue,u=geoXML3.getBooleanValue,v=geoXML3.getElementsByTagNameNS,w=geoXML3.getElementsByTagName,x=function(a,n,o){if(!a||"failed parse"==a)return geoXML3.log("Unable to retrieve "+n.url),i.failedParse&&i.failedParse(n),void(n.failed=!0);if(a.parseError&&0!=a.parseError.errorCode){var p=a.parseError,q="Parse error in line "+p.line+", col "+p.linePos+" (error code: "+p.errorCode+")\n\nError Reason: "+p.reason+"Error Line: "+p.srcText;return geoXML3.log("Unable to retrieve "+n.url+": "+q),i.failedParse&&i.failedParse(n),void(n.failed=!0)}if(a.documentElement&&"parsererror"==a.documentElement.nodeName)return geoXML3.log("Unable to retrieve "+n.url+": "+a.documentElement.childNodes[0].nodeValue),i.failedParse&&i.failedParse(n),void(n.failed=!0);if(!n)throw"geoXML3 internal error: render called with null document";var y;n.placemarks=[],n.groundoverlays=[],n.ggroundoverlays=[],n.networkLinks=[],n.gpolygons=[],n.gpolylines=[];for(var z=w(a,"styleUrl"),G=n.internals.docSet,y=0;y<z.length;y++){var H=t(z[y]).split("#")[0];if(H){var I=cleanURL(n.baseDir,H);if(I!==n.baseUrl&&!k[I]){var J,K=G.indexOfObjWithItem("baseUrl",I);if(K!=-1){if(J=G[K],J.failed)continue}else J=new Object,J.url=I,J.baseUrl=I,J.internals=n.internals,n.internals.docSet.push(J),n.internals.remaining++;return void b(I,J,function(b){x(b,J),x(a,n)})}}}n.styles=m[n.baseUrl]=m[n.baseUrl]||{};var L;for(z=w(a,"Style"),nodeCount=z.length,y=0;y<nodeCount;y++){thisNode=z[y];var L=thisNode.getAttribute("id");L&&d(thisNode,n.baseUrl,L,n.baseDir)}for(z=w(a,"StyleMap"),y=0;y<z.length;y++){thisNode=z[y];var L=thisNode.getAttribute("id");L&&f(thisNode,n.baseUrl,L,n.baseDir)}if(!i.processStyles&&i.createMarker||B(n),n.reload&&n.markers)for(y=0;y<n.markers.length;y++)n.markers[y].active=!1;var M,N,O,P,Q,R,P,S,T,U=w(a,"Placemark");for(pm=0;pm<U.length;pm++){N=U[pm];var V=c(N);M={name:t(w(N,"name")[0]),description:t(w(N,"description")[0]),styleUrl:V.join("#"),styleBaseUrl:V[0]?cleanURL(n.baseDir,V[0]):n.baseUrl,styleID:V[1],visibility:u(w(N,"visibility")[0],!0),balloonVisibility:u(v(N,s,"balloonVisibility")[0],!i.suppressInfoWindows),id:N.getAttribute("id")},M.style=m[M.styleBaseUrl]&&m[M.styleBaseUrl][M.styleID]||e(r);var W=w(N,"Style");if(W&&W.length>0){var X=d(N,"{inline}","{inline}");A(X),X&&(M.style=X)}/^https?:\/\//.test(M.description)&&(M.description=['<a href="',M.description,'">',M.description,"</a>"].join("")),M.vars={display:{name:"Name",description:"Description",address:"Street Address",id:"ID",Snippet:"Snippet",geDirections:"Directions"},val:{name:M.name||"",description:M.description||"",address:t(w(N,"address")[0],""),id:N.getAttribute("id")||"",Snippet:t(w(N,"Snippet")[0],"")},directions:["f=d","source=GeoXML3"]};var Y=w(N,"ExtendedData");if(Y&&Y.length>0)for(var Z=w(Y[0],"Data"),$=0;$<Z.length;$++){var _=Z[$],aa=_.getAttribute("name");if(aa){var ba=t(w(_,"displayName")[0],aa),ca=t(w(_,"value")[0]);M.vars.val[aa]=ca,M.vars.display[aa]=ba}}var da=w(N,"coordinates"),ea=null;if(da&&da.length>0)for(var fa=0;fa<da.length;fa++)if(da[fa].parentNode&&da[fa].parentNode.nodeName){var ga=da[fa].parentNode;switch(ea=ga.nodeName){case"Point":M.Point=g(N,"Point")[0],M.latlng=new google.maps.LatLng(M.Point.coordinates[0].lat,M.Point.coordinates[0].lng),R=1;break;case"LinearRing":S=w(N,"Polygon"),M.Polygon||(M.Polygon=[{outerBoundaryIs:{coordinates:[]},innerBoundaryIs:[{coordinates:[]}]}]);for(var ha=0;ha<S.length;ha++)M.Polygon[ha]={outerBoundaryIs:{coordinates:[]},innerBoundaryIs:[{coordinates:[]}]},M.Polygon[ha].outerBoundaryIs=g(S[ha],"outerBoundaryIs"),M.Polygon[ha].innerBoundaryIs=g(S[ha],"innerBoundaryIs");T=M.Polygon[0].outerBoundaryIs;break;case"LineString":R=0,M.LineString=g(N,"LineString")}}var ia=v(N,s,"Track"),ja=[];if(ia.length>0){for(var y=0;y<ia.length;y++){for(var ka=v(ia[y],s,"coord"),T=[],K=0;K<ka.length;K++){var O=geoXML3.nodeValue(ka[K]).trim();O=O.split(/\s+/g),isNaN(O[0])||isNaN(O[1])||T.push({lat:parseFloat(O[1]),lng:parseFloat(O[0]),alt:parseFloat(O[2])})}ja.push({coordinates:T})}M.Track=ja}if(i.pmParseFn&&i.pmParseFn(N,M),n.placemarks.push(M),M.Point){google.maps&&(n.bounds=n.bounds||new google.maps.LatLngBounds,n.bounds.extend(M.latlng));var la=i.createMarker||C,ma=!1;if(!i.createMarker&&n&&(n.markers=n.markers||[],n.reload))for(var K=0;K<n.markers.length;K++)if(n.markers[K].id==M.id||!n.markers[K].id&&n.markers[K].getPosition().equals(M.latlng)){ma=n.markers[K].active=!0;break}if(!ma){var P=la(M,n);P&&(P.active=M.visibility,P.id=M.id)}}var Q,na;n&&(M.Polygon&&(n.gpolygons=n.gpolygons||[]),M.LineString&&(n.gpolylines=n.gpolylines||[]),M.Track&&(n.gpolylines=n.gpolylines||[]));var oa=i.createPolygon||F,pa=i.createLineString||E;M.Polygon&&(Q=oa(M,n),Q&&(Q.active=M.visibility)),M.LineString&&(na=pa(M,n),na&&(na.active=M.visibility)),M.Track&&(na=pa(M,n),na&&(na.active=M.visibility)),google.maps&&(n.bounds=n.bounds||new google.maps.LatLngBounds,Q&&n.bounds.union(Q.bounds),na&&n.bounds.union(na.bounds))}if(n.reload&&n.markers)for(y=n.markers.length-1;y>=0;y--)n.markers[y].active||(n.markers[y].infoWindow&&n.markers[y].infoWindow.close(),n.markers[y].setMap(null),n.markers.splice(y,1));var qa=i.createOverlay||D;if(n.reload&&n.groundoverlays)for(y=0;y<n.groundoverlays.length;y++)n.groundoverlays[y].active=!1;n&&(n.groundoverlays=n.groundoverlays||[]);var ra,sa,ta=w(a,"GroundOverlay");for(y=0;y<ta.length;y++){N=ta[y];var ua=cleanURL(n.baseDir,t(w(N,"href")[0]));l[ua]&&(ua=l[ua].dataUrl),ra={name:t(w(N,"name")[0]),description:t(w(N,"description")[0]),icon:{href:ua},latLonBox:{north:parseFloat(t(w(N,"north")[0])),east:parseFloat(t(w(N,"east")[0])),south:parseFloat(t(w(N,"south")[0])),west:parseFloat(t(w(N,"west")[0]))},rotation:-1*parseFloat(t(w(N,"rotation")[0]))},google.maps&&(n.bounds=n.bounds||new google.maps.LatLngBounds,n.bounds.union(new google.maps.LatLngBounds(new google.maps.LatLng(ra.latLonBox.south,ra.latLonBox.west),new google.maps.LatLng(ra.latLonBox.north,ra.latLonBox.east))));var va=w(N,"color");va&&va.length>0?ra.opacity=geoXML3.getOpacity(t(va[0])):ra.opacity=1,n.groundoverlays.push(ra);var ma=!1;if(n){if(n.groundoverlays=n.groundoverlays||[],n.reload){overlayBounds=new google.maps.LatLngBounds(new google.maps.LatLng(ra.latLonBox.south,ra.latLonBox.west),new google.maps.LatLng(ra.latLonBox.north,ra.latLonBox.east));var wa=n.groundoverlays;for(y=wa.length;y--;)if(wa[y].bounds().equals(overlayBounds)&&wa.url_===ra.icon.href){ma=wa[y].active=!0;break}}ma||(sa=qa(ra,n),sa.active=!0)}if(n.reload&&n.groundoverlays&&n.groundoverlays.length){var wa=n.groundoverlays;for(y=wa.length;y--;)wa[y].active||(wa[y].remove(),wa.splice(y,1));n.groundoverlays=wa}}var xa,ya=document.location.pathname.split("/");ya=ya.splice(0,ya.length-1).join("/");var za=w(a,"NetworkLink");for(y=0;y<za.length;y++)N=za[y],xa={name:t(w(N,"name")[0]),link:{href:t(w(N,"href")[0]),refreshMode:t(w(N,"refreshMode")[0])}},xa.link.refreshMode||(xa.link.refreshMode="onChange"),"onInterval"===xa.link.refreshMode?(xa.link.refreshInterval=parseFloat(t(w(N,"refreshInterval")[0])),isNaN(xa.link.refreshInterval)&&(xa.link.refreshInterval=0)):"onChange"===xa.link.refreshMode&&(xa.link.viewRefreshMode=t(w(N,"viewRefreshMode")[0]),xa.link.viewRefreshMode||(xa.link.viewRefreshMode="never"),"onStop"===xa.link.viewRefreshMode&&(xa.link.viewRefreshTime=t(w(N,"refreshMode")[0]),xa.link.viewFormat=t(w(N,"refreshMode")[0]),xa.link.viewFormat||(xa.link.viewFormat="BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]"))),/^[\/|http]/.test(xa.link.href)||(xa.link.href=ya+"/"+xa.link.href),"onInterval"===xa.link.refreshMode&&xa.link.refreshInterval>0?setInterval(h+'.parse("'+xa.link.href+'")',1e3*xa.link.refreshInterval):"onChange"===xa.link.refreshMode&&("never"===xa.link.viewRefreshMode?n.internals.parser.parse(xa.link.href,n.internals.docSet):"onStop"===xa.link.viewRefreshMode);if(n.bounds&&(n.internals.bounds=n.internals.bounds||new google.maps.LatLngBounds,n.internals.bounds.union(n.bounds)),(n.markers||n.groundoverlays||n.gpolylines||n.gpolygons)&&(n.internals.parseOnly=!1),!n.internals.parseOnly&&n.baseUrl)if(k[n.baseUrl])for(var y in k[n.baseUrl])k[n.baseUrl][y]=n[y];else j.push(n),k[n.baseUrl]=n;n.internals.remaining--,0===n.internals.remaining&&(i.zoom&&n.internals.bounds&&!n.internals.bounds.isEmpty()&&i.map&&i.map.fitBounds(n.internals.bounds),i.afterParse&&i.afterParse(n.internals.docSet),google.maps.event.trigger(n.internals.parser,"parsed"),"function"==typeof o&&o())},y=function(a,b){var c={};a=a||"ffffffff";var d=a.substr(0,2),e=a.substr(2,2),f=a.substr(4,2),g=a.substr(6,2);return c.opacity=parseInt(d,16)/256,c.color="random"===b?z(g,f,e):"#"+g+f+e,c},z=function(a,b,c){var d={rr:a,gg:b,bb:c};for(var e in d){var f=d[e];null==f&&(f="ff"),f=Math.round(Math.random()*parseInt(a,16)).toString(16),1===f.length&&(f="0"+f),d[e]=f}return"#"+d.rr+d.gg+d.bb},A=function(a){var b=a.icon;if(b&&b.href){if(b.img&&!b.img.complete&&b.dim.w<0&&b.dim.h<0)return b.markerBacklog=[],void(b.img.onload=function(){b.dim.w<0||b.dim.h<0?(b.dim.w=this.width,b.dim.h=this.height):b.dim.th=this.height,A(a);for(var c=0;c<b.markerBacklog.length;c++){var d=b.markerBacklog[c][0],e=b.markerBacklog[c][1];C(d,e),d.marker&&(d.marker.active=!0)}delete b.markerBacklog});b.img&&b.img.complete?b.dim.w<0||b.dim.h<0?(b.dim.w=b.img.width,b.dim.h=b.img.height):b.dim.th=b.img.height:(b.dim.whGuess=!0,b.dim.w=32,b.dim.h=32,b.dim.th=32);var c=Math.round,d=b.dim.y;"undefined"!=typeof b.dim.th&&b.dim.th!=b.dim.h&&(d=Math.abs(d-(b.dim.th-b.dim.h)));var e,f,g={x:b.dim.x*b.scale,y:d*b.scale,w:b.dim.w*b.scale,h:b.dim.h*b.scale,aX:b.hotSpot.x*b.scale,aY:b.hotSpot.y*b.scale,iW:(b.img?b.img.width:b.dim.w)*b.scale,iH:(b.img?b.img.height:b.dim.h)*b.scale};switch(b.hotSpot.xunits){case"fraction":e=c(g.aX*b.dim.w);break;case"insetPixels":e=c(b.dim.w*b.scale-g.aX);break;default:e=c(g.aX)}switch(b.hotSpot.yunits){case"fraction":f=g.h-c(b.dim.h*g.aY);break;case"insetPixels":f=c(g.aY);break;default:f=c(b.dim.h*b.scale-g.aY)}var h=new google.maps.Point(e,f),i=b.dim.whGuess?null:new google.maps.Size(c(g.w),c(g.h)),j=1==b.scale?null:b.dim.whGuess?new google.maps.Size(c(g.w),c(g.h)):new google.maps.Size(c(g.iW),c(g.iH)),k=new google.maps.Point(c(g.x),c(g.y));l[b.url]&&(b.url=l[b.url].dataUrl),b.marker={url:b.url,size:i,origin:k,anchor:h,scaledSize:j};var m=/\/(red|blue|green|yellow|lightblue|purple|pink|orange)(-dot)?\.png/,n=new google.maps.Size(59,32),o=new google.maps.Point(16,32);m.test(b.href)?b.shadow={url:"http://maps.google.com/mapfiles/ms/micons/msmarker.shadow.png",size:n,origin:null,anchor:o,scaledSize:n}:b.href.indexOf("-pushpin.png")>-1&&(b.shadow={url:"http://maps.google.com/mapfiles/ms/micons/pushpin_shadow.png",size:n,origin:null,anchor:o,scaledSize:n})}},B=function(a){for(var b in a.styles)A(a.styles[b])},C=function(a,b){var c=a.style.icon;if(!c.marker&&c.img)return c.markerBacklog=c.markerBacklog||[],void c.markerBacklog.push([a,b]);var d=geoXML3.combineOptions(i.markerOptions,{map:i.map,position:new google.maps.LatLng(a.Point.coordinates[0].lat,a.Point.coordinates[0].lng),title:a.name,zIndex:Math.round(a.Point.coordinates[0].lat*-1e5)<<5,icon:c.marker,shadow:c.shadow,flat:!c.shadow,visible:a.visibility}),e=new google.maps.Marker(d);return b&&b.markers.push(e),G(a,b,e),a.marker=e,e},D=function(a,b){if(!window.ProjectedOverlay)throw"geoXML3 error: ProjectedOverlay not found while rendering GroundOverlay from KML";var c=new google.maps.LatLngBounds(new google.maps.LatLng(a.latLonBox.south,a.latLonBox.west),new google.maps.LatLng(a.latLonBox.north,a.latLonBox.east)),d=geoXML3.combineOptions(i.overlayOptions,{percentOpacity:100*a.opacity,rotation:a.rotation}),e=new ProjectedOverlay(i.map,a.icon.href,c,d);return b&&(b.ggroundoverlays=b.ggroundoverlays||[],b.ggroundoverlays.push(e)),e},E=function(a,b){var c=[],d=new google.maps.LatLngBounds;if(a.LineString)for(var e=0;e<a.LineString.length;e++){for(var f=[],g=a.LineString[e].coordinates,h=0;h<g.length;h++){var j=new google.maps.LatLng(g[h].lat,g[h].lng);f.push(j),d.extend(j)}c.push(f)}else if(a.Track)for(var e=0;e<a.Track.length;e++){for(var f=[],g=a.Track[e].coordinates,h=0;h<g.length;h++){var j=new google.maps.LatLng(g[h].lat,g[h].lng);f.push(j),d.extend(j)}c.push(f)}var k=(c[0][Math.floor(f.length/2)],y(a.style.line.color,a.style.line.colorMode)),l=geoXML3.combineOptions(i.polylineOptions,{map:i.map,path:f,strokeColor:k.color,strokeWeight:a.style.line.width,strokeOpacity:k.opacity,title:a.name,visible:a.visibility});if(c.length>1){l.paths=c;var m=new MultiGeometry(l)}else{l.path=c[0];var m=new google.maps.Polyline(l)}return m.bounds=d,G(a,b,m),b&&b.gpolylines.push(m),a.polyline=m,m},F=function(a,b){for(var c=new google.maps.LatLngBounds,d=0,e=[],f=0;f<a.Polygon.length;f++){for(var g=0;g<a.Polygon[f].outerBoundaryIs.length;g++){for(var h=a.Polygon[f].outerBoundaryIs[g].coordinates,j=[],k=0;k<h.length;k++){var l=new google.maps.LatLng(h[k].lat,h[k].lng);j.push(l),c.extend(l)}e.push(j),d+=j.length}for(var g=0;g<a.Polygon[f].innerBoundaryIs.length;g++){for(var h=a.Polygon[f].innerBoundaryIs[g].coordinates,j=[],k=0;k<h.length;k++){var l=new google.maps.LatLng(h[k].lat,h[k].lng);j.push(l),c.extend(l)}e.push(j),d+=j.length}}var m=y(a.style.line.color,a.style.line.colorMode),n=y(a.style.poly.color,a.style.poly.colorMode);a.style.poly.fill||(n.opacity=0);var o=a.style.line.width;a.style.poly.outline||(o=0,m.opacity=0);var p=geoXML3.combineOptions(i.polygonOptions,{map:i.map,paths:e,title:a.name,strokeColor:m.color,strokeWeight:o,strokeOpacity:m.opacity,fillColor:n.color,fillOpacity:n.opacity,visible:a.visibility}),q=new google.maps.Polygon(p);return q.bounds=c,G(a,b,q),b&&b.gpolygons.push(q),a.polygon=q,q},G=function(a,b,c){var d=a.style.balloon,e=a.vars;if(a.balloonVisibility&&"hide"!==d.displayMode){if(!a.latlng||i.suppressDirections&&i.suppressDirections)e.val.geDirections="";else{e.directions.push("sll="+a.latlng.toUrlValue());var f="http://maps.google.com/maps?"+e.directions.join("&"),g=encodeURIComponent(e.val.address||a.latlng.toUrlValue()).replace(/\%20/g,"+");e.val.geDirections='<a href="'+f+"&daddr="+g+'" target=_blank>To Here</a> - <a href="'+f+"&saddr="+g+'" target=_blank>From Here</a>'}var h=d.text.replace(/\$\[(\w+(\/displayName)?)\]/g,function(a,b,c){return c?e.display[b]:e.val[b]}),j="geoxml3_infowindow geoxml3_style_"+a.styleID,k=[];"ffffffff"!=d.bgColor&&k.push("background: "+y(d.bgColor).color+";"),"ff000000"!=d.textColor&&k.push("color: "+y(d.textColor).color+";");var m=k.length?' style="'+k.join(" ")+'"':"",n=geoXML3.combineOptions(i.infoWindowOptions,{content:'<div class="'+j+'"'+m+">"+h+"</div>",pixelOffset:new google.maps.Size(0,2)});c.infoWindow=i.infoWindow||new google.maps.InfoWindow(n),c.infoWindowOptions=n,google.maps.event.addListener(c,"click",function(a){var c=this.infoWindow;c.close(),c.setOptions(this.infoWindowOptions),a&&a.latLng?c.setPosition(a.latLng):this.bounds&&c.setPosition(this.bounds.getCenter()),c.setContent("<div id='geoxml3_infowindow'>"+c.getContent()+"</div>"),google.maps.event.addListenerOnce(c,"domready",function(){for(var a=document.getElementById("geoxml3_infowindow"),c=a.getElementsByTagName("img"),d=0;d<c.length;d++){var e=c[d].getAttribute("src"),f=cleanURL(b.baseDir,e);l[f]?c[d].src=l[f].dataUrl:l[e]&&(c[d].src=l[e].dataUrl)}}),c.open(this.map,this.bounds?null:this)})}};return{options:i,docs:j,docsByUrl:k,kmzMetaData:l,parse:o,render:x,parseKmlString:n,hideDocument:p,showDocument:q,processStyles:B,createMarker:C,createOverlay:D,createPolyline:E,createPolygon:F}},geoXML3.getOpacity=function(a){if(a&&""!==a&&8==a.length){var b=parseInt(a.substr(0,2),16);return b/255}return 1},geoXML3.log=function(a){window.console?console.log(a):alert("log:"+a)},geoXML3.parserOptions=function(a){if(this.map=null,this.zoom=!0,this.singleInfoWindow=!1,this.suppressInfoWindows=!1,this.processStyles=!1,this.markerOptions={},this.infoWindowOptions={},this.overlayOptions={},this.afterParse=null,this.failedParse=null,this.createMarker=null,this.createOverlay=null,a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);return this},geoXML3.combineOptions=function(a,b){var c={};if(a)for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);if(b)for(d in b)b.hasOwnProperty(d)&&void 0===c[d]&&(c[d]=b[d]);return c},geoXML3.parserOptions.prototype.combineOptions=geoXML3.combineOptions,geoXML3.fetchers=[],geoXML3.xmlParse=function(a){if("undefined"!=typeof ActiveXObject||"ActiveXObject"in window){var b=new ActiveXObject("Microsoft.XMLDOM");return b.loadXML(a),b}return"undefined"!=typeof DOMParser?(new DOMParser).parseFromString(a,"text/xml"):document.createElement("div",null)},geoXML3.isParseError=function(a){if("undefined"!=typeof ActiveXObject||"ActiveXObject"in window)return!1;var b=new DOMParser,c=b.parseFromString("<","text/xml"),d=c.getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===d?a.getElementsByTagName("parsererror").length>0:a.getElementsByTagNameNS(d,"parsererror").length>0},geoXML3.fetchXML=function(a,b){function c(){b()}var d=new Object;if(geoXML3.fetchers.length)d=geoXML3.fetchers.pop();else if(window.XMLHttpRequest)d.fetcher=new window.XMLHttpRequest;else if(window.ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP","MSXML.XMLHTTP"],f=0;f<e.length;f++)try{d.fetcher=new ActiveXObject(e[f]);break}catch(a){continue}if(!d.fetcher)return geoXML3.log("Unable to create XHR object"),b(null),null}return d.fetcher.open("GET",a,!0),d.fetcher.overrideMimeType&&d.fetcher.overrideMimeType("text/xml"),d.fetcher.onreadystatechange=function(){if(4===d.fetcher.readyState){if(d.xhrtimeout&&clearTimeout(d.xhrtimeout),d.fetcher.status>=400)geoXML3.log("HTTP error "+d.fetcher.status+" retrieving "+a),b();else{if(d.fetcher.responseXML){var c=d.fetcher.responseXML;!c||c.documentElement||c.ownerElement||c.loadXML(d.fetcher.responseText)}else c=geoXML3.xmlParse(d.fetcher.responseText);c.parseError&&0!=c.parseError.errorCode?(geoXML3.log("XML parse error "+c.parseError.errorCode+", "+c.parseError.reason+"\nLine:"+c.parseError.line+", Position:"+c.parseError.linepos+", srcText:"+c.parseError.srcText),c="failed parse"):geoXML3.isParseError(c)&&(geoXML3.log("XML parse error"),c="failed parse"),b(c)}geoXML3.fetchers.push(d)}},d.xhrtimeout=setTimeout(c,6e4),d.fetcher.send(null),null};var IEversion=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a};geoXML3.fetchZIP=function(a,b,c){new ZipFile(a,function(d){for(var e=0;e<d.status.length;e++){var f=d.status[e];if(0==f.indexOf("ERROR"))return geoXML3.log("HTTP/ZIP error retrieving "+a+": "+f),void b();if(0==f.indexOf("EXCEPTION"))return geoXML3.log("HTTP/ZIP exception retrieving "+a+": "+f),void b();0==f.indexOf("WARNING")?geoXML3.log("HTTP/ZIP warning retrieving "+a+": "+f):0==f.indexOf("INFO")&&geoXML3.log("HTTP/ZIP info retrieving "+a+": "+f)}for(var g,h=0,e=0;e<d.entries.length;e++){var i=d.entries[e].name;/\.kml$/.test(i)&&(h++,1==h?g=e:geoXML3.log("KMZ warning retrieving "+a+': found extra KML "'+i+'" in KMZ; discarding...'))}for(var j=cleanURL(defileURL(a),a)+"/",k={timer:null,extractLeft:0,timerCalls:0},l=function(a,d){var e=cleanURL(j,a.name),f=a.name.substring(a.name.lastIndexOf(".")+1).toLowerCase();if(k.extractLeft--,"string"==typeof d.description&&"Error"==d.name)return geoXML3.log("KMZ error extracting "+e+": "+d.description),void b();var g;"jpg"===f&&(f="jpeg"),g=/^(gif|jpeg|png)$/.test(f)?"image/"+f:"mp3"===f?"audio/mpeg":"m4a"===f?"audio/mp4":"m4a"===f?"audio/MP4-LATM":"application/octet-stream",c.kmzMetaData[e]={},c.kmzMetaData[e].entry=a,c.kmzMetaData[e].dataUrl="data:"+g+";base64,"+base64Encode(d),/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&(IEversion()<8&&c.kmzMetaData[e].dataUrl.length>2071||IEversion<9&&c.kmzMetaData[e].dataUrl.length>32767)&&(c.kmzMetaData[e].dataUrl="data:image/gif;base64,R0lGODlhDwAQAOMPADBPvSpQ1Dpoyz1p6FhwvU2A6ECP63CM04CWxYCk+V6x+UK++Jao3rvC3fj7+v///yH5BAEKAA8ALAAAAAAPABAAAASC8Mk5mwCAUMlWwcLRHEelLAoGDMgzSsiyGCAhCETDPMh5XQCBwYBrNBIKWmg0MCQHj8MJU5IoroYCY6AAAgrDIbbQDGIK6DR5UPhlNo0JAlSUNAiDgH7eNAxEDWAKCQM2AAFheVxYAA0AIkFOJ1gBcQQaUQKKA5w7LpcEBwkJaKMUEQA7"),c.kmzMetaData[internalSrc(a.name)]=c.kmzMetaData[e]},m=function(c,d){return"string"==typeof d.description&&"Error"==d.name?(geoXML3.log("KMZ error extracting "+c.name+": "+d.description),void b()):(clearTimeout(k.timer),k.extractLeft<=1?(k.extractLeft--,void b(geoXML3.xmlParse(d))):(k.timerCalls++,void(k.timerCalls<100?k.timer=setTimeout(function(){m(c,d)},100):(geoXML3.log("KMZ warning extracting "+a+": entire ZIP has not been extracted after 10 seconds; running through KML, anyway..."),k.extractLeft--,b(geoXML3.xmlParse(d))))))},e=0;e<d.entries.length;e++){var n=d.entries[e],o=n.name.substring(n.name.lastIndexOf(".")+1).toLowerCase();/^(gif|jpe?g|png|kml)$/.test(o)&&("kml"===o&&e!=g||(c||"kml"==o)&&(k.extractLeft++,"kml"===o?n.extract(m):n.extract(l)))}})},geoXML3.nodeValue=function(a,b){var c="";if(!a)return"undefined"==typeof b||null===b?null:b;if(3==a.nodeType||4==a.nodeType||2==a.nodeType)c+=a.nodeValue;else if(1==a.nodeType||9==a.nodeType||11==a.nodeType)for(var d=0;d<a.childNodes.length;++d)c+=arguments.callee(a.childNodes[d]);return c},geoXML3.getBooleanValue=function(a,b){var c=geoXML3.nodeValue(a);return null===c?b||!1:(c=parseInt(c),!!isNaN(c)||0!=c)},geoXML3.getElementsByTagNameNS=function(a,b,c){if(a&&"undefined"!=typeof a.getElementsByTagNameNS)return a.getElementsByTagNameNS(b,c);if(!a)return[];var d=a.documentElement||a.ownerDocument&&a.ownerDocument.documentElement;if(!d||!d.attributes)return[];for(var e=0;e<d.attributes.length;e++){var f=d.attributes[e];if("xmlns"===f.prefix&&f.nodeValue===b)return a.getElementsByTagName(f.baseName+":"+c);if("xmlns"===f.nodeName&&f.nodeValue===b)return"undefined"!=typeof a.selectNodes?(d.ownerDocument.getProperty("SelectionNamespaces")||d.ownerDocument.setProperty("SelectionNamespaces","xmlns:defaultNS='"+b+"'"),a.selectNodes(".//defaultNS:"+c)):(d.setAttribute("xmlns:defaultNS",b),a.getElementsByTagName("defaultNS:"+c))}return geoXML3.getElementsByTagName(a,c)},geoXML3.getElementsByTagName=function(a,b){return a&&"undefined"!=typeof a.getElementsByTagNameNS?a.getElementsByTagName(b):a.getElementsByTagName(b)};var toAbsURL=function(a,b){var c,d,e,f=location.protocol+"://"+location.host;if(!b.length)return"";if(/^\w+:/.test(b))return b;if(0==b.indexOf("/"))return f+b;if(c=a.replace(/\/[^\/]*$/,""),d=b.match(/\.\.\//g))for(b=b.substring(3*d.length),e=d.length;e--;)c=c.substring(0,c.lastIndexOf("/"));return f+c+"/"+b},internalSrc=function(a){var b=document.location.href;b=b.substring(0,b.lastIndexOf("/")+1);var c=b+a;return c},dehostURL=function(a){var b=location.protocol+"://"+location.host;return b=b.replace(/([\.\\\+\*\?\[\^\]\$\(\)])/g,"\\$1"),a.replace(new RegExp("^"+b,"i"),"")},cleanURL=function(a,b){return dehostURL(toAbsURL(a?a.split("#")[0].split("?")[0]:defileURL(location.pathname),b?b.split("#")[0].split("?")[0]:""))},defileURL=function(a){return a?a.substr(0,a.lastIndexOf("/")+1):"/"};Array.prototype.hasObject=Array.indexOf?function(a){return this.indexOf(a)!==-1}:function(a){for(var b=this.length+1;b--;)if(this[b-1]===a)return!0;return!1},Array.prototype.hasItemInObj=function(a,b){for(var c=this.length+1;c--;)if(this[c-1][a]===b)return!0;return!1},Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){null==b?b=0:b<0&&(b=Math.max(0,this.length+b));for(var c=b,d=this.length;c<d;c++)if(this[c]===a)return c;return-1}),Array.prototype.indexOfObjWithItem=function(a,b,c){null==c?c=0:c<0&&(c=Math.max(0,this.length+c));for(var d=c,e=this.length;d<e;d++)if(this[d][a]===b)return d;return-1};var base64Encode=function(a){for(var b,c,d,e,f,g,h,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j="",k=0;k<a.length;)b=a[k++],c=a[k++],d=a[k++],e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,void 0==c?g=h=64:void 0==d&&(h=64),j=j+i.charAt(e)+i.charAt(f)+i.charAt(g)+i.charAt(h);return j};
//# sourceMappingURL=maps/geoxml3.min.map