function MultiGeometry(a){function b(a,b){var c=new google.maps.Polyline(a);return google.maps.event.addListener(c,"click",function(a){google.maps.event.trigger(b,"click",a)}),google.maps.event.addListener(c,"dblclick",function(a){google.maps.event.trigger(b,"dblclick",a)}),google.maps.event.addListener(c,"mousedown",function(a){google.maps.event.trigger(b,"mousedown",a)}),google.maps.event.addListener(c,"mousemove",function(a){google.maps.event.trigger(b,"mousemove",a)}),google.maps.event.addListener(c,"mouseout",function(a){google.maps.event.trigger(b,"mouseout",a)}),google.maps.event.addListener(c,"mouseover",function(a){google.maps.event.trigger(b,"mouseover",a)}),google.maps.event.addListener(c,"mouseup",function(a){google.maps.event.trigger(b,"mouseup",a)}),google.maps.event.addListener(c,"rightclick",function(a){google.maps.event.trigger(b,"rightclick",a)}),c}for(this.setValues(a),this.polylines=[],i=0;i<this.paths.length;i++){var c=a;c.path=this.paths[i];var d=b(c,this);this.polylines.push(d)}}window.google&&google.maps&&(MultiGeometry.prototype=new google.maps.MVCObject,MultiGeometry.prototype.changed=function(a){if(this.polylines)for(var b=0;b<this.polylines.length;b++)this.polylines[b].set(a,this.get(a))},MultiGeometry.prototype.setMap=function(a){this.set("map",a)},MultiGeometry.prototype.getMap=function(){return this.get("map")}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),geoXML3=window.geoXML3||{instances:[]},geoXML3.parser=function(a){function b(a,b,c){return c=c||function(a){x(a,b)},"function"==typeof ZipFile&&"object"==typeof JSIO&&"function"==typeof JSIO.guessFileType&&(/^data:[^,]*(kmz)/.test(b.baseUrl)?contentType=JSIO.FileType.Binary:/^data:[^,]*(kml|xml)/.test(b.baseUrl)?contentType=JSIO.FileType.XML:/^data:/.test(b.baseUrl)?contentType=JSIO.FileType.Unknown:contentType=JSIO.guessFileType(b.baseUrl),contentType==JSIO.FileType.Binary||contentType==JSIO.FileType.Unknown)?(b.isCompressed=!0,b.baseDir=b.baseUrl+"/",void geoXML3.fetchZIP(a,c,b.internals.parser)):(b.isCompressed=!1,b.baseDir=defileURL(b.baseUrl),void geoXML3.fetchXML(a,c))}function c(a){var b=t(w(a,"styleUrl")[0]);if(b&&b.indexOf("#")!=-1)var c=b.split("#");else var c=["",""];return c}function d(a,b,c,d){var f="{inline}"===b?e(r):m[b][c]=m[b][c]||e(r),g=w(a,"BalloonStyle");g&&g.length>0&&(f.balloon.bgColor=t(w(g[0],"bgColor")[0],f.balloon.bgColor),f.balloon.textColor=t(w(g[0],"textColor")[0],f.balloon.textColor),f.balloon.text=t(w(g[0],"text")[0],f.balloon.text),f.balloon.displayMode=t(w(g[0],"displayMode")[0],f.balloon.displayMode));var g=w(a,"IconStyle");if(g&&g.length>0){var h=f.icon;h.scale=parseFloat(t(w(g[0],"scale")[0],h.scale)),g=w(g[0],"hotSpot"),g&&g.length>0&&(h.hotSpot={x:g[0].getAttribute("x"),y:g[0].getAttribute("y"),xunits:g[0].getAttribute("xunits"),yunits:g[0].getAttribute("yunits")}),g=w(a,"Icon"),g&&g.length>0&&(h.href=t(w(g[0],"href")[0]),h.url=cleanURL(d,h.href),l[h.url]&&(h.url=l[h.url].dataUrl),h.dim={x:parseInt(t(v(g[0],s,"x")[0],h.dim.x)),y:parseInt(t(v(g[0],s,"y")[0],h.dim.y)),w:parseInt(t(v(g[0],s,"w")[0],h.dim.w)),h:parseInt(t(v(g[0],s,"h")[0],h.dim.h))},h.img=new Image,h.img.onload=function(){h.dim.w<0||h.dim.h<0?(h.dim.w=this.width,h.dim.h=this.height):h.dim.th=this.height},h.img.src=h.url,h.img.width>0&&(h.dim.w<0||h.dim.h<0?(h.dim.w=h.img.width,h.dim.h=h.img.height):h.dim.th=h.img.height))}return g=w(a,"LineStyle"),g&&g.length>0&&(f.line.color=t(w(g[0],"color")[0],f.line.color),f.line.colorMode=t(w(g[0],"colorMode")[0],f.line.colorMode),f.line.width=t(w(g[0],"width")[0],f.line.width)),g=w(a,"PolyStyle"),g&&g.length>0&&(f.poly.color=t(w(g[0],"color")[0],f.poly.color),f.poly.colorMode=t(w(g[0],"colorMode")[0],f.poly.colorMode),f.poly.outline=u(w(g[0],"outline")[0],f.poly.outline),f.poly.fill=u(w(g[0],"fill")[0],f.poly.fill)),f}function e(a){if(null==a||"object"!=typeof a)return a;if(a.cloneNode)return a.cloneNode(!0);var b=new a.constructor;for(var c in a)b[c]=e(a[c]);return b}function f(a,b,f,g){for(var h=w(a,"Pair"),j=new Object,k=0;k<h.length;k++){var l=t(w(h[k],"key")[0]),n=t(w(h[k],"Style")[0]),o=c(h[k]),p=o[0]?cleanURL(g,o[0]):b,q=o[1];n?j[l]=d(n,p,q):q&&m[p][q]&&(j[l]=e(m[p][q]))}j.normal?m[b][f]=e(j.normal):m[b][f]=e(r),j.highlight&&i.processStyles&&A(j.highlight),m[b][f].map=e(j)}function g(a,b){for(var c=w(a,b),d=[],e=0;e<c.length;e++){var f=w(c[e],"coordinates");if(!f){if(d.length>0)break;return[{coordinates:[]}]}for(var g=0;g<f.length;g++){var h=t(f[g]).trim();h=h.replace(/,\s+/g,",");for(var i=h.split(/\s+/g),j=i.length,k=[],l=0;l<j;l++)h=i[l].split(","),isNaN(h[0])||isNaN(h[1])||k.push({lat:parseFloat(h[1]),lng:parseFloat(h[0]),alt:parseFloat(h[2])});d.push({coordinates:k})}}return d}google.maps.MVCObject.call(this);var h,i=new geoXML3.parserOptions(a),j=[],k={},l={},m={};!i.infoWindow&&i.singleInfoWindow&&(i.infoWindow=new google.maps.InfoWindow);var n=function(a,b){var c={parser:this,docSet:b||[],remaining:1,parseOnly:!(i.afterParse||i.processStyles)};thisDoc=new Object,thisDoc.internals=c,c.docSet.push(thisDoc),x(geoXML3.xmlParse(a),thisDoc)},o=function(a,c){h||(h="geoXML3.instances["+(geoXML3.instances.push(this)-1)+"]"),"string"==typeof a&&(a=[a]);for(var d,e={parser:this,docSet:c||[],remaining:a.length,parseOnly:!(i.afterParse||i.processStyles)},f=0;f<a.length;f++){var g=cleanURL(defileURL(location.pathname),a[f]);k[g]?(d=k[g],d.reload=!0):(d=new Object,d.baseUrl=g,e.docSet.push(d)),d.url=a[f],d.internals=e,b(d.url,d)}},p=function(a){a||(a=j[0]);var b;if(a.markers)for(b=0;b<a.markers.length;b++)a.markers[b].infoWindow&&a.markers[b].infoWindow.close(),a.markers[b].setVisible(!1);if(a.ggroundoverlays)for(b=0;b<a.ggroundoverlays.length;b++)a.ggroundoverlays[b].setOpacity(0);if(a.gpolylines)for(b=0;b<a.gpolylines.length;b++)a.gpolylines[b].infoWindow&&a.gpolylines[b].infoWindow.close(),a.gpolylines[b].setMap(null);if(a.gpolygons)for(b=0;b<a.gpolygons.length;b++)a.gpolygons[b].infoWindow&&a.gpolygons[b].infoWindow.close(),a.gpolygons[b].setMap(null)},q=function(a){a||(a=j[0]);var b;if(a.markers)for(b=0;b<a.markers.length;b++)a.markers[b].setVisible(!0);if(a.ggroundoverlays)for(b=0;b<a.ggroundoverlays.length;b++)a.ggroundoverlays[b].setOpacity(a.ggroundoverlays[b].percentOpacity_);if(a.gpolylines)for(b=0;b<a.gpolylines.length;b++)a.gpolylines[b].setMap(i.map);if(a.gpolygons)for(b=0;b<a.gpolygons.length;b++)a.gpolygons[b].setMap(i.map)},r={balloon:{bgColor:"ffffffff",textColor:"ff000000",text:"<h3>$[name]</h3>\n<div>$[description]</div>\n<div>$[geDirections]</div>",displayMode:"default"},icon:{scale:1,dim:{x:0,y:0,w:-1,h:-1},hotSpot:{x:.5,y:.5,xunits:"fraction",yunits:"fraction"}},line:{color:"ffffffff",colorMode:"normal",width:1},poly:{color:"ffffffff",colorMode:"normal",fill:!0,outline:!0}},s="http://www.google.com/kml/ext/2.2",t=geoXML3.nodeValue,u=geoXML3.getBooleanValue,v=geoXML3.getElementsByTagNameNS,w=geoXML3.getElementsByTagName,x=function(a,n){if(!a||"failed parse"==a)return geoXML3.log("Unable to retrieve "+n.url),i.failedParse&&i.failedParse(n),void(n.failed=!0);if(a.parseError&&0!=a.parseError.errorCode){var o=a.parseError,p="Parse error in line "+o.line+", col "+o.linePos+" (error code: "+o.errorCode+")\n\nError Reason: "+o.reason+"Error Line: "+o.srcText;return geoXML3.log("Unable to retrieve "+n.url+": "+p),i.failedParse&&i.failedParse(n),void(n.failed=!0)}if(a.documentElement&&"parsererror"==a.documentElement.nodeName)return geoXML3.log("Unable to retrieve "+n.url+": "+a.documentElement.childNodes[0].nodeValue),i.failedParse&&i.failedParse(n),void(n.failed=!0);if(!n)throw"geoXML3 internal error: render called with null document";var q;n.placemarks=[],n.groundoverlays=[],n.ggroundoverlays=[],n.networkLinks=[],n.gpolygons=[],n.gpolylines=[];for(var y=w(a,"styleUrl"),z=n.internals.docSet,q=0;q<y.length;q++){var G=t(y[q]).split("#")[0];if(G){var H=cleanURL(n.baseDir,G);if(H!==n.baseUrl&&!k[H]){var I,J=z.indexOfObjWithItem("baseUrl",H);if(J!=-1){if(I=z[J],I.failed)continue}else I=new Object,I.url=H,I.baseUrl=H,I.internals=n.internals,n.internals.docSet.push(I),n.internals.remaining++;return void b(H,I,function(b){x(b,I),x(a,n)})}}}n.styles=m[n.baseUrl]=m[n.baseUrl]||{};var K;for(y=w(a,"Style"),nodeCount=y.length,q=0;q<nodeCount;q++){thisNode=y[q];var K=thisNode.getAttribute("id");K&&d(thisNode,n.baseUrl,K,n.baseDir)}for(y=w(a,"StyleMap"),q=0;q<y.length;q++){thisNode=y[q];var K=thisNode.getAttribute("id");K&&f(thisNode,n.baseUrl,K,n.baseDir)}if(!i.processStyles&&i.createMarker||B(n),n.reload&&n.markers)for(q=0;q<n.markers.length;q++)n.markers[q].active=!1;var L,M,N,O,P,Q,O,R,S,T=w(a,"Placemark");for(pm=0;pm<T.length;pm++){M=T[pm];var U=c(M);L={name:t(w(M,"name")[0]),description:t(w(M,"description")[0]),styleUrl:U.join("#"),styleBaseUrl:U[0]?cleanURL(n.baseDir,U[0]):n.baseUrl,styleID:U[1],visibility:u(w(M,"visibility")[0],!0),balloonVisibility:u(v(M,s,"balloonVisibility")[0],!i.suppressInfoWindows),id:M.getAttribute("id")},L.style=m[L.styleBaseUrl]&&m[L.styleBaseUrl][L.styleID]||e(r);var V=w(M,"Style");if(V&&V.length>0){var W=d(M,"{inline}","{inline}");A(W),W&&(L.style=W)}/^https?:\/\//.test(L.description)&&(L.description=['<a href="',L.description,'">',L.description,"</a>"].join("")),L.vars={display:{name:"Name",description:"Description",address:"Street Address",id:"ID",Snippet:"Snippet",geDirections:"Directions"},val:{name:L.name||"",description:L.description||"",address:t(w(M,"address")[0],""),id:M.getAttribute("id")||"",Snippet:t(w(M,"Snippet")[0],"")},directions:["f=d","source=GeoXML3"]};var X=w(M,"ExtendedData");if(X&&X.length>0)for(var Y=w(X[0],"Data"),Z=0;Z<Y.length;Z++){var $=Y[Z],_=$.getAttribute("name");if(_){var aa=t(w($,"displayName")[0],_),ba=t(w($,"value")[0]);L.vars.val[_]=ba,L.vars.display[_]=aa}}var ca=w(M,"coordinates"),da=null;if(ca&&ca.length>0)for(var ea=0;ea<ca.length;ea++)if(ca[ea].parentNode&&ca[ea].parentNode.nodeName){var fa=ca[ea].parentNode;switch(da=fa.nodeName){case"Point":L.Point=g(M,"Point")[0],L.latlng=new google.maps.LatLng(L.Point.coordinates[0].lat,L.Point.coordinates[0].lng),Q=1;break;case"LinearRing":R=w(M,"Polygon"),L.Polygon||(L.Polygon=[{outerBoundaryIs:{coordinates:[]},innerBoundaryIs:[{coordinates:[]}]}]);for(var ga=0;ga<R.length;ga++)L.Polygon[ga]={outerBoundaryIs:{coordinates:[]},innerBoundaryIs:[{coordinates:[]}]},L.Polygon[ga].outerBoundaryIs=g(R[ga],"outerBoundaryIs"),L.Polygon[ga].innerBoundaryIs=g(R[ga],"innerBoundaryIs");S=L.Polygon[0].outerBoundaryIs;break;case"LineString":Q=0,L.LineString=g(M,"LineString")}}var ha=(v(M,s,"MultiTrack"),v(M,s,"Track")),ia=[];if(ha.length>0){for(var q=0;q<ha.length;q++){for(var ja=v(ha[q],s,"coord"),S=[],J=0;J<ja.length;J++){var N=geoXML3.nodeValue(ja[J]).trim();N=N.split(/\s+/g),isNaN(N[0])||isNaN(N[1])||S.push({lat:parseFloat(N[1]),lng:parseFloat(N[0]),alt:parseFloat(N[2])})}ia.push({coordinates:S})}L.Track=ia}if(i.pmParseFn&&i.pmParseFn(M,L),n.placemarks.push(L),L.Point){google.maps&&(n.bounds=n.bounds||new google.maps.LatLngBounds,n.bounds.extend(L.latlng));var ka=i.createMarker||C,la=!1;if(!i.createMarker&&n&&(n.markers=n.markers||[],n.reload))for(var J=0;J<n.markers.length;J++)if(n.markers[J].id==L.id||!n.markers[J].id&&n.markers[J].getPosition().equals(L.latlng)){la=n.markers[J].active=!0;break}if(!la){var O=ka(L,n);O&&(O.active=L.visibility,O.id=L.id)}}var P,ma;n&&(L.Polygon&&(n.gpolygons=n.gpolygons||[]),L.LineString&&(n.gpolylines=n.gpolylines||[]),L.Track&&(n.gpolylines=n.gpolylines||[]));var na=i.createPolygon||F,oa=i.createLineString||E;L.Polygon&&(P=na(L,n),P&&(P.active=L.visibility)),L.LineString&&(ma=oa(L,n),ma&&(ma.active=L.visibility)),L.Track&&(ma=oa(L,n),ma&&(ma.active=L.visibility)),google.maps&&(n.bounds=n.bounds||new google.maps.LatLngBounds,P&&n.bounds.union(P.bounds),ma&&n.bounds.union(ma.bounds))}if(n.reload&&n.markers)for(q=n.markers.length-1;q>=0;q--)n.markers[q].active||(n.markers[q].infoWindow&&n.markers[q].infoWindow.close(),n.markers[q].setMap(null),n.markers.splice(q,1));if(n.reload&&n.groundoverlays)for(q=0;q<n.groundoverlays.length;q++)n.groundoverlays[q].active=!1;n&&(n.groundoverlays=n.groundoverlays||[]);var pa,qa,ra=w(a,"GroundOverlay");for(q=0;q<ra.length;q++){M=ra[q];var sa=cleanURL(n.baseDir,t(w(M,"href")[0]));l[sa]&&(sa=l[sa].dataUrl),pa={name:t(w(M,"name")[0]),description:t(w(M,"description")[0]),icon:{href:sa},latLonBox:{north:parseFloat(t(w(M,"north")[0])),east:parseFloat(t(w(M,"east")[0])),south:parseFloat(t(w(M,"south")[0])),west:parseFloat(t(w(M,"west")[0]))}},google.maps&&(n.bounds=n.bounds||new google.maps.LatLngBounds,n.bounds.union(new google.maps.LatLngBounds(new google.maps.LatLng(pa.latLonBox.south,pa.latLonBox.west),new google.maps.LatLng(pa.latLonBox.north,pa.latLonBox.east))));var ta=w(M,"color");if(ta&&ta.length>0?pa.opacity=geoXML3.getOpacity(t(ta[0])):pa.opacity=1,n.groundoverlays.push(pa),i.createOverlay)i.createOverlay(pa,n);else{var la=!1;if(n&&(n.groundoverlays=n.groundoverlays||[],n.reload)){overlayBounds=new google.maps.LatLngBounds(new google.maps.LatLng(pa.latLonBox.south,pa.latLonBox.west),new google.maps.LatLng(pa.latLonBox.north,pa.latLonBox.east));var ua=n.groundoverlays;for(q=ua.length;q--;)if(ua[q].bounds().equals(overlayBounds)&&ua.url_===pa.icon.href){la=ua[q].active=!0;break}}la||(qa=D(pa,n),qa.active=!0)}if(n.reload&&n.groundoverlays&&n.groundoverlays.length){var ua=n.groundoverlays;for(q=ua.length;q--;)ua[q].active||(ua[q].remove(),ua.splice(q,1));n.groundoverlays=ua}}var va,wa=document.location.pathname.split("/");wa=wa.splice(0,wa.length-1).join("/");var xa=w(a,"NetworkLink");for(q=0;q<xa.length;q++)M=xa[q],va={name:t(w(M,"name")[0]),link:{href:t(w(M,"href")[0]),refreshMode:t(w(M,"refreshMode")[0])}},va.link.refreshMode||(va.link.refreshMode="onChange"),"onInterval"===va.link.refreshMode?(va.link.refreshInterval=parseFloat(t(w(M,"refreshInterval")[0])),isNaN(va.link.refreshInterval)&&(va.link.refreshInterval=0)):"onChange"===va.link.refreshMode&&(va.link.viewRefreshMode=t(w(M,"viewRefreshMode")[0]),va.link.viewRefreshMode||(va.link.viewRefreshMode="never"),"onStop"===va.link.viewRefreshMode&&(va.link.viewRefreshTime=t(w(M,"refreshMode")[0]),va.link.viewFormat=t(w(M,"refreshMode")[0]),va.link.viewFormat||(va.link.viewFormat="BBOX=[bboxWest],[bboxSouth],[bboxEast],[bboxNorth]"))),/^[\/|http]/.test(va.link.href)||(va.link.href=wa+"/"+va.link.href),"onInterval"===va.link.refreshMode&&va.link.refreshInterval>0?setInterval(h+'.parse("'+va.link.href+'")',1e3*va.link.refreshInterval):"onChange"===va.link.refreshMode&&("never"===va.link.viewRefreshMode?n.internals.parser.parse(va.link.href,n.internals.docSet):"onStop"===va.link.viewRefreshMode);if(n.bounds&&(n.internals.bounds=n.internals.bounds||new google.maps.LatLngBounds,n.internals.bounds.union(n.bounds)),(n.markers||n.groundoverlays||n.gpolylines||n.gpolygons)&&(n.internals.parseOnly=!1),!n.internals.parseOnly&&n.baseUrl)if(k[n.baseUrl])for(var q in k[n.baseUrl])k[n.baseUrl][q]=n[q];else j.push(n),k[n.baseUrl]=n;n.internals.remaining--,0===n.internals.remaining&&(i.zoom&&n.internals.bounds&&!n.internals.bounds.isEmpty()&&i.map&&i.map.fitBounds(n.internals.bounds),i.afterParse&&i.afterParse(n.internals.docSet),google.maps.event.trigger(n.internals.parser,"parsed"))},y=function(a,b){var c={};a=a||"ffffffff";var d=a.substr(0,2),e=a.substr(2,2),f=a.substr(4,2),g=a.substr(6,2);return c.opacity=parseInt(d,16)/256,c.color="random"===b?z(g,f,e):"#"+g+f+e,c},z=function(a,b,c){var d={rr:a,gg:b,bb:c};for(var e in d){var f=d[e];null==f&&(f="ff"),f=Math.round(Math.random()*parseInt(a,16)).toString(16),1===f.length&&(f="0"+f),d[e]=f}return"#"+d.rr+d.gg+d.bb},A=function(a){var b=a.icon;if(b&&b.href){if(b.img&&!b.img.complete&&b.dim.w<0&&b.dim.h<0)return b.markerBacklog=[],void(b.img.onload=function(){b.dim.w<0||b.dim.h<0?(b.dim.w=this.width,b.dim.h=this.height):b.dim.th=this.height,A(a);for(var c=0;c<b.markerBacklog.length;c++){var d=b.markerBacklog[c][0],e=b.markerBacklog[c][1];C(d,e),d.marker&&(d.marker.active=!0)}delete b.markerBacklog});b.img&&b.img.complete?b.dim.w<0||b.dim.h<0?(b.dim.w=b.img.width,b.dim.h=b.img.height):b.dim.th=b.img.height:(b.dim.whGuess=!0,b.dim.w=32,b.dim.h=32,b.dim.th=32);var c=Math.round,d=b.dim.y;"undefined"!=typeof b.dim.th&&b.dim.th!=b.dim.h&&(d=Math.abs(d-(b.dim.th-b.dim.h)));var e,f,g={x:b.dim.x*b.scale,y:d*b.scale,w:b.dim.w*b.scale,h:b.dim.h*b.scale,aX:b.hotSpot.x*b.scale,aY:b.hotSpot.y*b.scale,iW:(b.img?b.img.width:b.dim.w)*b.scale,iH:(b.img?b.img.height:b.dim.h)*b.scale};switch(b.hotSpot.xunits){case"fraction":e=c(g.aX*b.dim.w);break;case"insetPixels":e=c(b.dim.w*b.scale-g.aX);break;default:e=c(g.aX)}f=g.h-c(("fraction"===b.hotSpot.yunits?b.dim.h:1)*g.aY);var h=new google.maps.Point(e,f),i=b.dim.whGuess?null:new google.maps.Size(c(g.w),c(g.h)),j=1==b.scale?null:b.dim.whGuess?new google.maps.Size(c(g.w),c(g.h)):new google.maps.Size(c(g.iW),c(g.iH)),k=new google.maps.Point(c(g.x),c(g.y));l[b.url]&&(b.url=l[b.url].dataUrl),b.marker={url:b.url,size:i,origin:k,anchor:h,scaledSize:j};var m=/\/(red|blue|green|yellow|lightblue|purple|pink|orange)(-dot)?\.png/,n=new google.maps.Size(59,32),o=new google.maps.Point(16,32);m.test(b.href)?b.shadow={url:"http://maps.google.com/mapfiles/ms/micons/msmarker.shadow.png",size:n,origin:null,anchor:o,scaledSize:n}:b.href.indexOf("-pushpin.png")>-1&&(b.shadow={url:"http://maps.google.com/mapfiles/ms/micons/pushpin_shadow.png",size:n,origin:null,anchor:o,scaledSize:n})}},B=function(a){for(var b in a.styles)A(a.styles[b])},C=function(a,b){var c=a.style.icon;if(!c.marker&&c.img)return c.markerBacklog=c.markerBacklog||[],void c.markerBacklog.push([a,b]);var d=geoXML3.combineOptions(i.markerOptions,{map:i.map,position:new google.maps.LatLng(a.Point.coordinates[0].lat,a.Point.coordinates[0].lng),title:a.name,zIndex:Math.round(a.Point.coordinates[0].lat*-1e5)<<5,icon:c.marker,shadow:c.shadow,flat:!c.shadow,visible:a.visibility}),e=new google.maps.Marker(d);return b&&b.markers.push(e),G(a,b,e),a.marker=e,e},D=function(a,b){if(!window.ProjectedOverlay)throw"geoXML3 error: ProjectedOverlay not found while rendering GroundOverlay from KML";var c=new google.maps.LatLngBounds(new google.maps.LatLng(a.latLonBox.south,a.latLonBox.west),new google.maps.LatLng(a.latLonBox.north,a.latLonBox.east)),d=geoXML3.combineOptions(i.overlayOptions,{percentOpacity:100*a.opacity}),e=new ProjectedOverlay(i.map,a.icon.href,c,d);return b&&(b.ggroundoverlays=b.ggroundoverlays||[],b.ggroundoverlays.push(e)),e},E=function(a,b){var c=[],d=new google.maps.LatLngBounds;if(a.LineString)for(var e=0;e<a.LineString.length;e++){for(var f=[],g=a.LineString[e].coordinates,h=0;h<g.length;h++){var j=new google.maps.LatLng(g[h].lat,g[h].lng);f.push(j),d.extend(j)}c.push(f)}else if(a.Track)for(var e=0;e<a.Track.length;e++){for(var f=[],g=a.Track[e].coordinates,h=0;h<g.length;h++){var j=new google.maps.LatLng(g[h].lat,g[h].lng);f.push(j),d.extend(j)}c.push(f)}var k=(c[0][Math.floor(f.length/2)],y(a.style.line.color,a.style.line.colorMode)),l=geoXML3.combineOptions(i.polylineOptions,{map:i.map,path:f,strokeColor:k.color,strokeWeight:a.style.line.width,strokeOpacity:k.opacity,title:a.name,visible:a.visibility});if(c.length>1){l.paths=c;var m=new MultiGeometry(l)}else{l.path=c[0];var m=new google.maps.Polyline(l)}return m.bounds=d,G(a,b,m),b&&b.gpolylines.push(m),a.polyline=m,m},F=function(a,b){for(var c=new google.maps.LatLngBounds,d=0,e=[],f=0;f<a.Polygon.length;f++){for(var g=0;g<a.Polygon[f].outerBoundaryIs.length;g++){for(var h=a.Polygon[f].outerBoundaryIs[g].coordinates,j=[],k=0;k<h.length;k++){var l=new google.maps.LatLng(h[k].lat,h[k].lng);j.push(l),c.extend(l)}e.push(j),d+=j.length}for(var g=0;g<a.Polygon[f].innerBoundaryIs.length;g++){for(var h=a.Polygon[f].innerBoundaryIs[g].coordinates,j=[],k=0;k<h.length;k++){var l=new google.maps.LatLng(h[k].lat,h[k].lng);j.push(l),c.extend(l)}e.push(j),d+=j.length}}var m=y(a.style.line.color,a.style.line.colorMode),n=y(a.style.poly.color,a.style.poly.colorMode);a.style.poly.fill||(n.opacity=0);var o=a.style.line.width;a.style.poly.outline||(o=0,m.opacity=0);var p=geoXML3.combineOptions(i.polygonOptions,{map:i.map,paths:e,title:a.name,strokeColor:m.color,strokeWeight:o,strokeOpacity:m.opacity,fillColor:n.color,fillOpacity:n.opacity,visible:a.visibility}),q=new google.maps.Polygon(p);return q.bounds=c,G(a,b,q),b&&b.gpolygons.push(q),a.polygon=q,q},G=function(a,b,c){var d=a.style.balloon,e=a.vars;if(a.balloonVisibility&&"hide"!==d.displayMode){if(!a.latlng||i.suppressDirections&&i.suppressDirections)e.val.geDirections="";else{e.directions.push("sll="+a.latlng.toUrlValue());var f="http://maps.google.com/maps?"+e.directions.join("&"),g=encodeURIComponent(e.val.address||a.latlng.toUrlValue()).replace(/\%20/g,"+");e.val.geDirections='<a href="'+f+"&daddr="+g+'" target=_blank>To Here</a> - <a href="'+f+"&saddr="+g+'" target=_blank>From Here</a>'}var h=d.text.replace(/\$\[(\w+(\/displayName)?)\]/g,function(a,b,c){return c?e.display[b]:e.val[b]}),j="geoxml3_infowindow geoxml3_style_"+a.styleID,k=[];"ffffffff"!=d.bgColor&&k.push("background: "+y(d.bgColor).color+";"),"ff000000"!=d.textColor&&k.push("color: "+y(d.textColor).color+";");var m=k.length?' style="'+k.join(" ")+'"':"",n=geoXML3.combineOptions(i.infoWindowOptions,{content:'<div class="'+j+'"'+m+">"+h+"</div>",pixelOffset:new google.maps.Size(0,2)});c.infoWindow=i.infoWindow||new google.maps.InfoWindow(n),c.infoWindowOptions=n,google.maps.event.addListener(c,"click",function(a){var c=this.infoWindow;c.close(),c.setOptions(this.infoWindowOptions),a&&a.latLng?c.setPosition(a.latLng):this.bounds&&c.setPosition(this.bounds.getCenter()),c.setContent("<div id='geoxml3_infowindow'>"+c.getContent()+"</div>"),google.maps.event.addListenerOnce(c,"domready",function(){for(var a=document.getElementById("geoxml3_infowindow"),c=a.getElementsByTagName("img"),d=0;d<c.length;d++){var e=c[d].getAttribute("src"),f=cleanURL(b.baseDir,e);l[f]?c[d].src=l[f].dataUrl:l[e]&&(c[d].src=l[e].dataUrl)}}),c.open(this.map,this.bounds?null:this)})}};return{options:i,docs:j,docsByUrl:k,kmzMetaData:l,parse:o,render:x,parseKmlString:n,hideDocument:p,showDocument:q,processStyles:B,createMarker:C,createOverlay:D,createPolyline:E,createPolygon:F}},geoXML3.getOpacity=function(a){if(a&&""!==a&&8==a.length){var b=parseInt(a.substr(0,2),16);return b/255}return 1},geoXML3.log=function(a){window.console?console.log(a):alert("log:"+a)},geoXML3.parserOptions=function(a){if(this.map=null,this.zoom=!0,this.singleInfoWindow=!1,this.suppressInfoWindows=!1,this.processStyles=!1,this.markerOptions={},this.infoWindowOptions={},this.overlayOptions={},this.afterParse=null,this.failedParse=null,this.createMarker=null,this.createOverlay=null,a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);return this},geoXML3.combineOptions=function(a,b){var c={};if(a)for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);if(b)for(d in b)b.hasOwnProperty(d)&&void 0===c[d]&&(c[d]=b[d]);return c},geoXML3.parserOptions.prototype.combineOptions=geoXML3.combineOptions,geoXML3.fetchers=[],geoXML3.xmlParse=function(a){if("undefined"!=typeof ActiveXObject||"ActiveXObject"in window){var b=new ActiveXObject("Microsoft.XMLDOM");return b.loadXML(a),b}return"undefined"!=typeof DOMParser?(new DOMParser).parseFromString(a,"text/xml"):document.createElement("div",null)},geoXML3.isParseError=function(a){if("undefined"!=typeof ActiveXObject||"ActiveXObject"in window)return!1;var b=new DOMParser,c=b.parseFromString("<","text/xml"),d=c.getElementsByTagName("parsererror")[0].namespaceURI;return"http://www.w3.org/1999/xhtml"===d?a.getElementsByTagName("parsererror").length>0:a.getElementsByTagNameNS(d,"parsererror").length>0},geoXML3.fetchXML=function(a,b){function c(){b()}var d=new Object;if(geoXML3.fetchers.length)d=geoXML3.fetchers.pop();else if(window.XMLHttpRequest)d.fetcher=new window.XMLHttpRequest;else if(window.ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP","MSXML.XMLHTTP"],f=0;f<e.length;f++)try{d.fetcher=new ActiveXObject(e[f]);break}catch(a){continue}if(!d.fetcher)return geoXML3.log("Unable to create XHR object"),b(null),null}return d.fetcher.open("GET",a,!0),d.fetcher.overrideMimeType&&d.fetcher.overrideMimeType("text/xml"),d.fetcher.onreadystatechange=function(){if(4===d.fetcher.readyState){if(d.xhrtimeout&&clearTimeout(d.xhrtimeout),d.fetcher.status>=400)geoXML3.log("HTTP error "+d.fetcher.status+" retrieving "+a),b();else{if(d.fetcher.responseXML){var c=d.fetcher.responseXML;!c||c.documentElement||c.ownerElement||c.loadXML(d.fetcher.responseText)}else c=geoXML3.xmlParse(d.fetcher.responseText);c.parseError&&0!=c.parseError.errorCode?(geoXML3.log("XML parse error "+c.parseError.errorCode+", "+c.parseError.reason+"\nLine:"+c.parseError.line+", Position:"+c.parseError.linepos+", srcText:"+c.parseError.srcText),c="failed parse"):geoXML3.isParseError(c)&&(geoXML3.log("XML parse error"),c="failed parse"),b(c)}geoXML3.fetchers.push(d)}},d.xhrtimeout=setTimeout(c,6e4),d.fetcher.send(null),null};var IEversion=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a};geoXML3.fetchZIP=function(a,b,c){new ZipFile(a,function(d){for(var e=0;e<d.status.length;e++){var f=d.status[e];if(0==f.indexOf("ERROR"))return geoXML3.log("HTTP/ZIP error retrieving "+a+": "+f),void b();if(0==f.indexOf("EXCEPTION"))return geoXML3.log("HTTP/ZIP exception retrieving "+a+": "+f),void b();0==f.indexOf("WARNING")?geoXML3.log("HTTP/ZIP warning retrieving "+a+": "+f):0==f.indexOf("INFO")&&geoXML3.log("HTTP/ZIP info retrieving "+a+": "+f)}for(var g,h=0,e=0;e<d.entries.length;e++){var i=d.entries[e].name;/\.kml$/.test(i)&&(h++,1==h?g=e:geoXML3.log("KMZ warning retrieving "+a+': found extra KML "'+i+'" in KMZ; discarding...'))}for(var j=cleanURL(defileURL(a),a)+"/",k={timer:null,extractLeft:0,timerCalls:0},l=function(a,d){var e=cleanURL(j,a.name),f=a.name.substring(a.name.lastIndexOf(".")+1).toLowerCase();if(k.extractLeft--,"string"==typeof d.description&&"Error"==d.name)return geoXML3.log("KMZ error extracting "+e+": "+d.description),void b();var g;"jpg"===f&&(f="jpeg"),g=/^(gif|jpeg|png)$/.test(f)?"image/"+f:"mp3"===f?"audio/mpeg":"m4a"===f?"audio/mp4":"m4a"===f?"audio/MP4-LATM":"application/octet-stream",c.kmzMetaData[e]={},c.kmzMetaData[e].entry=a,c.kmzMetaData[e].dataUrl="data:"+g+";base64,"+base64Encode(d),/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&(IEversion()<8&&c.kmzMetaData[e].dataUrl.length>2071||IEversion<9&&c.kmzMetaData[e].dataUrl.length>32767)&&(c.kmzMetaData[e].dataUrl="data:image/gif;base64,R0lGODlhDwAQAOMPADBPvSpQ1Dpoyz1p6FhwvU2A6ECP63CM04CWxYCk+V6x+UK++Jao3rvC3fj7+v///yH5BAEKAA8ALAAAAAAPABAAAASC8Mk5mwCAUMlWwcLRHEelLAoGDMgzSsiyGCAhCETDPMh5XQCBwYBrNBIKWmg0MCQHj8MJU5IoroYCY6AAAgrDIbbQDGIK6DR5UPhlNo0JAlSUNAiDgH7eNAxEDWAKCQM2AAFheVxYAA0AIkFOJ1gBcQQaUQKKA5w7LpcEBwkJaKMUEQA7"),c.kmzMetaData[internalSrc(a.name)]=c.kmzMetaData[e]},m=function(c,d){return"string"==typeof d.description&&"Error"==d.name?(geoXML3.log("KMZ error extracting "+c.name+": "+d.description),void b()):(clearTimeout(k.timer),k.extractLeft<=1?(k.extractLeft--,void b(geoXML3.xmlParse(d))):(k.timerCalls++,void(k.timerCalls<100?k.timer=setTimeout(function(){m(c,d)},100):(geoXML3.log("KMZ warning extracting "+a+": entire ZIP has not been extracted after 10 seconds; running through KML, anyway..."),k.extractLeft--,b(geoXML3.xmlParse(d))))))},e=0;e<d.entries.length;e++){var n=d.entries[e],o=n.name.substring(n.name.lastIndexOf(".")+1).toLowerCase();/^(gif|jpe?g|png|kml)$/.test(o)&&("kml"===o&&e!=g||(c||"kml"==o)&&(k.extractLeft++,"kml"===o?n.extract(m):n.extract(l)))}},3)},geoXML3.nodeValue=function(a,b){var c="";if(!a)return"undefined"==typeof b||null===b?null:b;if(3==a.nodeType||4==a.nodeType||2==a.nodeType)c+=a.nodeValue;else if(1==a.nodeType||9==a.nodeType||11==a.nodeType)for(var d=0;d<a.childNodes.length;++d)c+=arguments.callee(a.childNodes[d]);return c},geoXML3.getBooleanValue=function(a,b){var c=geoXML3.nodeValue(a);return null===c?b||!1:(c=parseInt(c),!!isNaN(c)||0!=c)},geoXML3.getElementsByTagNameNS=function(a,b,c){if(a&&"undefined"!=typeof a.getElementsByTagNameNS)return a.getElementsByTagNameNS(b,c);if(!a)return[];var d=a.documentElement||a.ownerDocument&&a.ownerDocument.documentElement;if(!d||!d.attributes)return[];for(var e=0;e<d.attributes.length;e++){var f=d.attributes[e];if("xmlns"===f.prefix&&f.nodeValue===b)return a.getElementsByTagName(f.baseName+":"+c);if("xmlns"===f.nodeName&&f.nodeValue===b)return"undefined"!=typeof a.selectNodes?(d.ownerDocument.getProperty("SelectionNamespaces")||d.ownerDocument.setProperty("SelectionNamespaces","xmlns:defaultNS='"+b+"'"),a.selectNodes(".//defaultNS:"+c)):(d.setAttribute("xmlns:defaultNS",b),a.getElementsByTagName("defaultNS:"+c))}return geoXML3.getElementsByTagName(a,c)},geoXML3.getElementsByTagName=function(a,b){return a&&"undefined"!=typeof a.getElementsByTagNameNS?a.getElementsByTagName(b):a.getElementsByTagName(b)};var toAbsURL=function(a,b){var c,d,e,f=location.protocol+"://"+location.host;if(!b.length)return"";if(/^\w+:/.test(b))return b;if(0==b.indexOf("/"))return f+b;if(c=a.replace(/\/[^\/]*$/,""),d=b.match(/\.\.\//g))for(b=b.substring(3*d.length),e=d.length;e--;)c=c.substring(0,c.lastIndexOf("/"));return f+c+"/"+b},internalSrc=function(a){var b=document.location.href;b=b.substring(0,b.lastIndexOf("/")+1);var c=b+a;return c},dehostURL=function(a){var b=location.protocol+"://"+location.host;return b=b.replace(/([\.\\\+\*\?\[\^\]\$\(\)])/g,"\\$1"),a.replace(new RegExp("^"+b,"i"),"")},cleanURL=function(a,b){return dehostURL(toAbsURL(a?a.split("#")[0].split("?")[0]:defileURL(location.pathname),b?b.split("#")[0].split("?")[0]:""))},defileURL=function(a){return a?a.substr(0,a.lastIndexOf("/")+1):"/"};Array.prototype.hasObject=Array.indexOf?function(a){return this.indexOf(a)!==-1}:function(a){for(var b=this.length+1;b--;)if(this[b-1]===a)return!0;return!1},Array.prototype.hasItemInObj=function(a,b){for(var c=this.length+1;c--;)if(this[c-1][a]===b)return!0;return!1},Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){null==b?b=0:b<0&&(b=Math.max(0,this.length+b));for(var c=b,d=this.length;c<d;c++)if(this[c]===a)return c;return-1}),Array.prototype.indexOfObjWithItem=function(a,b,c){null==c?c=0:c<0&&(c=Math.max(0,this.length+c));for(var d=c,e=this.length;d<e;d++)if(this[d][a]===b)return d;return-1};var base64Encode=function(a){for(var b,c,d,e,f,g,h,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j="",k=0;k<a.length;)b=a[k++],c=a[k++],d=a[k++],e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,void 0==c?g=h=64:void 0==d&&(h=64),j=j+i.charAt(e)+i.charAt(f)+i.charAt(g)+i.charAt(h);return j};
//# sourceMappingURL=maps/geoxml3_gxParse_kmz.min.map