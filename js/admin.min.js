var _7zHandler,bootstrapUploader,csvHandler,excelHandler,imageHandler,loadCreateNewProject,loadEditor,loadProjectBrowser,populateAdminActions,startAdminActionHelper,verifyLoginCredentials,zipHandler;window.adminParams={},adminParams.domain="amphibiandisease",adminParams.apiTarget="admin_api.php",adminParams.adminPageUrl="http://"+adminParams.domain+".org/admin-page.html",adminParams.loginDir="admin/",adminParams.loginApiTarget=adminParams.loginDir+"async_login_handler.php",window.loadAdminUi=function(){var a;try{verifyLoginCredentials(function(a){var b;return b="<h3>\n  Welcome, "+$.cookie(adminParams.domain+"_name")+'\n  <span id="pib-wrapper-settings" class="pib-wrapper" data-toggle="tooltip" title="User Settings" data-placement="bottom">\n    <paper-icon-button icon=\'icons:settings-applications\' class=\'click\' data-href=\''+a.login_url+"'></paper-icon-button>\n  </span>\n\n</h3>\n<section id='admin-actions-block' class=\"row center-block text-center\">\n  <div class='bs-callout bs-callout-info'>\n    <p>Please be patient while the administrative interface loads.</p>\n  </div>\n</section>",$("main #main-body").before(b),populateAdminActions(),bindClicks(),!1})}catch(b){a=b,$("main #main-body").html("<div class='bs-callout bs-callout-danger'><h4>Application Error</h4><p>There was an error in the application. Please refresh and try again. If this persists, please contact administration.</p></div>")}return!1},populateAdminActions=function(){var a;return a='<paper-button id="new-project" class="admin-action col-md-3 col-sm-4 col-xs-12" raised>\n  <iron-icon icon="icons:add"></iron-icon>\n    Create New Project\n</paper-button>\n<paper-button id="edit-project" class="admin-action col-md-3 col-sm-4 col-xs-12" raised>\n  <iron-icon icon="icons:create"></iron-icon>\n    Edit Existing Project\n</paper-button>\n<paper-button id="view-project" class="admin-action col-md-3 col-sm-4 col-xs-12" raised>\n  <iron-icon icon="icons:visibility"></iron-icon>\n    View All Projects\n</paper-button>',$("#admin-actions-block").html(a),$("#show-actions").remove(),$("main #main-body").empty(),$("#new-project").click(function(){return loadCreateNewProject()}),$("#edit-project").click(function(){return loadEditor()}),$("#view-project").click(function(){return loadProjectBrowser()})},verifyLoginCredentials=function(a){var b,c,d,e;return c=$.cookie(adminParams.domain+"_auth"),e=$.cookie(adminParams.domain+"_secret"),d=$.cookie(adminParams.domain+"_link"),b="hash="+c+"&secret="+e+"&dblink="+d,$.post(adminParams.loginApiTarget,b,"json").done(function(b){return b.status===!0?a(b):goTo(b.login_url)}).fail(function(a,b){return $("main #main-body").html("<div class='bs-callout-danger bs-callout'><h4>Couldn't verify login</h4><p>There's currently a server problem. Try back again soon.</p></div>"),console.log(a,b),!1}),!1},startAdminActionHelper=function(){var a;return $("#admin-actions-block").empty(),a='<span id="pib-wrapper-dashboard" class="pib-wrapper" data-toggle="tooltip" title="Administration Home" data-placement="bottom">\n  <paper-icon-button icon="icons:dashboard" class="admin-action" id="show-actions">\n  </paper-icon-button>\n</span>',$("#pib-wrapper-settings").after(a),$("#show-actions").click(function(){return $(this).tooltip("hide"),populateAdminActions()})},loadEditor=function(){return startAdminActionHelper(),adData.cartoRef="38544c04-5e56-11e5-8515-0e4fddd5de28",geo.init(),foo(),!1},loadCreateNewProject=function(){return startAdminActionHelper(),bootstrapUploader(),foo(),!1},loadProjectBrowser=function(){var a;return startAdminActionHelper(),a="<div class='bs-callout bs-callout-warn'>\n  <p>I worked, I just have nothing to show yet.</p>\n</div>",adData.cartoRef="38544c04-5e56-11e5-8515-0e4fddd5de28",geo.init(),foo(),!1},bootstrapUploader=function(a){var b,c;return null==a&&(a="file-uploader"),c="#"+a,$(c).exists()||(b='<form id="'+a+'-form" class="col-md-4 clearfix">\n  <p class="visible-xs-block">Tap the button to upload a file</p>\n  <fieldset class="hidden-xs">\n    <legend>Upload Files</legend>\n    <div id="'+a+'" class="media-uploader outline media-upload-target">\n    </div>\n  </fieldset>\n</form>',$("main #main-body").append(b),$(c).submit(function(a){return a.preventDefault(),a.stopPropagation(),!1})),loadJS("helpers/js-dragdrop/client-upload.min.js",function(){return console.info("Loaded drag drop helper"),window.dropperParams.postUploadHandler=function(a,b){var c,d,e,f,g,h;if(window.dropperParams.dropzone.removeAllFiles(),"object"!=typeof b)return console.error("Dropzone returned an error - "+b),toastStatusMessage("There was a problem with the server handling your image. Please try again."),!1;if(b.status!==!0)return null==b.human_error&&(b.human_error="There was a problem uploading your image."),toastStatusMessage(""+b.human_error),console.error("Error uploading!",b),!1;try{switch(console.info("Server returned the following result:",b),console.info("The script returned the following file information:",a),g="helpers/js-dragdrop/uploaded/",b.full_path=b.wrote_file,b.thumb_path=b.wrote_thumb,f=b.mime_provided.split("/")[0],e=b.mime_provided.split("/")[1],d=a.size<5242880||"image"!==f?""+g+b.full_path:""+g+b.thumb_path,h=function(){switch(f){case"image":return'<div class="uploaded-media center-block">\n  <img src="'+d+'" alt=\'Uploaded Image\' class="img-circle thumb-img img-responsive"/>\n    <p class="text-muted">\n      '+a.name+" -> "+b.full_path+'\n  (<a href="'+d+'" class="newwindow" download="'+a.name+'">\n    Original Image\n  </a>)\n    </p>\n</div>';case"audio":return'<div class="uploaded-media center-block">\n  <audio src="'+d+'" controls preload="auto">\n    <span class="glyphicon glyphicon-music"></span>\n    <p>\n      Your browser doesn\'t support the HTML5 <code>audio</code> element.\n      Please download the file below.\n    </p>\n  </audio>\n  <p class="text-muted">\n    '+a.name+" -> "+b.full_path+'\n    (<a href="'+d+'" class="newwindow" download="'+a.name+'">\n      Original Media\n    </a>)\n  </p>\n</div>';case"video":return'<div class="uploaded-media center-block">\n  <video src="'+d+'" controls preload="auto">\n    <img src="'+g+b.thumb_path+'" alt="Video Thumbnail" class="img-responsive" />\n    <p>\n      Your browser doesn\'t support the HTML5 <code>video</code> element.\n      Please download the file below.\n    </p>\n  </video>\n  <p class="text-muted">\n    '+a.name+" -> "+b.full_path+'\n    (<a href="'+d+'" class="newwindow" download="'+a.name+'">\n      Original Media\n    </a>)\n  </p>\n</div>';default:return'<div class="uploaded-media center-block">\n  <span class="glyphicon glyphicon-file"></span>\n  <p class="text-muted">'+a.name+" -> "+b.full_path+"</p>\n</div>"}}(),$(window.dropperParams.dropTargetSelector).before(h),f){case"application":switch(console.info("Checking "+e+" in application"),e){case"vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"vnd.ms-excel":return excelHandler(d);case"zip":case"x-zip-compressed":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===a.type||"xlsx"===d.split(".").pop()?excelHandler(d):zipHandler(d);case"x-7z-compressed":return _7zHandler(d)}break;case"text":return csvHandler();case"image":return imageHandler()}}catch(i){return c=i,toastStatusMessage("Your file uploaded successfully, but there was a problem in the post-processing.")}},!1})},excelHandler=function(a,b){var c,d,e,f;return null==b&&(b=!0),f="helpers/",e=f+"excelHelper.php",d=a,a.search(-1!==f)&&(d=a.slice(f.length)),console.info("Pinging for "+d),c="action=parse&path="+d,$.get(e,c,"json").done(function(a){var b,c,d,e;return toastStatusMessage("Would load the excel helper and get parseable data out here"),console.info("Got result",a),e=Object.size(a.data),c="",e>0&&(d=randomInt(1,e),c="\n\nHere's a random row: "+JSON.stringify(a.data[d])),b="<pre>\n  From upload, fetched "+e+" rows."+c+"\n</pre>",$("#main-body").append(b)}).fail(function(a,b){return console.error("Couldn't POST"),console.warn(a,b)}),!1},csvHandler=function(a){return foo(),!1},imageHandler=function(a){return foo(),!1},zipHandler=function(a){return foo(),!1},_7zHandler=function(a){return foo(),!1},$(function(){return $("#next").exists()&&$("#next").unbind().click(function(){return openTab(adminParams.adminPageUrl)}),loadJS("bower_components/bootstrap/dist/js/bootstrap.min.js",function(){return $("body").tooltip({selector:"[data-toggle='tooltip']"})})});
//# sourceMappingURL=maps/c.map