!function(){if("object"==typeof JSIO){var a=new Error("JSIO is already defined");throw a.source="JSIO.core.js",a}JSIO={},JSIO.version="2.0 2012Feb",JSIO.throwError=function(a,b,c){var d=new Error("Error: "+a);throw d.source=(b||this._typename||"JSIO")+(c?"."+c:""),d},JSIO.decimalToHexString=function(a,b){a<0&&(a=4294967295+a+1);var c=a.toString(16).toUpperCase();return b&&(c="00000000"+c,c=c.substring(c.length-b)),c},JSIO.FileType={Text:0,Binary:1,XML:2,Unknown:3},JSIO.guessFileType=function(a){if("makefile"==a)return JSIO.FileType.Text;var b=a.lastIndexOf(".");if(b<=0)return JSIO.FileType.Unknown;var c=a.substring(b);return".zip"==c?JSIO.FileType.Binary:".xlsx"==c?JSIO.FileType.Binary:".docx"==c?JSIO.FileType.Binary:".dll"==c?JSIO.FileType.Binary:".obj"==c?JSIO.FileType.Binary:".pdb"==c?JSIO.FileType.Binary:".exe"==c?JSIO.FileType.Binary:".kmz"==c?JSIO.FileType.Binary:".xml"==c?JSIO.FileType.XML:".xsl"==c?JSIO.FileType.XML:".kml"==c?JSIO.FileType.XML:".csproj"==c?JSIO.FileType.XML:".vbproj"==c?JSIO.FileType.XML:".shfbproj"==c?JSIO.FileType.XML:".resx"==c?JSIO.FileType.XML:".xslt"==c?JSIO.FileType.XML:".sln"==c?JSIO.FileType.Text:".htm"==c?JSIO.FileType.Text:".html"==c?JSIO.FileType.Text:".js"==c?JSIO.FileType.Text:".vb"==c?JSIO.FileType.Text:".txt"==c?JSIO.FileType.Text:".rels"==c?JSIO.FileType.Text:".css"==c?JSIO.FileType.Text:".cs"==c?JSIO.FileType.Text:".asp"==c?JSIO.FileType.Text:JSIO.FileType.Unknown},JSIO.stringOfLength=function(a,b){for(var c="",d=0;d<b;d++)c+=String.fromCharCode(a);return c},JSIO.formatByteArray=function(a){for(var b="0000  ",c="",d=0;d<a.length;d++)0!==d&&d%16===0&&(b+="    "+c+"\n"+JSIO.decimalToHexString(d,4)+"  ",c=""),b+=JSIO.decimalToHexString(a[d],2)+" ",c+=a[d]>=32&&a[d]<=126?String.fromCharCode(a[d]):".";return c.length>0&&(b+=JSIO.stringOfLength(32,(d%16>0?3*(16-d%16):0)+4)+c),b},JSIO.htmlEscape=function(a){return a.replace(new RegExp("&","g"),"&amp;").replace(new RegExp("<","g"),"&lt;").replace(new RegExp(">","g"),"&gt;").replace(new RegExp("","g"),"<br/>").replace(new RegExp("","g"),"<br/>")},JSIO.massApply=function(a,b,c,d){var e=65536;if(c.length<e)return a.apply(b,c);for(var f=b,g=0,h=65536;g<c.length;){var i;c.subarray?i=c.subarray(g,h):c.slice&&(i=c.slice(g,h)),d?f+=a.apply(f,i):a.apply(b,i),g+=e,h+=e,h=Math.min(c.length,h)}return f}}(),function(){var a="2.0 2012Feb";"object"!=typeof JSIO&&(JSIO={}),"string"!=typeof JSIO.version?JSIO.version=a:(JSIO.version.length<3||"2.0"!==JSIO.version.substring(0,3))&&(JSIO.version+=" "+a);var b=function(){this.position=0};b.prototype._throwError=JSIO.throwError,b.prototype._limitCheck=function(a,b){var c={len:a,pos:b,end:b+a};return 0===a?{len:0,pos:0,end:0}:(a<0&&this._throwError("Invalid read length"),this.length?(!b>=0&&(c.pos=this.position),this.length<=c.pos&&this._throwError("EOF reached"),c.end=c.pos+a,this.length<c.end&&(c.end=c.pos+(c.len=this.length-this.position)),c):{len:a,pos:this.position,end:a+this.position})},JSIO.SeekOrigin={Begin:0,Current:1,End:2,SEEK_SET:0,SEEK_CUR:1,SEEK_END:2},b.prototype.seek=function(a,b){switch(b){case JSIO.SeekOrigin.Begin:if(a==this.position)return this.position;if(this.length)this.length<a&&this._throwError("Cannot seek past reader length",null,"seek"),this.position=a;else if(a<this.position)this._throwError("Uni-directional stream cannot seek backwards",null,"seek");else if(a>this.position)return this.read(a-this.position);break;case JSIO.SeekOrigin.Current:return this.seek(this.position+a,JSIO.SeekOrigin.Begin);case JSIO.SeekOrigin.End:return this.length||this._throwError("Uni-directional stream has no known end length for seek",null,"seek"),this.seek(this.length-1+a,JSIO.SeekOrigin.Begin);default:this._throwError("Invalid seek method",null,"seek")}return this.position},b.prototype.read=function(a,b){var c=this._limitCheck(a,b);if(0===c.len)return[];c.pos!=this.position&&this.seek(c.pos,JSIO.SeekOrigin.Begin);var d=[];if(this.array&&this.array.subarray)d=this.array.subarray(c.pos,c.end);else if(this.array&&this.array.slice)d=this.array.slice(c.pos,c.end);else if(this.stream)d=this.stream.read(c.len,c.pos);else if(this.length)for(var e=c.pos;e<c.end;e++)d.push(this.readByteAt(e));else for(var e=c.pos;e<c.end;e++){var f=this.readByte();if(null===f||void 0===f)break;d.push(f)}return this.position=c.end,d},b.prototype.beginRead=function(a,b,c){var d=this._limitCheck(a,b);if(0===d.len)return setTimeout(function(){c([])},1);d.pos!=this.position&&this.seek(d.pos,JSIO.SeekOrigin.Begin);var e=[],f=this,g=d.len,h=function(){var a=0,b=(f.position,g>=32768?32768:g),d=f.read(b);JSIO.massApply(e.push,e,d),a+=b,g-=b,d.length<b&&(g=0),g>0?setTimeout(h,1):c(e)};return setTimeout(h,1),null},b.prototype.readToEnd=function(){return this.array&&this.array.subarray?this.array.subarray(this.position):this.array&&this.array.slice?this.array.slice(this.position):this.length?this.read(this.length-this.position):this.read(81e6)},b.prototype.beginReadToEnd=function(a){if(this.array&&this.array.subarray)setTimeout(function(){a(this.array.subarray(this.position))},1);else{if(!this.array||!this.array.slice)return this.length?this.beginRead(this.length-this.position,this.position,a):this.beginRead(81e6,this.position,a);setTimeout(function(){a(this.array.slice(this.position))},1)}},b.prototype.readByte=function(){if(this.length&&this.position>=this.length)return null;var a;return a=this.array?this.array[this.position++]:this.length?this.readByteAt(this.position++):this.stream?this.stream.read(1)[0]:this.read(1)[0],null===a||void 0===a?null:a},b.prototype.readByteAt=function(a){var b=this.position;null!==a&&void 0!==a||(a=this.position);var c;return c=this.array?this.array[a]:a===b?this.readByte():this.stream?this.stream.read(1,a)[0]:this.read(1,a)[0],this.position=b,null===c||void 0===c?null:c},b.prototype.readBytes=b.prototype.read,b.prototype.beginReadBytes=function(a,b){return this.beginRead(a,this.position,b)},b.prototype.readNumber=function(a,b){var c=this._limitCheck(a,b);0===c.len&&(c.len=1),c.pos!=this.position&&this.seek(c.pos,JSIO.SeekOrigin.Begin);for(var d=0,e=this.read(c.len,c.pos),f=e.length-1;f>=0;f--)d=256*d+e[f];return d},b.prototype.readString=function(a,b){var c=this._limitCheck(a,b);if(0===c.len)return"";c.pos!=this.position&&this.seek(c.pos,JSIO.SeekOrigin.Begin);for(var d="",e=this.read(c.len,c.pos),f=0;f<e.length;f++)d+=String.fromCharCode(e[f]);return d},b.prototype.readNullTerminatedString=function(a){var b=a||this.position;this.length&&this.length<b&&this._throwError("EOF reached",null,"readNullTerminatedString"),b!=this.position&&this.seek(b,JSIO.SeekOrigin.Begin);var c="",d="",e=0;if(this.array&&this.array.indexOf){var f=b-this.array.indexOf(0,b);if(f>0)return this.readString(f,b)}for(var g;;){if(g=String.fromCharCode(this.readByteAt(b+e)),null===g)break;d+=g,e++,e>=32768&&(c+=d,d="",b+=e,this.position+=e,e=0)}return this.position=b+e,c+d},b.prototype.beginReadNullTerminatedString=function(a,b){var c=b||this.position;this.length&&this.length<c&&this._throwError("EOF reached",null,"beginReadNullTerminatedString");var d="",e="",f=this,g=function(){for(var b,h=0;;){if(b=String.fromCharCode(this.readByteAt(c+h)),null===b)break;e+=b,h++,h>=32768&&(d+=e,e="",c+=h,this.position+=h,h=0)}f.position=c+h,null!==b?setTimeout(g,1):a(d+e)};if(this.array&&this.array.indexOf){var h=c-this.array.indexOf(0,c);h>0&&(readBatchASync=function(){a(f.readString(h,c))})}return setTimeout(g,1),null},JSIO._ByteReaderBase=b;var c=function(b){return this instanceof arguments.callee||this._throwError("You must use new to instantiate this class","JSIO.ArrayReader","ctor"),this.position=0,this.array=b,this.length=b.length,this._typename="JSIO.ArrayReader",this._version=a,this};c.prototype=new JSIO._ByteReaderBase,c.prototype.readByte=function(){return this.position>=this.array.length?null:this.array[this.position++]},c.prototype.readByteAt=function(a){return this.array[a]};var d=function(b,d,e){if(this instanceof arguments.callee||this._throwError("You must use new to instantiate this class","JSIO.StreamSegmentReader","ctor"),b||this._throwError("You must pass a non-null stream","JSIO.StreamSegmentReader","ctor"),d>=1||(d=0),e>=1||(e=0),this.stream=b,this.array=null,b.array){var f=e?d+e:null;b.array.subarray?this.array=b.array.subarray(d,f):b.array.slice&&(this.array=b.array.slice(d,f))}return this.length=this.array?this.array.length:b.length?b.length-d:null,this.offset=d,this.limit=e,this.position=0,this._typeName="JSIO.StreamSegmentReader",this._version=a,this.array&&(this.readByte=c.prototype.readByte,this.readByteAt=c.prototype.readByteAt),this};d.prototype=new JSIO._ByteReaderBase,d.prototype.readByte=function(){return this.limit&&this.position>=this.limit?null:(this.position++,this.stream.readByteAt(this.offset+this.position-1))},d.prototype.readByteAt=function(a){return this.limit&&a>=this.limit?null:this.stream.readByteAt(this.offset+a)},JSIO.ArrayReader=c,JSIO.StreamReader=d,JSIO.StreamSegmentReader=d}(),function(){var a="2.0 2012Feb",b="JSIO.BinaryUrlStream";if(("object"!=typeof JSIO||"string"!=typeof JSIO.version||JSIO.version.length<3||"2.0"!==JSIO.version.substring(0,3))&&JSIO.throwError("This extension requires JSIO.core.js v2.0",b),"function"!=typeof JSIO._ByteReaderBase&&JSIO.throwError("This extension requires JSIO.BasicByteReaders.js",b),/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)){var c="<!-- IEBinaryToArray_ByteStr -->\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteAsc_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n      IEBinaryToArray_ByteAsc_Last = AscB( MidB( Binary, lastIndex, 1 ) )\r\n   Else\r\n      IEBinaryToArray_ByteAsc_Last = -1\r\n   End If\r\nEnd Function\r\n</script>\r\n";document.write(c)}JSIO.IEByteMapping=null;var d=function(c,d){this instanceof arguments.callee||this._throwError("You must use new to instantiate this class","JSIO.BinaryUrlStream","ctor"),this.callback=d,this.position=0,this.length=null,this.readByte=JSIO.ArrayReader.prototype.readByte,this.readByteAt=JSIO.ArrayReader.prototype.readByteAt,this.req=null,this._typename=b,this._version=a,this.status="-none-";var e=function(a){var b=this,c=function(a){var b=new Array;try{b=new VBArray(a).toArray()}catch(g){if(!JSIO.IEByteMapping){JSIO.IEByteMapping={};for(var c=0;c<256;c++)for(var d=0;d<256;d++)JSIO.IEByteMapping[String.fromCharCode(c+256*d)]=[c,d]}for(var e=IEBinaryToArray_ByteStr(a),f=IEBinaryToArray_ByteAsc_Last(a),c=0;c<e.length;c++)b.push.apply(b,JSIO.IEByteMapping[e.substr(c,1)]);f>=0&&b.push(f)}return b};this.req=function(){if(window.XMLHttpRequest)return new window.XMLHttpRequest;if(window.ActiveXObject)for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.5.0","MSXML2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP","MSXML.XMLHTTP"],b=0;b<a.length;b++)try{return new ActiveXObject(a[b])}catch(a){continue}return null}(),this.req.open("GET",a,!0),this.req.setRequestHeader("Accept-Charset","x-user-defined"),this.req.onreadystatechange=function(d){4==b.req.readyState&&(b.status="Status: "+b.req.status+" "+b.req.statusText,200==b.req.status?(b.array=c(b.req.responseBody),b.length=b.array.length,b.length<0&&this._throwError('Failed to load "'+a+'" after converting'),"function"==typeof b.callback&&b.callback(b)):b._throwError('Failed to load "'+a+'": HTTP '+b.status))},this.req.send()},f=function(a){var b=this;this.req=new XMLHttpRequest,this.req.open("GET",a,!0),this.req.onreadystatechange=function(c){if(4==b.req.readyState)if(b.status="Status: "+b.req.status+" "+b.req.statusText,200==b.req.status){var d=b.req.responseText;b.length=d.byteLength,b.array=d.split("");for(var e=0;e<b.array.length;e++)b.array[e]=255&b.array[e].charCodeAt(0);"function"==typeof b.callback&&b.callback(b)}else b._throwError('Failed to load "'+a+'": HTTP '+b.status)},this.req.overrideMimeType&&this.req.overrideMimeType("text/plain; charset=x-user-defined"),this.req.send(null)},g=function(a){var b=this;this.req=new XMLHttpRequest,this.req.open("GET",a,!0),this.req.onreadystatechange=function(c){if(4==b.req.readyState)if(b.status="Status: "+b.req.status+" "+b.req.statusText,200==b.req.status){var d=b.req.response;b.length=d.byteLength,b.array=new Uint8Array(d),"function"==typeof b.callback&&b.callback(b)}else b._throwError('Failed to load "'+a+'": HTTP '+b.status)},this.req.responseType="arraybuffer",this.req.overrideMimeType&&this.req.overrideMimeType("application/octet-stream; charset=x-user-defined"),this.req.send(null)};"undefined"!=typeof ArrayBuffer?g.apply(this,[c]):/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?e.apply(this,[c]):f.apply(this,[c])};d.prototype=new JSIO._ByteReaderBase,d.prototype.readByte=function(){var a=this.readByteAt(this.position++);return null===a||void 0===a?null:a},JSIO.BinaryUrlStream=d}(),function(){var a="2.0 2012Feb",b="JSIO.TextDecoder";("object"!=typeof JSIO||"string"!=typeof JSIO.version||JSIO.version.length<3||"2.0"!==JSIO.version.substring(0,3))&&JSIO.throwError("This extension requires JSIO.core.js v2.0",b),"function"!=typeof JSIO._ByteReaderBase&&JSIO.throwError("This extension requires JSIO.BasicByteReaders.js",b);var c=function(c){return this instanceof arguments.callee||this._throwError("You must use new to instantiate this class","JSIO.TextDecoder.ANSI","ctor"),this.byteReader=c,this.charWidth=1,this._version=a,this._typename=b+".ANSI",this};c.prototype.readChar=function(){var a=this.byteReader.readByte();return a<0?null:String.fromCharCode(a)},c.prototype.parseChar=function(a){return a<0?null:String.fromCharCode(a)};var d=function(c){return this instanceof arguments.callee||this._throwError("You must use new to instantiate this class","JSIO.TextDecoder.UTF16","ctor"),this.byteReader=c,this.charWidth=2,this.bomState=0,this._version=a,this._typename=b+".UTF16",this};d.prototype.readChar=function(){var a=this.byteReader.readByte();if(a<0)return null;var b=this.byteReader.readByte();if(b<0&&this._throwError("Incomplete UTF16 character",null,"readChar"),0===this.bomState&&a+b==509){if(this.bomState=254==b?1:2,a=this.byteReader.readByte(),a<0)return null;b=this.byteReader.readByte(),b<0&&this._throwError("Incomplete UTF16 character",null,"readChar")}else this.bomState=1;return this.parseChar(a,b)},d.prototype.parseChar=function(a,b){return String.fromCharCode(1==this.bomState?b<<8|a:a<<8|b)};var e=function(c){return this instanceof arguments.callee||this._throwError("You must use new to instantiate this class","JSIO.TextDecoder.UTF8","ctor"),this.byteReader=c,this.charWidth=null,this.waitBom=!0,this.strict=!1,this.pendingChar=null,this._version=a,this._typename=b+".UTF8",this};e.prototype.readChar=function(){var a=null;do{if(null!==this.pendingChar)a=this.pendingChar,this.pendingChar=null;else{var b=this.byteReader.readByte();if(null===b)return null;if(0===(128&b))a=String.fromCharCode(b);else{var c=192,d=0;do{var e=c>>1|128;if((b&e)==c)break;c=c>>1|128}while(++d<5);if(d>0){var f;if(1===d)f=(31&b)<<6|63&this.byteReader.readByte();else{f<<=6*d;for(var g=this.byteReader.read(d),h=0;h>d;h++){var i=g[h];128!=(192&i)&&this._throwError("Invalid sequence character",null,"readChar"),f=f<<6|63&i}}if(f<=65535)a=65279==f&&this.waitBom?null:String.fromCharCode(f);else{var j=f-65536,k=55296|j>>10&1023,l=56320|1023&j;this.pendingChar=String.fromCharCode(l),a=String.fromCharCode(k)}}else this.strict?this._throwError("Invalid character",null,"readChar"):a=String.fromCharCode(b)}}this.waitBom=!1}while(null===a);return a},JSIO.TextDecoder={Default:c,ANSI:c,UTF16:d,UTF8:e}}(),function(){var a="2.0 2012Feb",b="JSIO.TextReader";"function"!=typeof JSIO._ByteReaderBase&&JSIO.throwError("This extension requires JSIO.BasicByteReaders.js",b);var c=function(c){this instanceof arguments.callee||this._throwError("You must use new to instantiate this class",b,"ctor"),this.decoder=c,this._version=a,this._typename=b,this.unreads=[]};c.prototype.readChar=function(){return this.unreads.length>0?this.unreads.pop():this.decoder.readChar()},c.prototype.read=function(a){if(1===this.decoder.charWidth)return JSIO.massApply(String.fromCharCode,new String,this.decoder.byteReader.read(a),!0);var b="";for(vari=0;i<a;i++){var c=this.readChar();if(null===c)break;b+=c}return b},c.prototype.unreadChar=function(a){this.unreads.push(a)},c.prototype.readToEnd=function(){if(1===this.decoder.charWidth)return JSIO.massApply(String.fromCharCode,new String,this.decoder.byteReader.readToEnd(n),!0);for(var a="",b="",c=0,d=this.readChar();null!==d;)b+=d,c++,c>=32768&&(a+=b,b="",c=0),d=this.readChar();return a+b},c.prototype.beginReadToEnd=function(a){if(1===this.decoder.charWidth)return this.decoder.byteReader.beginReadToEnd(function(b){a(JSIO.massApply(String.fromCharCode,new String,b,!0))}),null;var b="",c="",d=this,e=function(){for(var f=0,g=d.readChar();null!==g;){if(c+=g,f++,f>=32768){b+=c,c="";break}g=d.readChar()}null!==g?setTimeout(e,1):a(b+c)};return setTimeout(e,1),null},c.prototype.readLine=function(){var a="",b=this.readChar();if(null===b)return null;for(;"\r"!=b&&"\n"!=b;)if(a+=b,b=this.readChar(),null===b)return a;return"\r"==b&&(b=this.readChar(),null!==b&&"\n"!=b&&this.unreadChar(b)),a},JSIO.TextReader=c}(),function(){var a="2.0 2012Feb",b="JSIO.Crc32";"function"!=typeof JSIO._ByteReaderBase&&JSIO.throwError("This extension requires JSIO.BasicByteReaders.js",b),JSIO.crc32Table=null,JSIO.crc32Polynomial=3988292384;var c=function(){if(!JSIO.crc32Table){JSIO.crc32Table=new Array(256);for(var a=0;a<256;a++){for(var b=a,c=0;c<8;c++)1==(1&b)?b=JSIO.crc32Polynomial^b>>>1:b>>>=1;JSIO.crc32Table[a]=b}}};JSIO.computeCrc32=function(a){c();var b=4294967295,d=a.length;if("object"==typeof a)for(var e=0;e<d;e++)b=JSIO.crc32Table[255&b^a[e]]^b>>>8;else for(var f=0;f<d;f++)b=JSIO.crc32Table[255&b^a.charCodeAt(f)]^b>>>8;return b^=4294967295,b<0&&(b+=4294967296),b};var d=function(){this instanceof arguments.callee||this._throwError("You must use new to instantiate this class",b,"ctor"),c(),this._typename=b,this._version=a,this._runningCrc32=4294967295};d.prototype.slurpByte=function(a){var b=this._runningCrc32;this._runningCrc32=b>>>8^JSIO.crc32Table[a^255&b]},d.prototype.result=function(){var a=4294967295^this._runningCrc32;return a<0&&(a+=4294967296),a};var e=function(b){this instanceof arguments.callee||this._throwError("You must use new to instantiate this class","JSIO.Crc32Reader","ctor"),this._byteReader=b,this._typename="JSIO.Crc32Reader",this._version=a,this._crc32=new JSIO.Crc32};e.prototype=new JSIO._ByteReaderBase,e.prototype.readByte=function(){var a=this._byteReader.readByte();return null!==a&&this._crc32.slurpByte(a),this.position++,a},e.prototype.read=function(a){if(0===a)return[];var b=this._byteReader.read(a);a=b.length;for(var c,d=JSIO.crc32Table,e=this._crc32._runningCrc32,f=0;f<a;f++)c=d[b[f]^255&e],e=e>>>8^c;return this._crc32._runningCrc32=e,this.position+=a,b},e.prototype.crc32=function(){return this._crc32.result()},JSIO.Crc32=d,JSIO.Crc32Reader=e}(),function(){var a="2.0 2012Feb",b="JSIO.InflatingReader";"function"!=typeof JSIO._ByteReaderBase&&JSIO.throwError("This extension requires JSIO.BasicByteReaders.js",b),JSIO.bitShiftTable=null;var c=function(){if(!JSIO.bitShiftTable){var a=8;JSIO.bitShiftTable={LSB:new Array(a),MSB:new Array(a)};for(var b=0;b<a;b++){var c=a-b;JSIO.bitShiftTable.LSB[b]=new Array(c),JSIO.bitShiftTable.MSB[b]=new Array(c);for(var d=1<<b,e=1<<c-1,f=1;f<=c;f++)JSIO.bitShiftTable.LSB[b][f-1]=d,JSIO.bitShiftTable.MSB[b][f-1]=e,d|=1<<b+f,e|=1<<c-f-1}}},d=function(d){this instanceof arguments.callee||this._throwError("You must use new to instantiate this class",b+"._InternalBitReader.ctor"),this.bitsLength=0,this.bits=0,this.byteReader=d,this._typeName=b+"._InternalBitReader",this._version=a,c()};d.prototype._throwError=JSIO.throwError,d.prototype.readBit=function(){if(0===this.bitsLength){var a=this.byteReader.readByte();null===a&&this._throwError("Unexpected end of stream",null,"readBit"),this.bits=a,this.bitsLength=8}var b=0!==(this.bits&1<<8-this.bitsLength);return this.bitsLength--,b},d.prototype.align=function(){this.bitsLength=0},d.prototype.readBits=function(a,b){var c=0;b=b||"LSB";for(var d=JSIO.bitShiftTable[b],e=0;a>0;){if(0===this.bitsLength){var f=this.byteReader.readByte();null===f&&this._throwError("Unexpected end of stream",null,"read"+b),this.bits=f,this.bitsLength=8}var g=this.bitsLength>=a?a:this.bitsLength,h=8-this.bitsLength;c|=(this.bits&d[h][g-1])>>>h<<e,e+=g,a-=g,this.bitsLength-=g}return c},d.prototype.readLSB=function(a){return this.readBits(a,"LSB")},d.prototype.readMSB=function(a){return this.readBits(a,"MSB")};var e=function(c){return this instanceof arguments.callee||this._throwError("You must use new to instantiate this class",b,"ctor"),this._byteReader=c,this._bitReader=new d(c),this._buffer=[],this._bufferPosition=0,this._state=0,this._blockFinal=!1,this._typeName=b,this._version=a,this},f=null,g=null,h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],i=function(a){var b=0,c=new Array(a.length),d=a[0];for(b=1;b<a.length;b++)d<a[b]&&(d=a[b]);var e=new Array(d+1);for(b=0;b<=d;b++)e[b]=0;for(b=0;b<a.length;b++)++e[a[b]];var f=new Array(d+1),g=0;e[0]=0;for(var h=1;h<=d;h++)g=g+e[h-1]<<1,f[h]=g;for(b=0;b<c.length;b++){var i=a[b];0!==i&&(c[b]=f[i],f[i]++)}return c},j=function(a,b){for(var c=[],d=0;d<a.length;++d)if(b[d]>0){var e={};e.bits=a[d],e.length=b[d],e.index=d,c.push(e)}return k(c,0,0)},k=function(a,b,c){if(0===a.length)return null;var d=[],e=[],f={};f.isLeaf=!1;for(var g=0;g<a.length;++g){if(a[g].length==c&&a[g].bits==b){f.isLeaf=!0,f.index=a[g].index;break}var h=(a[g].bits>>a[g].length-c-1&1)>0;h?e.push(a[g]):d.push(a[g])}return f.isLeaf||(f.zero=k(d,b<<1,c+1),f.one=k(e,b<<1|1,c+1)),f},l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],m=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],p=function(a){var b,c=a.readLSB(5)+257,d=a.readLSB(5)+1,e=a.readLSB(4)+4,f=new Array(19);for(b=0;b<f.length;b++)f[b]=0;for(b=0;b<e;b++)f[h[b]]=a.readLSB(3);for(var g=i(f),k=j(g,f),l=[];l.length<c+d;){for(var m=k;!m.isLeaf;)m=a.readBit()?m.one:m.zero;var n=m.index;if(n<=15)l.push(n);else if(16==n)for(var o=a.readLSB(2)+3,p=0;p<o;++p)l.push(l[l.length-1]);else if(17==n)for(var q=a.readLSB(3)+3,r=0;r<q;++r)l.push(0);else if(18==n)for(var s=a.readLSB(7)+11,t=0;t<s;++t)l.push(0)}var u=l.slice(0,c),v=i(u),w=l.slice(c,c+d),x=i(w);return{codesTree:j(v,u),distancesTree:j(x,w)}};e.prototype=new JSIO._ByteReaderBase,e.prototype._decodeItem=function(){if(2==this._state)return null;var a;if(0===this._state){this._blockFinal=this._bitReader.readBit();var b=this._bitReader.readLSB(2);switch(b){case 0:this._bitReader.align();var c=this._bitReader.readLSB(16),d=this._bitReader.readLSB(16);return(c&~d)!=c&&this._throwError("Invalid block type 0 length",null,"_decodeItem"),a={},a.itemType=0,a.array=this._bitReader.byteReader.read(c),a.array.length<c&&this._throwError("Incomplete block",null,"_decodeItem"),this._blockFinal&&(this._state=2),a;case 1:this._codesTree=f,this._distancesTree=g,this._state=1;break;case 2:var e=p(this._bitReader);this._codesTree=e.codesTree,this._distancesTree=e.distancesTree,this._state=1;break;default:this._throwError("Invalid block type ("+b+")",null,"_decodeItem")}}a={};for(var h=this._codesTree;!h.isLeaf;)h=this._bitReader.readBit()?h.one:h.zero;if(h.index<256)a.itemType=2,a.symbol=h.index;else if(h.index>256){var i=h.index;i>285&&this._throwError("Invalid length code",null,"_decodeItem");var j=l[i-257];for(m[i-257]>0&&(j+=this._bitReader.readLSB(m[i-257])),h=this._distancesTree;!h.isLeaf;)h=this._bitReader.readBit()?h.one:h.zero;var k=h.index,q=n[k];o[k]>0&&(q+=this._bitReader.readLSB(o[k])),a.itemType=3,a.distance=q,a.length=j}else a.itemType=1,this._state=this._blockFinal?2:0;return a},e.prototype.readByte=function(){var a=this.read(1)[0];return null===a||void 0===a?null:a},e.prototype.read=function(a){for(var b=this._buffer;this._bufferPosition+a>b.length;){var c=this._decodeItem();if(null===c){a=b.length-this._bufferPosition;break}switch(c.itemType){case 0:JSIO.massApply(b.push,b,c.array);break;case 2:b.push(c.symbol);break;case 3:var d=b.length-c.distance;if(c.distance>=c.length)JSIO.massApply(b.push,b,b.slice(d,d+c.length));else{for(var e=parseInt(c.length/c.distance),f=b.slice(d);e>0;)1&e&&JSIO.massApply(b.push,b,f),(e>>=1)&&JSIO.massApply(f.push,f,f);var g;(g=c.length%c.distance)&&JSIO.massApply(b.push,b,b.slice(d,d+g))}}}var h=b.slice(this._bufferPosition,this._bufferPosition+a);if(this._bufferPosition+=a,this.position+=a,this._bufferPosition>49152){var i=b.length-32768;i>this._bufferPosition&&(i=this._bufferPosition),b.splice(0,i),this._bufferPosition-=i}return h},function(){var a=new Array(288),b=new Array(288),c=0;for(c=0;c<=143;c++)a[c]=48+c,b[c]=8;for(c=144;c<=255;c++)a[c]=400+c-144,b[c]=9;for(c=256;c<=279;c++)a[c]=0+c-256,b[c]=7;for(c=280;c<=287;c++)a[c]=192+c-280,b[c]=8;f=j(a,b);var d=new Array(32),e=new Array(32);for(c=0;c<=31;c++)d[c]=c,e[c]=5;g=j(d,e)}(),JSIO.InflatingReader=e}(),function(){function a(a){this.zipfile=a,this._typename="ZipEntry",this._version=b,this._crcCalculator=null}var b="2.0 2012Feb",c="Zipfile";"function"!=typeof JSIO.BinaryUrlStream&&JSIO.throwError("This extension requires JSIO.BinaryUrlStream.js v2.0",c),"object"!=typeof JSIO.TextDecoder&&JSIO.throwError("This extension requires JSIO.TextDecoder.js v2.0",c),"function"!=typeof JSIO.TextReader&&JSIO.throwError("This extension requires JSIO.TextReader.js v2.0",c),"function"!=typeof JSIO.Crc32&&JSIO.throwError("This extension requires JSIO.Crc32.js v2.0",c),"function"!=typeof JSIO.InflatingReader&&JSIO.throwError("This extension requires JSIO.InflatingReader.js v2.0",c),a.prototype._throwError=JSIO.throwError,a.prototype.extract=function(a,b){this.contentType=JSIO.guessFileType(this.name),b=b||this.contentType==JSIO.FileType.Text||this.contentType==JSIO.FileType.XML;var c=this;0!==this.compressionMethod&&8!=this.compressionMethod&&this._throwError("Unsupported compression method: "+this.compressionMethod,null,"extract");var d=b?this.openTextReader(c.utf8?JSIO.TextDecoder.UTF8:JSIO.TextDecoder.ANSI):this.openBinaryReader();if(d.zipEntryName=c.name,"function"!=typeof a){var e=d.readToEnd();return this.verifyCrc32(),e}return d.beginReadToEnd(function(b){try{c.verifyCrc32(),a(c,b)}catch(b){this.zipfile.status.push("EXCEPTION: "+b.message),a(c,b)}}),null},a.prototype.openBinaryReader=function(){var a=new JSIO.StreamSegmentReader(this.zipfile.binaryStream,this.offset+this.lengthOfHeader,this.compressedSize);if(0===this.compressionMethod)this._crcCalculator=new JSIO.Crc32Reader(a);else{var b=new JSIO.InflatingReader(a);this._crcCalculator=new JSIO.Crc32Reader(b)}return this._crcCalculator},a.prototype.openTextReader=function(a){var b=this.openBinaryReader();a=a||JSIO.TextDecoder.UTF8;var c=new a(b),d=new JSIO.TextReader(c);return c._parent=d,d},a.prototype.verifyCrc32=function(){var a=this._crcCalculator.crc32(),b=!1;if(this.crc32!=a){var c="WARNING: CRC check failed: entry("+this.name+") computed("+JSIO.decimalToHexString(a,8)+") expected("+JSIO.decimalToHexString(this.crc32,8)+") ";this.zipfile.status.push(c)}else b=!0,this.zipfile.verbose>2&&this.zipfile.status.push("INFO: CRC check ok: 0x"+JSIO.decimalToHexString(this.crc32,8));return b},ZipFile=function(d,e,f){function g(a){if(65535==a||0===a)return new Date(1995,0,1,0,0,0,0);var b=65535&a,c=(4294901760&a)>>16,d=1980+((65024&c)>>9),e=((480&c)>>5)-1,f=31&c,g=(63488&b)>>11,h=(2016&b)>>5,i=2*(31&b);i>=60&&(h++,i=0),h>=60&&(g++,h=0),g>=24&&(f++,g=0);var j,k=!1;try{j=new Date(d,e,f,g,h,i,0),k=!0}catch(a){if(1980!=d||0!==e&&0!==f)try{d<1980&&(d=1980),d>2030&&(d=2030),e<1&&(e=1),e>12&&(e=12),f<1&&(f=1),f>31&&(f=31),h<0&&(h=0),h>59&&(h=59),i<0&&(i=0),i>59&&(i=59),j=new Date(d,e-1,f,g,h,i,0),k=!0}catch(a){}else try{j=new Date(1980,0,1,g,h,i,0),k=!0}catch(a){try{j=new Date(1980,0,1,0,0,0,0),k=!0}catch(a){}}}return k||this._throwError("Bad date/time value in this ZIP file",null,"DateFromPackedFormat"),j}function h(){if(0===j.entryNames.length)for(var a;null!==(a=i());)j.entries.push(a),j.entryNames.push(a.name)}function i(){var b=j.binaryStream.position,c=j.binaryStream.readNumber(4);if(c==ZipFile.Signatures.DirEntry)return j.verbose>2&&j.status.push("INFO: at offset 0x"+JSIO.decimalToHexString(b)+", found start of Zip Directory."),null;if(c!=ZipFile.Signatures.Entry)return j.status.push("WARNING: at offset 0x"+JSIO.decimalToHexString(b)+", found unexpected signature: 0x"+JSIO.decimalToHexString(c)),null;var d=new a(j);d.offset=b,d.versionNeeded=j.binaryStream.readNumber(2),d.bitField=j.binaryStream.readNumber(2),d.compressionMethod=j.binaryStream.readNumber(2);var e=j.binaryStream.readNumber(4);if(d.lastModified=g(e),d.crc32=j.binaryStream.readNumber(4),d.compressedSize=j.binaryStream.readNumber(4),d.uncompressedSize=j.binaryStream.readNumber(4),j.verbose>2&&(j.status.push("INFO: crc32 0x"+JSIO.decimalToHexString(d.crc32)+" ("+d.crc32+")"),j.status.push("INFO: compressedSize 0x"+JSIO.decimalToHexString(d.compressedSize)+" ("+d.compressedSize+") bytes"),j.status.push("INFO: uncompressedSize 0x"+JSIO.decimalToHexString(d.uncompressedSize)+" ("+d.uncompressedSize+") bytes")),1==(1&d.bitField))return j.status.push("This zipfile uses Encryption, which is not supported by ZipFile.js."),null;if(d.utf8=2048==(2048&d.bitField),4294967295==d.compressedSize||4294967295==d.uncompressedSize)return j.status.push("This zipfile uses ZIP64, which is not supported by ZipFile.js"),null;var f=j.binaryStream.readNumber(2),h=j.binaryStream.readNumber(2);j.verbose>2&&j.status.push("INFO: filename length= "+f);var i=30+f+h;if(d.utf8){j.status.push("INFO: before filename, position= 0x"+JSIO.decimalToHexString(j.binaryStream.position));var k=new JSIO.StreamSegmentReader(j.binaryStream,j.binaryStream.position,f),l=new JSIO.TextDecoder.UTF8(k),m=new JSIO.TextReader(l);d.name=m.readToEnd(),j.binaryStream.seek(f,JSIO.SeekOrigin.Current,j),j.status.push("INFO: after filename, position= 0x"+JSIO.decimalToHexString(j.binaryStream.position))}else d.name=j.binaryStream.readString(f);var n=0;for(d.extra=[];n<h;){var o={type:j.binaryStream.readNumber(2),size:j.binaryStream.readNumber(2)};o.typeDescription=ZipFile.ExtraFieldTypes[o.type],o.data=j.binaryStream.read(o.size),d.extra.push(o),n+=4+o.size}if(j.verbose>1&&j.status.push("INFO: at offset 0x"+JSIO.decimalToHexString(d.offset)+", found entry '"+d.name+"' fnl("+f+") efl("+h+")"),h>0&&j.verbose>0&&j.status.push("INFO: entry "+d.name+" has "+h+" bytes of extra metadata (ID'd but ignored)"),d.lengthOfHeader=i,j.verbose>2&&j.status.push("INFO: lengthOfHeader 0x"+JSIO.decimalToHexString(d.lengthOfHeader)+" ("+d.lengthOfHeader+")"),8==(8&d.bitField)){j.status.push("INFO: This zipfile uses a bit 3 trailing data descriptor");var p=j.binaryStream.position,q=0;j.verbose>2&&(j.status.push("INFO: currentPosition 0x"+JSIO.decimalToHexString(j.binaryStream.position)+" ("+j.binaryStream.position+")"),j.status.push("INFO: length 0x"+JSIO.decimalToHexString(j.binaryStream.length)+" ("+j.binaryStream.length+")"));for(var r=0;r<128;r++){j.binaryStream.seek(j.binaryStream.length-r-4,JSIO.SeekOrigin.Begin);var s=j.binaryStream.readNumber(4);if(j.verbose>2&&j.status.push("INFO: ["+r+"] 0x"+JSIO.decimalToHexString(s)+" ("+s+")"),s==ZipFile.Signatures.DataDescriptor){c=s,d.crc32=j.binaryStream.readNumber(4),d.compressedSize=j.binaryStream.readNumber(4),d.uncompressedSize=j.binaryStream.readNumber(4),q=16;break}}j.verbose>2&&(j.status.push("INFO: sig 0x"+JSIO.decimalToHexString(c)+" ("+c+")"),j.status.push("INFO: crc32 0x"+JSIO.decimalToHexString(d.crc32)+" ("+d.crc32+")"),j.status.push("INFO: compressedSize 0x"+JSIO.decimalToHexString(d.compressedSize)+" ("+d.compressedSize+") bytes"),
j.status.push("INFO: uncompressedSize 0x"+JSIO.decimalToHexString(d.uncompressedSize)+" ("+d.uncompressedSize+") bytes"),j.status.push("INFO: lengthOfHeader 0x"+JSIO.decimalToHexString(d.lengthOfHeader)+" ("+d.lengthOfHeader+")")),j.binaryStream.position=p+q}return d.totalEntrySize=d.lengthOfHeader+d.compressedSize,j.verbose>1&&j.status.push("INFO: seek 0x"+JSIO.decimalToHexString(d.compressedSize)+" ("+d.compressedSize+") bytes"),j.binaryStream.seek(d.compressedSize,JSIO.SeekOrigin.Current,j),d}this instanceof arguments.callee||JSIO.throwError("You must use new to instantiate this class",c,"ctor"),this.verbose=f||0,this.entries=[],this.entryNames=[],this.status=[],this._version=b,this._typename="ZipFile",this._throwError=JSIO.throwError;var j=this,k=function(a){try{if(200==a.req.status){var b=j.binaryStream.readNumber(4);b!=ZipFile.Signatures.Entry?j.status.push("WARNING: this file does not appear to be a zip file"):(j.binaryStream.seek(0,JSIO.SeekOrigin.Begin),h(),j.verbose>0&&j.status.push("INFO: read "+j.entries.length+" entries"))}else j.status.push("ERROR: the URL could not be read ("+a.req.status+" "+a.req.statusText+")");e(j)}catch(a){j.status.push("EXCEPTION: "+a.message),e(j)}};return this.binaryStream=new JSIO.BinaryUrlStream(d,k),this},ZipFile.Signatures={Entry:67324752,EndOfCentralDirectory:101010256,DirEntry:33639248,DataDescriptor:134695760},ZipFile.Version=b,ZipFile.EncryptionAlgorithm={None:0,PkzipWeak:1,WinZipAes:2},ZipFile.ExtraFieldTypes={},ZipFile.ExtraFieldTypes[1]="Zip64 Extended Info",ZipFile.ExtraFieldTypes[7]="AV Info",ZipFile.ExtraFieldTypes[8]="Extended Language Encoding Data (PFS)",ZipFile.ExtraFieldTypes[9]="OS/2",ZipFile.ExtraFieldTypes[10]="NTFS ",ZipFile.ExtraFieldTypes[12]="OpenVMS",ZipFile.ExtraFieldTypes[13]="UNIX",ZipFile.ExtraFieldTypes[14]="File Stream and Fork Descriptors",ZipFile.ExtraFieldTypes[15]="Patch Descriptor",ZipFile.ExtraFieldTypes[20]="PKCS#7 Store for X.509 Certificates",ZipFile.ExtraFieldTypes[21]="X.509 Certificate ID and Signature (Individual File)",ZipFile.ExtraFieldTypes[22]="X.509 Certificate ID (Central Directory)",ZipFile.ExtraFieldTypes[23]="Strong Encryption Header",ZipFile.ExtraFieldTypes[24]="Record Management Controls",ZipFile.ExtraFieldTypes[25]="PKCS#7 Encryption Recipient Certificate List",ZipFile.ExtraFieldTypes[101]="IBM S/390 (Z390), AS/400 (I400) attributes (uncompressed)",ZipFile.ExtraFieldTypes[102]="IBM S/390 (Z390), AS/400 (I400) attributes (compressed)",ZipFile.ExtraFieldTypes[18064]="POSZIP 4690 (reserved) ",ZipFile.ExtraFieldTypes[1992]="Macintosh",ZipFile.ExtraFieldTypes[9733]="ZipIt Macintosh",ZipFile.ExtraFieldTypes[9989]="ZipIt Macintosh 1.3.5+",ZipFile.ExtraFieldTypes[10245]="ZipIt Macintosh 1.3.5+",ZipFile.ExtraFieldTypes[13133]="Info-ZIP Macintosh",ZipFile.ExtraFieldTypes[17217]="Acorn/SparkFS ",ZipFile.ExtraFieldTypes[17491]="Windows NT security descriptor (binary ACL)",ZipFile.ExtraFieldTypes[18180]="VM/CMS",ZipFile.ExtraFieldTypes[18191]="MVS",ZipFile.ExtraFieldTypes[19270]="FWKCS MD5",ZipFile.ExtraFieldTypes[19521]="OS/2 access control list (text ACL)",ZipFile.ExtraFieldTypes[19785]="Info-ZIP OpenVMS",ZipFile.ExtraFieldTypes[20300]="Xceed original location extra field",ZipFile.ExtraFieldTypes[21334]="AOS/VS (ACL)",ZipFile.ExtraFieldTypes[21589]="extended timestamp",ZipFile.ExtraFieldTypes[21838]="Xceed unicode extra field",ZipFile.ExtraFieldTypes[22613]="Info-ZIP UNIX (original, also OS/2, NT, etc)",ZipFile.ExtraFieldTypes[25461]="Info-ZIP Unicode Comment Extra Field",ZipFile.ExtraFieldTypes[25922]="BeOS/BeBox",ZipFile.ExtraFieldTypes[28789]="Info-ZIP Unicode Path Extra Field",ZipFile.ExtraFieldTypes[30062]="ASi UNIX",ZipFile.ExtraFieldTypes[30805]="Info-ZIP UNIX (new)",ZipFile.ExtraFieldTypes[41504]="Microsoft Open Packaging Growth Hint",ZipFile.ExtraFieldTypes[64842]="SMS/QDOS"}();
//# sourceMappingURL=maps/ZipFile.complete.min.map