(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_=[].slice,aa=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};N="undefined"!=typeof exports&&null!==exports?exports:this,y=function(a){return a===!0||a===!1},z=function(a){return!a||0===a.length},x=function(a){return!a||/^\s*$/.test(a)},B=function(a){try{if((z(a)||x(a)||null==a)&&a!==!1&&0!==a)return!0}catch(b){}return!1},A=function(a){if("object"==typeof a)return!0;try{return JSON.parse(a),!0}catch(b){}return!1},C=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},U=function(a){return!C(a)||B(a)?0:parseFloat(a)},V=function(a){return!C(a)||B(a)?0:parseInt(a)},String.prototype.toBool=function(){return"true"===this.toString()},Boolean.prototype.toBool=function(){return"true"===this.toString()},Object.size=function(a){var b,c;c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},m=function(a,b){return setTimeout(b,a)},O=function(a,b){var c;return null==b&&(b=0),c=Math.pow(10,b),Math.round(a*c)/c},jQuery.fn.exists=function(){return jQuery(this).length>0},jQuery.fn.isVisible=function(){return"none"!==jQuery(this).css("display")},jQuery.fn.hasChildren=function(){return Object.size(jQuery(this).children())>3},j=function(a){return function(a){return encodeURI(a).split(/%..|./).length-1}}(this),window.debounce_timer=null,Function.prototype.debounce=function(){var a,b,c,d,e,f,g;if(f=arguments[0],d=arguments[1],g=arguments[2],a=4<=arguments.length?_.call(arguments,3):[],null==f&&(f=300),null==d&&(d=!1),null==g&&(g=window.debounce_timer),e=this,b=function(){return d||e.apply(e,a),console.log("Debounce applied")},null!=g)try{clearTimeout(g)}catch(h){c=h}else d&&(e.apply(obj,a),console.log("Executed immediately"));return window.debounce_timer=setTimeout(b,f)},E=function(a,b,c){var d,e,f,g;if(null==b&&(b=new Object),null==c&&(c=!0),$("script[src='"+a+"']").exists()){if("function"==typeof b)try{b()}catch(h){d=h,console.error("Script is already loaded, but there was an error executing the callback function - "+d.message)}return!0}return g=document.createElement("script"),g.setAttribute("src",a),g.setAttribute("async","async"),g.setAttribute("type","text/javascript"),g.src=a,g.async=!0,f=function(){var a;a=g.readyState;try{if(!b.done&&(!a||/loaded|complete/.test(a))&&(b.done=!0,"function"==typeof b))try{return b()}catch(c){return d=c,console.error("Postload callback error - "+d.message)}}catch(c){return d=c,console.error("Onload error - "+d.message)}},e=function(){console.warn("There may have been a problem loading "+a);try{if(!b.done&&(b.done=!0,"function"==typeof b&&c===!0))try{b()}catch(e){d=e,console.error("Post error callback error - "+d.message),console.warn(d.stack)}if("function"==typeof c)try{return c()}catch(e){return d=e,console.error("Couldn't run post-error function - "+d.message)}}catch(e){return d=e,console.error("There was an error in the error handler! "+d.message)}},g.setAttribute("onload",f),g.setAttribute("onreadystate",f),g.setAttribute("onerror",e),g.onload=g.onreadystate=f,g.onerror=e,document.getElementsByTagName("head")[0].appendChild(g),!0},G=function(){return $(".newwindow").each(function(){var a,b;return a=$(this).attr("href"),b=function(a){return null==a?!1:(window.open(a),!1)},$(this).click(function(){return b(a)}),$(this).keypress(function(){return b(a)})})},null==("undefined"!=typeof _metaStatus&&null!==_metaStatus?_metaStatus.isLoading:void 0)&&(("undefined"==typeof _metaStatus||null===_metaStatus)&&(window._metaStatus=new Object),_metaStatus.isLoading=!1),d=function(a,b){var c,e,f;null==a&&(a="loader"),null==b&&(b=0),C(a)&&(a="loader"),"#"===a.slice(0,1)?(f=a,a=a.slice(1)):f="#"+a,$(f).removeAttr("hidden"),null==(null!=(e=window._metaStatus)?e.isLoading:void 0)&&(null==window._metaStatus&&(window._metaStatus=new Object),window._metaStatus.isLoading=!1);try{return window._metaStatus.isLoading?100>b?(b++,m(100,function(){return d(a,b)}),!1):(console.warn("Loader timed out waiting for load completion"),!1):($(f).exists()?$(f).attr("active",!0):$("body").append('<paper-spinner id="'+a+'" active></paper-spinner'),window._metaStatus.isLoading=!0,!1)}catch(g){return c=g,console.warn("Could not animate loader",c.message)}},S=function(a,b,c){var d,e,f;null==a&&(a="loader"),null==b&&(b=1e3),null==c&&(c=0),"#"===a.slice(0,1)?(f=a,a=a.slice(1)):f="#"+a;try{return _metaStatus.isLoading?($(f).exists()&&($(f).addClass("good"),(e=function(){return m(b,function(){return $(f).removeClass("good").attr("active",!1).removeAttr("active"),m(1,function(){var a,b;return $(f).prop("hidden",!0),null!=("undefined"!=typeof Browsers&&null!==Browsers?Browsers.browser:void 0)?(a=["Spartan","Project Spartan","Edge","Microsoft Edge","MS Edge"],b=Browsers.browser.browser.name,aa.call(a,b)>=0||"EdgeHTML"===Browsers.browser.engine.name?($(f).remove(),_metaStatus.isLoading=!1):($(f).removeAttr("hidden"),m(50,function(){return _metaStatus.isLoading=!1}))):($(f).removeAttr("hidden"),m(50,function(){return _metaStatus.isLoading=!1}))})})})()),!1):100>c?(c++,m(100,function(){return S(a,b,c)}),!1):!1}catch(g){return d=g,console.warn("Could not stop load animation",d.message)}},T=function(a,b,c,d){var e,f,g;null==b&&(b="loader"),null==c&&(c=7500),"#"===b.slice(0,1)?(g=b,b=b.slice(1)):g="#"+b;try{if(!_metaStatus.isLoading)return 100>d?(d++,m(100,function(){return T(a,b,c,d)}),!1):!1;if($(g).exists()){$(g).addClass("bad");try{null!=a&&W(a,"",c)}catch(h){}(f=function(){return m(c,function(){return $(g).removeClass("bad").prop("active",!1).removeAttr("active"),m(1,function(){var a,b;return $(g).prop("hidden",!0),null!=("undefined"!=typeof Browsers&&null!==Browsers?Browsers.browser:void 0)?(a=["Spartan","Project Spartan","Edge","Microsoft Edge","MS Edge"],b=Browsers.browser.browser.name,aa.call(a,b)>=0||"EdgeHTML"===Browsers.browser.engine.name?($(g).remove(),_metaStatus.isLoading=!1):($(g).removeAttr("hidden"),m(50,function(){return _metaStatus.isLoading=!1}))):($(g).removeAttr("hidden"),m(50,function(){return _metaStatus.isLoading=!1}))})})})()}return!1}catch(h){return e=h,console.warn("Could not stop load error animation",e.message)}},i=function(a,b,c,d){var e,f;return null==b&&(b="warning"),null==c&&(c="body"),null==d&&(d="#bs-alert"),$(d).exists()?($(d).removeClass("alert-warning alert-info alert-danger alert-success"),$(d).addClass("alert-"+b)):(e='<div class="alert alert-'+b+' alert-dismissable hanging-alert" role="alert" id="'+d.slice(1)+'">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n    <div class="alert-message"></div>\n</div>',f=$("main").exists()?"main":$("article").exists()?"article":c,$(f).prepend(e)),$(d+" .alert-message").html(a)},("undefined"==typeof W||null===W)&&(W=i),D=function(c,d){var e,f;return null==c&&(c=".lightboximage"),null==d&&(d=!1),f={onStart:function(){return J()},onEnd:function(){return I(),a()},onLoadStart:function(){return b()},onLoadEnd:function(){return a()},allowedTypes:"png|jpg|jpeg|gif|bmp|webp",quitOnDocClick:!0,quitOnImgClick:!0},e=d?d$(c):$(c),E(window.totpParams.relative+"bower_components/imagelightbox/dist/imagelightbox.min.js",function(){return e.click(function(a){try{return a.preventDefault(),a.stopPropagation(),$(this).imageLightbox(f).startImageLightbox(),console.warn("Event propagation was stopped when clicking on this.")}catch(b){return a=b,console.error("Unable to lightbox this image!")}}).each(function(){var a,b,d;console.log("Using selectors '"+c+"' / '"+this+"' for lightboximages");try{if("img"===$(this).prop("tagName").toLowerCase()&&"a"!==$(this).parent().prop("tagName").toLowerCase())return d=$(this).removeClass("lightboximage").prop("outerHTML"),b=function(){switch(!1){case!!B($(this).attr("data-layzr-retina")):return $(this).attr("data-layzr-retina");case!!B($(this).attr("data-layzr")):return $(this).attr("data-layzr");case!!B($(this).attr("data-lightbox-image")):return $(this).attr("data-lightbox-image");default:return $(this).attr("src")}}.call(this),$(this).replaceWith("<a href='"+b+"' class='lightboximage'>"+d+"</a>"),$("a[href='"+b+"']").imageLightbox(f)}catch(e){return a=e,console.log("Couldn't parse through the elements")}}),console.info("Lightboxed the following:",e)})},b=function(){return $('<div id="imagelightbox-loading"><div></div></div>').appendTo("body")},a=function(){return $("#imagelightbox-loading").remove(),$("#imagelightbox-overlay").click(function(){return $("#imagelightbox").click()})},J=function(){return $('<div id="imagelightbox-overlay"></div>').appendTo("body")},I=function(){return $("#imagelightbox-overlay").remove()},$(function(){var a,b,c;try{D()}catch(d){c=d,console.warn("Couldn't lightbox images! "+c.message),console.warn(c.stack)}try{"function"==typeof picturefill&&window.picturefill()}catch(d){c=d,console.warn("Could not execute picturefill.")}G();try{null==(a=window.totpParams).tfaLock&&(a.tfaLock=!1),null==window.latejs&&(window.latejs=new Object),null==(b=window.latejs).done&&(b.done=!1),window.latejs.done!==!0&&window.totpParams.tfaLock!==!0&&"function"==typeof lateJS&&lateJS()}catch(d){c=d,console.warn("There was an error calling lateJS(). If you haven't set that up, you can safely ignore this.")}try{if("function"==typeof loadLast)return loadLast()}catch(d){return c=d,console.warn("There was an error calling loadLast(). This may result in unexpected behaviour.")}}),"object"!=typeof e&&(e=new Object);try{e.o=$.url()}catch(ba){null!=("undefined"!=typeof uri&&null!==uri?uri.o:void 0)?e.o=uri.o:console.warn("The PURL library may be improperly loaded!")}e.urlString=window.location.origin+"/"+totpParams.subdirectory,e.query=e.o.attr("fragment"),e.targetApi="async_login_handler.php",e.apiTarget=e.urlString+e.targetApi,"object"!=typeof window.passwords&&(window.passwords=new Object),window.passwords.goodbg="#cae682",window.passwords.badbg="#e5786d",null==(f=window.passwords).minLength&&(f.minLength=8),null==(g=window.passwords).overrideLength&&(g.overrideLength=20),"object"!=typeof window.totpParams&&(window.totpParams=new Object),window.totpParams.popClass="pop-panel",null==window.totpParams.home&&(window.totpParams.home=e.o.attr("protocol")+"://"+e.o.attr("host")+"/"),null==window.totpParams.relative&&(window.totpParams.relative=""),null==window.totpParams.subdirectory&&(window.totpParams.subdirectory=""),window.totpParams.mainStylesheetPath=window.totpParams.relative+"css/otp_styles.css",window.totpParams.popStylesheetPath=window.totpParams.relative+"css/otp_panels.css",window.totpParams.combinedStylesheetPath=window.totpParams.relative+"css/otp.min.css",delete url,l=function(a,b,c,d){var e,f;return null==a&&(a="#createUser_submit"),null==b&&(b="#password"),null==c&&(c="#password2"),null==d&&(d="#password_security"),e=$(b).val(),f=new RegExp("^(?:(?=^.{"+window.passwords.minLength+",}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$)$"),e.length>window.passwords.overrideLength||e.match(f)?($(b).css("background",window.passwords.goodbg).parent().parent().removeClass("has-error").addClass("has-success"),$("#feedback-status-1").replaceWith("<span id='feedback-status-1' class='glyphicon glyphicon-ok form-control-feedback' aria-hidden='true'></span>"),window.passwords.basepwgood=!0):($(b).css("background",window.passwords.badbg).parent().parent().removeClass("has-success").addClass("has-error"),$("#feedback-status-1").replaceWith("<span id='feedback-status-1' class='glyphicon glyphicon-remove form-control-feedback' aria-hidden='true'></span>"),window.passwords.basepwgood=!1),t(d,b),B($(c).val())||(k(a,b,c),X(a)),!1},k=function(a,b,c){return null==a&&(a="#createUser_submit"),null==b&&(b="#password"),null==c&&(c="#password2"),$(b).val()===$(c).val()?($(c).css("background",window.passwords.goodbg).parent().parent().removeClass("has-error").addClass("has-success"),$("#feedback-status-2").replaceWith("<span id='feedback-status-2' class='glyphicon glyphicon-ok form-control-feedback' aria-hidden='true'></span>"),window.passwords.passmatch=!0):($(c).css("background",window.passwords.badbg).parent().parent().removeClass("has-success").addClass("has-error"),$("#feedback-status-2").replaceWith("<span id='feedback-status-2' class='glyphicon glyphicon-remove form-control-feedback' aria-hidden='true'></span>"),window.passwords.passmatch=!1),X(a),!1},X=function(a){var b,c;null==a&&(a="#createUser_submit");try{return b=!(window.passwords.passmatch&&window.passwords.basepwgood),$(a).attr("disabled",b)}catch(d){return c=d,window.passwords.passmatch=!1,window.passwords.basepwgood=!1}},t=function(a,b){var c,d,e,f,g,h,i,j,k;return null==a&&(a="#password_security"),null==b&&(b="#password"),$("#strength-meter").exists()||(d="<h4>Password Requirements</h4><div id='strength-meter'><div id='strength-requirements'><p style='float:left;margin-top:2em;font-weight:700;'>Character Classes:</p><div id='strength-alpha'><p class='label'>a</p><div class='strength-eval'></div></div><div id='strength-alphacap'><p class='label'>A</p><div class='strength-eval'></div></div><div id='strength-numspecial'><p class='label'>1/!</p><div class='strength-eval'></div></div></div><div id='strength-bar'><label for='password-strength'>Strength: </label><progress id='password-strength' max='5'></progress><p>Time to crack: <span id='crack-time'></span></p></div></div>",g="<br/><br/><p>We require a password of at least "+window.passwords.minLength+" characters with at least one upper case letter, at least one lower case letter, and at least one digit or special character.</p><p>You can also use <a href='http://imgs.xkcd.com/comics/password_strength.png' class='lightboximage'>any long password</a> of at least "+window.passwords.overrideLength+" characters, with no security requirements.</p>",$(a).html(d+g).removeClass("invisible"),D(),$("#helpText").removeClass("invisible")),h=$(b).val(),i=zxcvbn(h),c=51*(V(i.score)+1),j=255-V(16*Math.pow(i.score,2)),0>j&&(j=0),f="rgb("+j+","+c+",0)",k="\nprogress[value]::-webkit-progress-value { background: -webkit-linear-gradient(left,rgb(255,0,30),"+f+"), -webkit-linear-gradient(top,rgba(255, 255, 255, .5), rgba(0, 0, 0, .5)); }",e="\nprogress::-moz-progress-bar { background: -moz-linear-gradient(left,rgb(255,0,30),"+f+"), -moz-linear-gradient(top,rgba(255, 255, 255, .5), rgba(0, 0, 0, .5)); }",$("#dynamic").exists()||$("<style type='text/css' id='dynamic' />").appendTo("head"),$("#dynamic").text(k+e),$(".strength-eval").css("background",window.passwords.badbg),h.length>=window.passwords.overrideLength?$(".strength-eval").css("background",window.passwords.goodbg):(h.match(/^(?:((?=.*\d)|(?=.*\W+)).*$)$/)&&$("#strength-numspecial .strength-eval").css("background",window.passwords.goodbg),h.match(/^(?=.*[a-z]).*$/)&&$("#strength-alpha .strength-eval").css("background",window.passwords.goodbg),h.match(/^(?=.*[A-Z]).*$/)&&$("#strength-alphacap .strength-eval").css("background",window.passwords.goodbg)),$("#password-strength").attr("value",i.score+1),$("#crack-time").text(i.crack_time_display)},p=function(){},s=function(a){var b,c,f,g,h,i,j,k,l;return null==a&&(a=window.totpParams.home),H(),d(),$("#verify_totp_button").prop("disabled",!0),g=$("#totp_code").val(),l=$("#username").val(),i=$("#password").val(),h=$("#remote").val(),k=e.o,b=e.targetApi,c=k.attr("protocol")+"://"+k.attr("host")+"/"+window.totpParams.subdirectory+b,f="action=verifytotp&code="+g+"&user="+l+"&password="+i+"&remote="+h,j=$.post(c,f,"json"),j.done(function(b){var c,d;if(b.status!==!0)return $("#totp_message").text(b.human_error).addClass("alert alert-danger"),$("#totp_code").val(""),$("#totp_code").focus(),T(),console.error("Invalid code error",b.error,b);try{return $("#totp_message").text("Correct!").removeClass("alert-danger").addClass("alert alert-success"),d=0,$.each(b.cookies.raw_cookie,function(c,e){var f;try{$.cookie(c,e,b.cookies.expires)}catch(g){f=g,console.error("Couldn't set cookies",b.cookies.raw_cookie)}return d++,d===Object.size(b.cookies.raw_cookie)?(null==a&&(a=k.attr("protocol")+"://"+k.attr("host")+"/"),S(),m(500,function(){return window.location.href=a})):void 0})}catch(e){return c=e,console.error("Unexpected error while validating",c.message)}}),j.fail(function(a,b){return $("#totp_message").text("Failed to contact server. Please try again.").addClass("alert alert-danger"),console.error("AJAX failure",c+"?"+f,a,b),T()}),j.always(function(){return $("#verify_totp_button").prop("disabled",!1)}),!1},r=function(){var a,b,c,f,g,h,i,j;return H(),d(),j=$("#username").val(),g=encodeURIComponent($("#password").val()),f=$("#code").val(),i=e.o,a=e.targetApi,b=i.attr("protocol")+"://"+i.attr("host")+"/"+window.totpParams.subdirectory+a,c="action=removetotp&code="+f+"&username="+j+"&password="+g+"&base64=true",h=$.post(b,c,"json"),h.done(function(a){return a.status!==!0?($("#totp_message").text(a.human_error).addClass("error"),console.error(a.error),console.warn(b+"?"+c),console.warn(a),T(),!1):($("#totp_message").removeClass("error").addClass("good").text("Two-factor authentication removed for "+a.username+"."),$("#totp_remove").remove(),console.log(b+"?"+c),console.log(a),S(),!1)}),h.fail(function(a,d){return $("#totp_message").text("Failed to contact server. Please try again.").addClass("error"),console.error("AJAX failure",b+"?"+c,a,d),T()})},F=function(){var a,b,c,f,g,h,i,j,k;return H(),d(),k=$("#username").val(),h=$("#password").val(),f=$("#hash").val(),g=$("#secret").val(),j=e.o,a=e.targetApi,b=j.attr("protocol")+"://"+j.attr("host")+"/"+window.totpParams.subdirectory+a,c="action=maketotp&password="+h+"&user="+k,i=$.post(b,c,"json"),i.done(function(a){var d,e,h,i,j,l;return a.status===!0?($("#totp_message").html("To continue, scan this barcode with your smartphone authenticator application. <small><button id='alt_totp_help' class='alert-link btn btn-link'>Don't have the app?</button></small>").removeClass("error alert-danger alert-warning alert-success").addClass("alert-info"),console.log(a),l=a.svg,h=a.raw,j="show_secret",i="showAltBarcode",d="secretBarcode",e="<form id='totp_verify' onsubmit='event.preventDefault();' class='col-xs-12 clearfix'> <p class='text-muted text-center center-block'>If you're unable to scan the barcode below, <button href='#' id='"+j+"' class='btn btn-link'>click here to manually input your key.</button></p> <div id='"+d+"' class='text-center center-block'> "+a.svg+" <p class='text-muted text-center center-block'>Don't see the barcode? <a href='#' id='"+i+"' role='button' class='btn btn-link'>Click here</a></p> </div> <p >Once you've scanned the QR code above with your mobile app, enter the code generated by your app in the field below to verify your setup.</p> <fieldset class='form-inline'> <legend>Confirmation</legend> <div class='form-group'> <label for='code' class='sr-only'>Current Code:</label> <input type='number' pattern='[0-9]{6}' size='6' maxlength='6' id='code' name='code' placeholder='Code' class='form-control'/> </div> <input type='hidden' id='username' name='username' value='"+k+"'/> <input type='hidden' id='hash' name='hash' value='"+f+"'/> <input type='hidden' id='secret' name='secret' value='"+g+"'/> <button id='verify_totp_button' class='totpbutton btn btn-primary'>Verify</button> </fieldset> </form>",$("#totp_start").remove(),$("#totp_message").after(e),$("#alt_totp_help").click(function(){return R()}),$("#"+j).click(function(){return K(a.human_secret)}),$("#"+i).click(function(){var b;return b="<img src='"+a.raw+"' alt='TOTP barcode'/>",$("#"+d).html(b),$("#"+i).unbind().text("Still don't see it? Click here again to open the image in a new tab.").click(function(){return openTab(a.url),$("#"+i).remove()})}),$("#verify_totp_button").click(function(){return H(),P(g,f)}),$("#totp_verify").submit(function(){return H(),P(g,f)}),S()):(console.error("Couldn't generate TOTP code",b+"?"+c),console.warn(a),$("#totp_message").text("There was an error generating your code. "+a.message).addClass("error"),T())}),i.fail(function(a,d){return $("#totp_message").text("Failed to contact server. Please try again.").addClass("error"),console.error("AJAX failure",b+"?"+c,a,d),T()}),!1},P=function(a,b){var c,f,g,h,i,j,k;return H(),d(),h=$("#code").val(),b=$("#hash").val(),a=$("#secret").val(),k=$("#username").val(),j=e.o,c=e.targetApi,f=j.attr("protocol")+"://"+j.attr("host")+"/"+window.totpParams.subdirectory+c,g="action=savetotp&secret="+a+"&user="+k+"&hash="+b+"&code="+h,i=$.post(f,g,"json"),i.done(function(a){var b;return a.status===!0?(b="<h1>Done!</h1><h2>Write down and save this backup code. Without it, you cannot disable two-factor authentication if you lose your device.</h2><pre id='backup_code'>"+a.backup+"</pre><br/><button id='to_home'>Home &#187;</a>",$("#totp_add").html(b),$("#to_home").click(function(){return window.location.href=window.totpParams.home}),S()):(b="<p class='error' id='temp_error'>"+a.human_error+"</p>",$("#temp_error").exists()?$("#temp_error").html(b):$("#verify_totp_button").after(b),console.error(a.error),T())}),i.fail(function(a,b){return $("#totp_message").text("Failed to contact server. Please try again."),console.error("AJAX failure",a,b),T()})},K=function(a){var b;return $("<link/>",{rel:"stylesheet",type:"text/css",media:"screen",href:window.totpParams.popStylesheetPath}).appendTo("head"),b="<div id='cover_wrapper'><div id='secret_id_panel' class='"+window.totpParams.popClass+" cover_content'><p class='close-popup'>X</p><h2>"+a+"</h2></div></div>",$("article").after(b),$("article").addClass("blur"),$(".close-popup").click(function(){return $("#cover_wrapper").remove(),$("article").removeClass("blur")})},w=function(){var a,b,c,d,f,g,h,i,j,k,l;return k=e.o,a=e.targetApi,b=k.attr("protocol")+"://"+k.attr("host")+"/"+window.totpParams.subdirectory+a,l=$("#username").val(),c="action=cansms&user="+l,h="remove_totp_link",j="send_totp_sms",f="alt_auth_pane",g="alt_auth_messages",$("#"+f).exists()?($("#"+f).toggle("fast"),!1):(d=new Object,d.remove="<a href='#' id='"+h+"' role='button' class='btn btn-default'>Remove two-factor authentication</a>",i=$.get(b,c,"json"),i.done(function(a){var e,h;return a[0]===!0?d.sms="<a href='#' id='"+j+"' role='button' class='btn btn-default'>Send SMS</a>":console.warn("Couldn't get a valid result",a,b+"?"+c),h="",$.each(d,function(a,b){return h+=b}),e="<div id='"+f+"'><p>"+h+"</p><p id='"+g+"'></p></div>",$("#totp_submit").after(e),$("#"+j).click(function(){var a;return c="action=sendtotptext&user="+l,a=$.get(b,c,"json"),console.log("Sending message ...",b+"?"+c),a.done(function(a){return a.status===!0?($("#"+f).remove(),$("#totp_message").text(a.message)):($("#"+g).addClass("error").text(a.human_error),console.error(a.error))}),a.fail(function(a,d){return console.error("AJAX failure trying to send TOTP text",b+"?"+c),console.error("Returns:",a,d)})})}),i.fail(function(a,b){return console.error("Could not check SMS-ability",a,b)}),i.always(function(){return $("#"+h).click(function(){var a;return a="\n  <p id='totp_message' class='error'>Are you sure you want to disable two-factor authentication?</p>\n  <form id='totp_remove' onsubmit='event.preventDefault();'>\n    <fieldset>\n      <legend>Remove Two-Factor Authentication</legend>\n      <input type='email' value='"+l+"' readonly='readonly' id='username' name='username'/><br/>\n      <input type='password' id='password' name='password' placeholder='Password'/><br/>\n      <input type='text' id='code' name='code' placeholder='Authenticator Code or Backup Code' size='32' maxlength='32' autocomplete='off'/><br/>\n      <button id='remove_totp_button' class='totpbutton btn btn-danger'>Remove Two-Factor Authentication</button>\n    </fieldset>\n  </form>\n",$("#totp_prompt").html(a).attr("id","totp_remove_section"),$("#totp_remove").submit(function(){return r()}),$("#remove_totp_button").click(function(){return r()})})}))},Z=function(){var a,b,c,d,f,g,h;return H(),f=e.o,a=e.targetApi,b=f.attr("protocol")+"://"+f.attr("host")+"/"+window.totpParams.subdirectory+a,d=null!=$("#phone_auth").val()?$("#phone_auth").val():null,g=$("#username").val(),c="action=verifyphone&username="+g+"&auth="+d,h=$.get(b,c,"json"),h.done(function(a){var c,d;return a.status===!1?($("#phone_verify_message").exists()||$("#phone").before("<p id='phone_verify_message'></p>"),a.is_good===!0?($("#verify_phone_button").remove(),c="You've already verified your phone number, thanks!",d="good"):(c=a.human_error,d="error",console.error(a.error)),$("#phone_verify_message").text(c).addClass(d),a.fatal===!0&&($("#verify_phone_button").attr("disabled",!0),$("#verify_phone").unbind("submit").attr("onsubmit","")),!1):a.status===!0?($("#phone_auth").exists()||$("#username").after("<br/><input type='text' length='8' name='phone_auth' id='phone_auth' placeholder='Authorization Code'/>"),$("#phone_verify_message").exists()||$("#phone").before("<p id='phone_verify_message'></p>"),$("#phone_verify_message").text(a.message),a.is_good!==!0?$("#verify_phone_button").text("Confirm"):($("#phone_auth").remove(),$("#verify_later").remove(),$("#verify_phone_button").html("Continue &#187; ").unbind("click").click(function(){return window.location.href=window.totpParams.home}))):(console.warn("Unexpected condition encountered verifying the phone number",b),console.log(a),!1)}),h.fail(function(a,d){return console.error("AJAX failure trying to send phone verification text",b+"?"+c),console.error("Returns:",a,d)})},R=function(a){return null==a&&(a="help/instructions_pop.html"),$("<link/>",{rel:"stylesheet",type:"text/css",media:"screen",href:window.totpParams.popStylesheetPath}).appendTo("head"),$.get(""+window.totpParams.relative+a).done(function(a){var b;return $("#login_block").after(a),$("#login_block").addClass("blur"),b=window.totpParams.relative+"assets/",$(".android").html("<img src='"+b+"playstore.png' alt='Google Play Store'/>"),$(".ios").html("<img src='"+b+"appstore.png' alt='iOS App Store'/>"),$(".wp8").html("<img src='"+b+"wpstore.png' alt='Windows Phone Store'/>"),$(".large_totp_icon").each(function(){var a;return a=b+$(this).attr("src"),$(this).attr("src",a)}),$(".app_link_container a").addClass("newwindow"),G(),$(".close-popup").click(function(){return $("#login_block").removeClass("blur"),$("#cover_wrapper").remove()})}).fail(function(b,c){return console.error("Failed to load instructions @ "+a,b,c)})},Q=function(a,b){var c,d,e,f,g;return c="advanced_options_list",$("#"+c).exists()?($("#"+c).toggle("fast"),!0):(d="<ul id='"+c+"' class='advanced-account-options'>",g=b?"Configure":"Add",f=b?"btn-warning":"btn-success",e=["<li><button id='changePassword' class='btn btn-info change-password'>Change Password</button></li>","<li><a href='?2fa=t' role='button' class='btn "+f+" configure-tfa btn-success'>"+g+" Two-Factor Authentication</a></li>","<li><button id='removeAccount' role='button' class='btn btn-danger remove-account'>Remove Account</button></li>"],d+=e.join("\n	"),d+="</ul>",$("#settings_list").after(d),$("#removeAccount").click(function(){return L(this,a+"_user",b)}),$("#changePassword").click(function(){return h()}))},L=function(a,b,c){var d,e,f,g,h;return null==c&&(c=!0),h=$.cookie(b),e="remove_acct_button",f="remove_account_section",g=c?"\n      <input type='text' id='code' name='code' placeholder='Authenticator Code or Backup Code' size='32' maxlength='32' autocomplete='off'/><br/>":"",d="<section id='"+f+"'>\n  <p id='remove_message' class='error'>Are you sure you want to remove your account?</p>\n  <form id='account_remove' onsubmit='event.preventDefault();'>\n    <fieldset>\n      <legend>Remove My Account</legend>\n      <input type='email' value='"+h+"' readonly='readonly' id='username' name='username'/><br/>\n      <input type='password' id='password' name='password' placeholder='Password'/><br/>"+g+"\n      <button id='"+e+"' class='totpbutton btn btn-danger'>Remove My Account Permanantly</button> <button onclick=\"window.location.href=totpParams.home\" class='btn btn-primary'>Back to Safety</button>\n    </fieldset>\n  </form>\n</section>",$("#login_block").exists()?$("#login_block").replaceWith(d):$(a).after(d),$("#"+e).click(function(){return q()}),$("#account_remove").submit(function(){return q()})},q=function(){var a,b,c,f,g,h,i;return d(),h=e.o,a=e.targetApi,b=h.attr("protocol")+"://"+h.attr("host")+"/"+window.totpParams.subdirectory+a,i=$("#username").val(),g=$("#password").val(),f=$("#code").exists()?$("#code").val():!1,c="action=removeaccount&username="+i+"&password="+g+"&code="+f,$.post(b,c,"json").done(function(a){return a.status===!0?($("#remove_message").text("Your account has been successfully deleted."),$.each($.cookie(),function(a,b){return $.removeCookie(a,{path:"/"})}),m(3e3,function(){return window.location.href=window.totpParams.home}),S()):($("#remove_message").text("There was an error removing your account. Please try again."),console.error("Got an error-result: ",a.error),console.warn(b+"?"+c,a),T())}).fail(function(a,d){return $("#remove_message").text(a.error).addClass("error"),$("totp_code").val(""),console.error("Ajax Failure",b+"?"+c,a,d),T()})},H=function(){return event.preventDefault(),event.returnValue=!1},o=function(a,b){var c,d,f,g,h;return null==a&&(a=e.targetApi),null==b&&(b=!0),H(),c=b?url.attr("protocol")+"://"+url.attr("host")+"/"+window.totpParams.subdirectory+a:a,h=$("#username").val(),g=$("#password").val(),f=Base64.encodeURI(g),d="action=dologin&username="+h+"&password="+f+"&b64=true",!1},n=function(){var a,b;return a=grecaptcha.getResponse(),(b="object"==typeof a?a.success!==!0:B(a))?($("#createUser_submit").before("<p id='createUser_fail' class='alert bg-danger'>Sorry, your CAPTCHA was incorrect. Please try again.</p>"),grecaptcha.reset(),!1):($("#createUser_fail").remove(),console.info("Successfully called back the recaptcha response",a),"string"==typeof a&&$("#g-recaptcha-response").val(a),!0)},M=function(){var a,b,c,f,g,h,i,j;return $("#password").remove(),$("label[for='password']").remove(),$("#reset-password-icon").remove(),$(".alert").remove(),$("#form_create_new_account").remove(),$(".tooltip").remove(),h="reset-user-messages",$("#"+h).exists()||$("#login").before("<div id='"+h+"'></div>"),$("#"+h).removeClass("alert-danger alert-info").addClass("alert alert-warning").text("Once your password has been reset, your old password will be invalid."),j=e.o,a=e.targetApi,b=j.attr("protocol")+"://"+j.attr("host")+"/"+window.totpParams.subdirectory+a,f='<button class="btn btn-warning" id="check-login">Start Reset</button>',$("#login_button").replaceWith(f),c="action=startpasswordreset",g=function(a){return null==a&&(a=c),$(".reset-pass-button").unbind().click(function(){var b,c;return c=$("#totp").val(),null!=c&&(a+="&totp="+c),b=$(this).attr("data-method"),i(a,b),!1}),!1},i=function(a,c){var e;return e=$("#username").val(),null==a&&(a="action=startpasswordreset&username="+e),d(),$.get(b,a,"json").done(function(f){var i,j,k,l,m,n,o,p;if(f.status===!1)switch(B(f.human_error)&&(f.human_error=void 0),console.log("Got requested action "+f.action,f),console.log("Requested",b+"?"+a),$("#username").prop("disabled",!0),f.action){case"GET_TOTP":return p=!1,k="<legend>Two-Factor Authentication</legend>\n<p><code>"+e+'</code> has two-factor authentication enabled.</p>\n<div id=\'start-reset-process\' class="totp">\n  <div class="form-group">\n    <label for="totp">Authentication Code:</label>\n    <input type="number" class="form-control" id="totp" name="totp"/>\n  </div>\n</div>\n<button class=\'reset-pass-button btn btn-danger\' data-method=\'email\'>\n  Verify By Email\n</button>',f.canSMS&&(m="reset-user-sms-totp",o="<button class='btn btn-primary' id='"+m+"'>Text Code</button>",$("#start-reset-process").after(o),$("#"+m).click(function(){var c,f;return d(),c="action=sendtotptext&user="+e,f=$.get(b,c,"json"),console.log("Sending message ...",b+"?"+a),f.done(function(b){var c;return b.status===!0?($("#"+h).text("Your code has been sent to your registered number.").removeClass("alert-warning alert-danger").addClass("alert-info"),
p=!0,c='<button class="reset-pass-button btn btn-danger" data-method="email">\n  Verify by SMS\n</button>',$("#"+m).replaceWith(c),g(a)):($("#"+h).addClass("alert-danger").text(b.human_error),console.error(b.error))}),f.fail(function(c,d){return $("#"+h).addClass("alert-danger").text("There was a problem sending your text. Please try again."),console.error("AJAX failure trying to send TOTP text",b+"?"+a),console.error("Returns:",c,d)}),f.always(function(){return S()})})),$("#login").replaceWith(k).unbind().submit(function(){return H(),doTotpSubmission()}),g(a),!1;case"NEED_METHOD":return k="<p>Resetting password for <code>"+e+"</code></p>",f.canSMS&&p!==!0&&(k="<button class='reset-pass-button btn btn-danger' data-method='sms'>Verify by SMS</button>"),k+="<button class='reset-pass-button btn btn-danger' data-method='email'>\n  Verify by Email\n</button>",$("#login").replaceWith(k),g(a),!1;case"BAD_USER":return $("#"+h).addClass("alert-danger").text("Sorry, that user doesn't exist."),$("#username").prop("disabled",!1).val(""),!1;default:return n=null!=(l=f.human_error)?l:"There was a problem resetting your password. Please try again",$("#"+h).addClass("alert-danger").removeClass("alert-info alert-warning").text(n),console.error("Illegal state!"),console.warn(f),!1}else console.log("Got a good result."),console.log(f),$(".form-group").remove(),j=function(){var a;return a='<legend>Verify Reset</legend>\n<div class="form-group">\n  <label for="verify">Verification Token:</label>\n  <input type="text" class="form-control" id="verify" name="verify" />\n</div>\n<div class="form-group">\n  <label for="key">Key:</label>\n  <input type="text" class="form-control" id="key" name="key" />\n</div>\n<input type="hidden" id="username" name="username" value="'+e+'" />\n<button class="btn btn-success" id="verify-now">Verify Now</button>',$("#login").html(a).unbind().submit(function(){return H(),v()}),$("#verify-now").click(function(){return v()})},("email"===c||null==c)&&($("#"+h).removeClass("alert-warning alert-danger").addClass("alert-info").text("Check your email for your reset link. Once you've clicked that, your password will be reset."),i="<button class='btn btn-default' id='manual-input'>Manually Input Verification</button>",$("#check-login").replaceWith(i),$("#manual-input").click(function(){return j()})),"sms"===c&&j();return S(),!1}).fail(function(a,b){return T(),$("#"+h).removeClass("alert-info alert-warning").addClass("alert-danger").text("We couldn't process the password reset. Please try again."),!1})},$("#login").unbind().submit(function(){return H(),i()}),$("#check-login").unbind().click(function(){return H(),i()})},v=function(){var a,b,c,d,f;return f="",c="",$("input#verify").exists()?(f=$("input#verify").val().trim(),c=$("input#key").val().trim(),d=$("input#username").val()):(f=window.resetParams.verify,c=window.resetParams.key,d=window.resetParams.user,B(f)&&(f=e.o.param("verify"),c=e.o.param("key"),d=e.o.param("user")),b="<h1>Password Reset Confirmation</h1>\n<div id='login'></div>",$("body").append(b)),B(f)||B(c)?($(".alert").exists()&&$(".alert").remove(),b='<div class="alert alert-danger">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  <strong>Yikes!</strong> We need both the verification token and key to continue resetting your password.\n</div>',$("#login").before(b),$(".alert").alert(),!1):(a="action=finishpasswordreset&key="+c+"&verify="+f+"&username="+d,$.post(e.apiTarget,a,"json").done(function(a){return null==a.verification_data&&(a.verification_data=!0),a.status&&a.verification_data?(b='<div class="alert alert-success">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  <strong>Your password has been successfully reset</strong> Your new password is <input type="text" value="'+a.new_password+'" class="form-control form-inline code" readonly />. Write this down! You will NOT be able to generate or see this password again.<br/><br/>When you\'re done, <a href="'+e.urlString+'" class="alert-link">return to the login page</a> and log in with your new password.\n</div>',$("#login").replaceWith(b),$(".alert").alert(),!1):($(".alert").exists()&&$(".alert").remove(),"Invalid credentials - Invalid reset tokens"===a.error&&(a.human_error+="<br/><br/>Remember, your reset link is only good for <strong>one</strong> reset. If you've already used that link, you'll need to generate another"),b='<div class="alert alert-danger">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  <strong>There was a problem resetting your password.</strong> '+a.human_error+' We suggest <a href="'+e.urlString+'" class="alert-link">going back</a> and trying again.\n</div>',$("#login").before(b),$(".alert").alert(),console.error("Problem resetting password! Server said "+a.error),console.warn(a),!1)}).fail(function(c){return b='<div class="alert alert-danger">\n  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n  <strong>Yikes!</strong> We had a problem checking the server. Try again later.\n</div>',$("#login").before(b),$(".alert").alert(),console.error("Couldn't communicate with server! Tried to contact",e.apiTarget+"?"+a),!1}).always(function(){return $(".do-refresh-page").click(function(){return document.location.reload(!0)})}),!1)},h=function(){var a,b,c,d;return c=window.totpParams.domain+"_user",d=$.cookie(c),a='<form class=\'change-password-form form-horizontal\'>\n  <fieldset>\n    <legend>Change Password</legend>\n    <div class="form-group">\n      <label for="old-password" class="col-sm-2 control-label">Old Password</label>\n      <div class="col-sm-4">\n        <input type="password" class="form-control old-password" id="old-password" placeholder="Old Password" required="required"/>\n      </div>\n    </div>\n    <div class="new-password-group">\n      <div class="form-group">\n        <label for="new-password" class="col-sm-2 control-label">New Password</label>\n        <div class="col-sm-4 has-feedback">\n          <input type="password" class="form-control new-password" id="new-password" placeholder="New Password" required="required"/>\n          <span id="feedback-status-1"></span>\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="new-password-confirm" class="col-sm-2 control-label">Confirm New Password</label>\n        <div class="col-sm-4 has-feedback">\n          <input type="password" class="form-control new-password" id="new-password-confirm" placeholder="Confirm New Password" required="required"/>\n          <span id="feedback-status-2"></span>\n        </div>\n      </div>\n    </div>\n    <div id="password_security" class="pull-right col-sm-5 password-reqs hidden-xs"></div>\n    <button id="do-change-password" class="btn btn-primary col-sm-offset-2" disabled>Change Password for<br/> '+d+"</button>\n  </fieldset>\n</form>",$("#account_settings").after(a),E(window.totpParams.relative+"js/zxcvbn/zxcvbn.min.js"),b=function(){var a;try{return l("#do-change-password","#new-password","#new-password-confirm")}catch(b){return a=b,console.error("Couldn't check password requirements! "+a.message),console.warn(a.stack)}},$("#new-password").keyup(function(){return b()}).change(function(){return b()}),$("#new-password-confirm").change(function(){return k("#do-change-password","#new-password","#new-password-confirm")}).keyup(function(){return k("#do-change-password","#new-password","#new-password-confirm")}),$(".change-password-form input").blur(function(){return b()}),$("#do-change-password").click(function(){var a;return $(this).prop("disabled",!0),a="action=changepassword&old_password="+encodeURIComponent($("#old-password").val())+"&new_password="+encodeURIComponent($("#new-password").val())+"&username="+encodeURIComponent(d),$.post(e.apiTarget,a,"json").done(function(a){var b,c;return a.status===!1||"changepassword"!==a.action?("changepassword"!==a.action&&(a.error="mismatched mode result",a.human_error="The server gave a nonsensical response. Your original password is still valid."),null==a.human_error&&(a.human_error="The server had an unexpected error"),b='<div class="alert alert-danger center-block fade in" role="alert">\n  <strong>Couldn\'t update password</strong> '+a.human_error+"\n</div>",$("#do-change-password").before(b),$("#do-change-password").prop("disabled",!1),console.error("Couldn't update password! Server said "+a.error),console.warn(a),!1):(c='<div class="alert alert-success center-block fade in" role="alert">\n  <strong>Password Changed</strong> Your password has been successfully updated. <a class="alert-link" id="refresh-page" style="cursor:pointer">Click here to refresh now</a> - you may have to log back in, using your new password.\n</div>',$(".change-password-form").replaceWith(c),$("#refresh-page").click(function(){return document.location.reload(!0)}),!1)}).fail(function(a,b){var c;return c='<div class="alert alert-danger center-block fade in" role="alert">\n  <strong>Couldn\'t update password</strong> There was a problem communicating with the server. Please try again later.\n</div>',$("#do-change-password").replaceWith(c),console.error("AJAX failure to change password!"),console.warn("Got",a,b)})}),!1},u=function(){return!1},Y=function(a){var b,c,d,f;c=$(a).attr("data-alternate").toBool(),d=$(a).atter("data-user"),b="action=verifyemail&user="+encodeURIComponent(d)+"&alternate="+c,f=function(){var c;return c=$("#verify-email-code").val().trim(),b+="&token="+c,$.post(e.apiTarget,b,"json").done(function(b){var c;if(b.is_good===!0){if(b.status===!1){S();try{W("You're already verified")}catch(d){}}else try{W("Verification successful")}catch(d){}$("#verify-email-filler").remove(),c="<span class='glyphicon glyphicon-check text-success' data-toggle='tooltip' title='Verified Email'></span>",b.meets_restriction_criteria&&(c+="<span class='glyphicon glyphicon-star' data-toggle='tooltip' title='Unrestricted User'></span>"),$(a).append(c)}else try{T(b.human_error)}catch(d){T()}return!1}).fail(function(a,b){try{T("Sorry, we couldn't verify your email at this time")}catch(c){T()}return!1}),!1};try{startLoad()}catch(g){}return $.post(e.apiTarget,b,"json").done(function(b){var c;if(console.info(b),b.is_good===!0){if(b.status===!1){S();try{W("You're already verified")}catch(d){}}}else if(b.status)c="<div id='verify-email-filler' class='form'>\n  <p>We've sent you an email. Please click the link in the email, or paste the code provided into the box below.</p>\n  <label for='verify-email-code' class='sr-only'>Validation Code:</label>\n  <input class='form-control' type='text' length='32' placeholder='Verification Code' id='verify-email-code' name='verify-email-code' required/>\n  <button class='btn btn-primary' id='validate-email-code'>Validate Code</button>\n</div>",$(a).after(c),$("#validate-email-code").click(function(){return f()});else{console.error(b.error);try{T(b.human_error)}catch(d){T();try{W(b.human_error)}catch(d){}}}return!1}).fail(function(a,b){try{T("Sorry, we couldn't verify your email at this time")}catch(c){T()}return!1}),!1},c=function(a){var b;return b="<div id='add-alternate-form' class='form'>\n  <input type='email' class='form-control' placeholder='Alternate email address' id='alternate-email-value' name='alternate-email-value' required/>\n  <button class='btn btn-primary' id='submit-alternate-email'>Add</button>\n</div>",$(a).after(b),$("#submit-alternate-email").click(function(){var c,d,f;return startLoad(),d=$("#alternate-email-value").val().trim(),f=$(a).attr("data-user"),c="action=addalternateemail&email="+encodeURIComponent(d)+"&user="+encodeURIComponent(f),$.post(e.apiTarget,c,"json").done(function(c){if(console.info(c),c.status!==!0){try{T(c.human_error)}catch(e){T(),console.error(c.human_error)}return!1}try{W("Added '"+d+"' as an alternate email")}catch(e){}return $("#add-alternate-form").remove(),b=d+" <small>(check your email for a verification link)</small>",$(a).html(b),S(),!1}).fail(function(a,b){return T("Sorry, we couldn't assign your alternate email at this time"),!1}),!1}),!1},$(function(){var a,b,d,f;d=!0,$("link[rel='stylesheet']").each(function(){return $(this).attr("href").search(!0)?(d=!1,!1):void 0}),d&&(a='<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />',$("head").append(a)),f=null==window.passwords.submitSelector?"#createUser_submit":window.passwords.submitSelector,$("#password.create").exists()&&(E(window.totpParams.relative+"js/zxcvbn/zxcvbn.min.js"),$("#password.create").keyup(function(){return l()}).change(function(){return l()}),$("#password2").change(function(){return k()}).keyup(function(){return k()}),$("input").addClass("form-control").parent().addClass("form-inline").blur(function(){return l()}),$("#password").after("<span id='feedback-status-1'></span>").parent().removeClass("form-inline").parent().addClass("has-feedback").parent().addClass("form-horizontal"),$("#password2").after("<span id='feedback-status-2'></span>").parent().removeClass("form-inline").parent().addClass("has-feedback").parent().addClass("form-horizontal")),$("#totp_submit").submit(function(){return s()}),$("#verify_totp_button").click(function(){return s()}),$("#totp_start").submit(function(){return F()}),$("#add_totp_button").click(function(){return F()}),$("#totp_remove").submit(function(){return r()}),$("#remove_totp_button").click(function(){return r()}),$("#alternate_verification_prompt").click(function(){return w(),!1}),$("#verify_phone").submit(function(){return Z()}),$("#verify_phone_button").click(function(){return Z()}),$("#verify_later").click(function(){return window.location.href=window.totpParams.home}),$("#totp_help").click(function(){return R()}),$("#showAdvancedOptions").click(function(){var a,b;return a=$(this).attr("data-domain"),b="true"===$(this).attr("data-user-tfa")?!0:!1,Q(a,b)}),$(".do-password-reset").click(function(){return M(),!1}),$(".verify-email").click(function(){var a;return a=$(this).parent(),Y(a),!1}),$("#add-alternate").click(function(){var a;return a=$(this).parent(),c(a),!1});try{E("https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js",function(){var a;try{null!=e.o.param("showhelp")&&R()}catch(b){a=b,m(300,function(){return null!=e.o.param("showhelp")?R():void 0})}$(".do-password-reset").unbind();try{$("#reset-password-icon").tooltip()}catch(b){a=b,console.warn("Couldn't tooltip the forgotten password icon!")}$(".do-password-reset").click(function(){return M(),!1});try{return $(".alert").alert()}catch(b){return a=b,console.warn("Couldn't bind alert!")}})}catch(g){b=g,console.log("Couldn't tooltip icon!")}try{null!=e.o.param("showhelp")&&R()}catch(g){b=g,m(300,function(){return null!=e.o.param("showhelp")?R():void 0})}try{window.checkPasswordReset===!0&&v()}catch(g){b=g,console.error("Couldn't check password reset state! "+b.message)}return $("#next.continue").click(function(){return window.location.href=window.totpParams.home}),$("<link/>",{rel:"stylesheet",type:"text/css",media:"screen",href:window.totpParams.combinedStylesheetPath}).appendTo("head")})}).call(this);
//# sourceMappingURL=maps/c.map