(function(){null==window.dropperParams&&(window.dropperParams={}),window.dropperParams.postUploadHandler=function(a,b){var c,d,e,f,g,h;if(window.dropperParams.dropzone.removeAllFiles(),"object"!=typeof b)return window.toastStatusMessage("<strong>Error</strong> There was a problem with the server handling your image. Please try again.","danger","#profile_conversation_wrapper"),!1;if(b.status!==!0)return null==b.human_error&&(b.human_error="There was a problem uploading your image."),window.toastStatusMessage("<strong>Error</strong> "+b.human_error,"danger","#profile_conversation_wrapper"),!1;try{f="",b.full_path=b.wrote_file,b.thumb_path=b.wrote_thumb,e=b.mime_provided.split("/")[0],h="<!--FlagProcessImage::"+e+"::"+f+b.full_path+"::"+f+b.thumb_path+"-->",d=function(){switch(e){case"image":return h+"\n<div class='message-media'>\n  <a href=\""+f+b.full_path+'" class="newwindow">\n    <img src="'+f+b.thumb_path+'" />\n  </a>\n  <p class="text-muted">Click the thumbnail for a full-sized image ('+a.name+")</p>\n</div>";case"audio":return h+'\n<div class="message-media">\n  <audio src="'+f+b.full_path+'" controls preload="auto">\n    <img src="'+f+b.thumb_path+'" alt="Audio Thumbnail" class="img-responsive" />\n    <p>\n      Your browser doesn\'t support the HTML5 <code>audio</code> element.\n      Please download the file below.\n    </p>\n  </audio>\n  <p class="text-muted">\n    (<a href="'+f+b.full_path+'" class="newwindow" download="'+a.name+'">\n      Original Media\n    </a>)\n  </p>\n</div>';case"video":return h+'\n<div class="message-media">\n  <video src="'+f+b.full_path+'" controls preload="auto">\n    <img src="'+f+b.thumb_path+'" alt="Video Thumbnail" class="img-responsive" />\n    <p>\n      Your browser doesn\'t support the HTML5 <code>video</code> element.\n      Please download the file below.\n    </p>\n  </video>\n  <p class="text-muted">\n    (<a href="'+f+b.full_path+'" class="newwindow" download="'+a.name+'">\n      Original Media\n    </a>)\n  </p>\n</div>'}}(),window.dropperParams.richDisplay=d,$("#profile_messages").append(d),g=a.size<5242880||"image"!==e?""+f+b.full_path:""+f+b.thumb_path}catch(i){c=i,window.toastStatusMessage("<strong>Error</strong> Your upload completed, but we couldn't post-process it.","danger","#profile_conversation_wrapper")}return!1},function(a){"use strict";function b(a,b){e.push({selector:a,fn:b}),d||(d=new g(c),d.observe(f.documentElement,{childList:!0,subtree:!0})),c()}function c(){for(var a,b,c=0,d=e.length;d>c;c++){a=e[c],b=f.querySelectorAll(a.selector);for(var g,h=0,i=b.length;i>h;h++)g=b[h],g.ready||(g.ready=!0,a.fn.call(g,g))}}var d,e=[],f=a.document,g=a.MutationObserver||a.WebKitMutationObserver;a.ready=b}(this),$(function(){var a,b;return null==window.dropperParams&&(window.dropperParams={}),window.dropperParams.metaPath="/helpers/js-dragdrop/",window.dropperParams.uploadPath=window.dropperParams.metaPath+"uploaded/",window.dropperParams.dependencyPath=window.dropperParams.metapath+"bower_components/",window.dropperParams.showProgress=!0,null==(a=window.dropperParams).dropTargetSelector&&(a.dropTargetSelector="#file-uploader"),b='<button class="upload-image media-uploader btn btn primary" id="do-upload-file"><span class="glyphicon glyphicon-cloud-upload"></span></button>',window.dropperParams.clickTargets=["#do-upload-file"],window.dropperParams.mimeTypes="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,text/csv,application/zip,application/x-7z-compressed,image/*",ready(dropperParams.dropTargetSelector,function(a){return $(window.dropperParams.dropTargetSelector).parent().after(b),window.dropperParams.handleDragDropImage(dropperParams.dropTargetSelector,dropperParams.postUploadHandler)})})}).call(this);
//# sourceMappingURL=js/maps/client-upload.map