!function(t,e,n,i){"use strict";var o=function(){var t=n.body||n.documentElement;return t=t.style,""===t.WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition?"":!1},r=o()!==!1,a=function(t,e,n){var i={},r=o();i[r+"transform"]="translateX("+e+")",i[r+"transition"]=r+"transform "+n+"s linear",t.css(i)},u="ontouchstart"in e,d=e.navigator.pointerEnabled||e.navigator.msPointerEnabled,c=function(t){if(u)return!0;if(!d||"undefined"==typeof t||"undefined"==typeof t.pointerType)return!1;if("undefined"!=typeof t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1};t.fn.imageLightbox=function(o){var l=t.extend({selector:'id="imagelightbox"',allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,preloadNext:!0,enableKeyboard:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,onStart:!1,onEnd:!1,onLoadStart:!1,onLoadEnd:!1},o),f=t([]),p=t(),s=t(),g=0,h=0,v=0,m=!1,x=function(e){var n="a"===t(e).prop("tagName").toLowerCase()&&new RegExp(".("+l.allowedTypes+")$","i").test(t(e).attr("href")),o=t(e).attr("data-lightbox")!==i;return n||o},E=function(){if(!s.length)return!1;var n=.8*t(e).width(),i=.9*t(e).height(),o=new Image;o.src=s.attr("src"),o.onload=function(){if(g=o.width,h=o.height,g>n||h>i){var r=g/h>n/i?g/n:h/i;g/=r,h/=r}s.css({width:g+"px",height:h+"px",top:(t(e).height()-h)/2+"px",left:(t(e).width()-g)/2+"px"})}},y=function(e){if(m)return!1;if(e="undefined"==typeof e?!1:"left"===e?1:-1,s.length){if(e!==!1&&(f.length<2||l.quitOnEnd===!0&&(-1===e&&0===f.index(p)||1===e&&f.index(p)===f.length-1)))return k(),!1;var n={opacity:0};r?a(s,100*e-v+"px",l.animationSpeed/1e3):n.left=parseInt(s.css("left"))+100*e+"px",s.animate(n,l.animationSpeed,function(){S()}),v=0}m=!0,l.onLoadStart!==!1&&l.onLoadStart(),setTimeout(function(){var n=p.attr("href");n===i&&(n=p.attr("data-lightbox")),s=t("<img "+l.selector+" />").attr("src",n).load(function(){s.appendTo("body"),E();var n={opacity:1};if(s.css("opacity",0),r)a(s,-100*e+"px",0),setTimeout(function(){a(s,"0px",l.animationSpeed/1e3)},50);else{var i=parseInt(s.css("left"));n.left=i+"px",s.css("left",i-100*e+"px")}if(s.animate(n,l.animationSpeed,function(){m=!1,l.onLoadEnd!==!1&&l.onLoadEnd()}),l.preloadNext){var o=f.eq(f.index(p)+1);o.length||(o=f.eq(0)),t("<img />").attr("src",o.attr("href")).load()}}).error(function(){l.onLoadEnd!==!1&&l.onLoadEnd()});var o=0,u=0,h=0;s.on(d?"pointerup MSPointerUp":"click",function(t){if(t.preventDefault(),l.quitOnImgClick)return k(),!1;if(c(t.originalEvent))return!0;var e=(t.pageX||t.originalEvent.pageX)-t.target.offsetLeft;p=f.eq(f.index(p)-(g/2>e?1:-1)),p.length||(p=f.eq(g/2>e?f.length:0)),y(g/2>e?"left":"right")}).on("touchstart pointerdown MSPointerDown",function(t){return!c(t.originalEvent)||l.quitOnImgClick?!0:(r&&(h=parseInt(s.css("left"))),void(o=t.originalEvent.pageX||t.originalEvent.touches[0].pageX))}).on("touchmove pointermove MSPointerMove",function(t){return!c(t.originalEvent)||l.quitOnImgClick?!0:(t.preventDefault(),u=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,v=o-u,void(r?a(s,-v+"px",0):s.css("left",h-v+"px")))}).on("touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",function(t){return!c(t.originalEvent)||l.quitOnImgClick?!0:void(Math.abs(v)>50?(p=f.eq(f.index(p)-(0>v?1:-1)),p.length||(p=f.eq(0>v?f.length:0)),y(v>0?"right":"left")):r?a(s,"0px",l.animationSpeed/1e3):s.animate({left:h+"px"},l.animationSpeed/2))})},l.animationSpeed+100)},S=function(){return s.length?(s.remove(),void(s=t())):!1},k=function(){return s.length?void s.animate({opacity:0},l.animationSpeed,function(){S(),m=!1,l.onEnd!==!1&&l.onEnd()}):!1};return t(e).on("resize",E),l.quitOnDocClick&&t(n).on(u?"touchend":"click",function(e){s.length&&!t(e.target).is(s)&&k()}),l.enableKeyboard&&t(n).on("keyup",function(t){return s.length?(t.preventDefault(),27===t.keyCode&&k(),void((37===t.keyCode||39===t.keyCode)&&(p=f.eq(f.index(p)-(37===t.keyCode?1:-1)),p.length||(p=f.eq(37===t.keyCode?f.length:0)),y(37===t.keyCode?"left":"right")))):!0}),this.startImageLightbox=function(e){return x(this)?(e!==i&&e.preventDefault(),m?!1:(m=!1,l.onStart!==!1&&l.onStart(),p=t(this),void y())):!0},t(n).off("click",this.selector),t(n).on("click",this.selector,this.startImageLightbox),this.each(function(){return x(this)?void(f=f.add(t(this))):!0}),this.switchImageLightbox=function(t){var e=f.eq(t);if(e.length){var n=f.index(p);p=e,y(n>t?"left":"right")}return this},this.quitImageLightbox=function(){return k(),this},this}}(jQuery,window,document);